2026-01-13 13:18:50 - Frederica - INFO - logger:99 - 企业微信机器人初始化完成，应用ID: 1000002
2026-01-13 13:18:50 - Frederica - INFO - logger:99 - 回调配置: Token=FREDERICAT..., AESKey=norTzT7trW...
2026-01-13 13:18:50 - Frederica - INFO - logger:99 - 
    ========================================
        Frederica - 企业微信聊天机器人
    ========================================
    
    功能特性：
    1. 基于企业微信官方API
    2. 异步对话处理
    3. 长期记忆存储
    4. 智能上下文理解
    5. 自然语言交互
    
    使用说明：
    1. 确保已正确配置企业微信应用
    2. 启动回调服务器接收企业微信消息
    3. 在企业微信管理后台配置回调URL
    4. 支持文本消息的智能回复
    5. 按 Ctrl+C 停止服务器
    
    配置要求：
    1. DeepSeek API密钥
    2. 企业微信企业ID、应用Secret和应用ID
    3. 企业微信应用需要配置消息回调URL
    
    回调URL配置：
    1. 在企业微信管理后台配置回调URL
    2. URL格式: http://你的域名或IP:端口/callback
    3. Token: FREDERICATOKEN
    4. EncodingAESKey: norTzT7trWzPklIJEBILTG7UMzMXuibpzlAVaS4zag0
    5. 消息加解密方式: 安全模式
    
    注意：企业微信消息接收必须使用回调模式
          轮询模式已被废弃，不再支持
    
2026-01-13 13:18:50 - Frederica - INFO - logger:99 - 机器人初始化成功
2026-01-13 13:18:50 - Frederica - INFO - logger:99 - 启动机器人消息处理线程（非阻塞模式）...
2026-01-13 13:18:50 - Frederica - INFO - logger:99 - 启动企业微信聊天机器人...
2026-01-13 13:18:50 - Frederica - INFO - logger:99 - 企业微信Access Token刷新成功，有效期至: 2026-01-13 15:18:50.637625
2026-01-13 13:18:50 - Frederica - INFO - logger:99 - 企业微信连接测试成功
2026-01-13 13:18:50 - Frederica - INFO - logger:99 - 机器人已启动，等待回调消息...
2026-01-13 13:18:50 - Frederica - INFO - logger:99 - 机器人以非阻塞模式启动，线程已在后台运行
2026-01-13 13:18:50 - Frederica - INFO - logger:99 - 机器人消息处理线程已启动
2026-01-13 13:18:51 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:18:51 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:18:51 - Frederica - INFO - logger:99 - 
    ========================================
        企业微信回调服务器启动
    ========================================
    
    服务器配置：
    服务器类型: 双栈服务器 (IPv4 + IPv6)
    监听地址: :: (所有IPv6地址，同时支持IPv4)
    监听端口: 8080
    
    网络访问说明：
    允许所有网络接口访问（IPv4和IPv6）
    
    支持的协议：
    - IPv4: 是
    - IPv6: 是
    
    回调URL配置：
    IPv4访问URL: http://localhost:8080/callback
    IPv6访问URL: http://[::1]:8080/callback
    
    重要提示：
    1. 如果监听地址是 '::'，服务器同时支持IPv4和IPv6
    2. 如果监听地址是 '0.0.0.0'，只支持IPv4
    3. 如果监听地址是 '127.0.0.1' 或 'localhost'，只支持本机IPv4访问
    4. 如果监听地址是 '::1'，只支持本机IPv6访问
    5. 生产环境建议使用域名和HTTPS
    
    企业微信配置要求：
    1. 在企业微信管理后台配置回调URL
    2. 使用以下参数：
       - URL: http://tx6p.paleflame.top/callback (根据实际域名调整)
       - Token: FREDERICATOKEN
       - EncodingAESKey: norTzT7trWzPklIJEBILTG7UMzMXuibpzlAVaS4zag0
       - 消息加解密方式: 安全模式
    
    按 Ctrl+C 停止服务器
    
2026-01-13 13:18:51 - Frederica - INFO - logger:99 - 服务器正在启动，监听 :::8080...
2026-01-13 13:18:52 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:18:52 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:18:53 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:18:54 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:18:54 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:18:55 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:18:56 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:18:56 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:18:57 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:18:57 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:18:58 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:18:59 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:18:59 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:19:00 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:19:00 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:19:01 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:19:02 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:19:02 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:19:03 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:19:03 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:19:04 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:19:05 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:19:05 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:19:06 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:19:06 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:19:07 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:19:08 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:19:08 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:19:09 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:19:09 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:19:10 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:19:11 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:19:11 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:19:11 - Frederica - INFO - logger:99 - 收到POST请求: /callback?msg_signature=df1b410b65b9464c197b170d07f5e025697f8174&timestamp=1768281549&nonce=1768738280
2026-01-13 13:19:11 - Frederica - INFO - logger:99 - 查询参数: {'msg_signature': 'df1b410b65b9464c197b170d07f5e025697f8174', 'timestamp': '1768281549', 'nonce': '1768738280'}
2026-01-13 13:19:11 - Frederica - INFO - logger:99 - 请求体长度: 640
2026-01-13 13:19:11 - Frederica - DEBUG - logger:95 - 原始查询参数: {'msg_signature': ['df1b410b65b9464c197b170d07f5e025697f8174'], 'timestamp': ['1768281549'], 'nonce': ['1768738280']}
2026-01-13 13:19:11 - Frederica - DEBUG - logger:95 - 解析后的URL: ParseResult(scheme='', netloc='', path='/callback', params='', query='msg_signature=df1b410b65b9464c197b170d07f5e025697f8174&timestamp=1768281549&nonce=1768738280', fragment='')
2026-01-13 13:19:11 - Frederica - DEBUG - logger:95 - 请求头: {'x-forwarded-for': '183.47.98.227', 'Accept': '*/*', 'Content-Type': 'text/xml', 'User-Agent': 'Mozilla/4.0', 'Pragma': 'no-cache', 'cf-ray': '9bd26fe76ca86e50-AMS', 'Host': 'tx6p.paleflame.top:8080', 'Content-Length': '640', 'cdn-loop': 'cloudflare; loops=1', 'CF-Connecting-IP': '183.47.98.227', 'CF-IPCountry': 'CN', 'CF-Visitor': '{"scheme":"http"}', 'X-Forwarded-Proto': 'http', 'accept-encoding': 'gzip', 'Connection': 'Keep-Alive'}
2026-01-13 13:19:11 - Frederica - DEBUG - logger:95 - Content-Length: 640
2026-01-13 13:19:11 - Frederica - DEBUG - logger:95 - 参数 msg_signature: df1b410b65b9464c197b170d07f5e025697f8174 (长度: 40)
2026-01-13 13:19:11 - Frederica - DEBUG - logger:95 - 参数 timestamp: 1768281549 (长度: 10)
2026-01-13 13:19:11 - Frederica - DEBUG - logger:95 - 参数 nonce: 1768738280 (长度: 10)
2026-01-13 13:19:11 - Frederica - DEBUG - logger:95 - 请求体前500字符: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><Encrypt><![CDATA[dLrgsy/p4rOsVOYF/4wdPsClWAhiXGwSO8zF06WnkldBhFKxMQVqvOEDHwZhFqIu0cPeHYpsmuzyujCtGo9qLgoLWCiRDYGw+M5cIv35hN32gkrOzRF9eQUuzrkOBdzjdcwejVlu/BFo31BVcbPtraa/KEU4kTXmAuaRYcdSIGvTWSss2RpVy/ggVmOziXiEWI94nqli8P9/IOaDGAsmFctm3OZd0p063t8dWO+gYA0BiR/cL0kfWxhZG01ROPHuny9S9cugKD2ej/xiXydc2vrfmbhkbXimld8rYuQa/jdONSf00yT5PtfijYAMEjBADqJ0dSJrVuPIyXaP5wQMZYldm3ALt9FvbuVJj02UxOqv91Ns0WlFJ43Mnl4RZEzT/11iwpu++9X8hHhVi0lVvZIH4wCzYQqFEuo+wX
2026-01-13 13:19:11 - Frederica - DEBUG - logger:95 - 请求体MD5: 4491748618001962501
2026-01-13 13:19:11 - Frederica - DEBUG - logger:95 - 请求体是否包含XML: False
2026-01-13 13:19:11 - Frederica - DEBUG - logger:95 - 开始处理POST回调请求...
2026-01-13 13:19:11 - Frederica - INFO - logger:99 - 处理回调请求: 方法=POST, 参数={'msg_signature': 'df1b410b65b9464c197b170d07f5e025697f8174', 'timestamp': '1768281549', 'nonce': '1768738280'}
2026-01-13 13:19:11 - Frederica - DEBUG - logger:95 - 请求方法: POST
2026-01-13 13:19:11 - Frederica - DEBUG - logger:95 - 完整查询参数: {'msg_signature': 'df1b410b65b9464c197b170d07f5e025697f8174', 'timestamp': '1768281549', 'nonce': '1768738280'}
2026-01-13 13:19:11 - Frederica - DEBUG - logger:95 - 请求体长度: 640
2026-01-13 13:19:11 - Frederica - DEBUG - logger:95 - msg_signature: df1b410b65b9464c197b... (长度: 40)
2026-01-13 13:19:11 - Frederica - DEBUG - logger:95 - timestamp: 1768281549
2026-01-13 13:19:11 - Frederica - DEBUG - logger:95 - nonce: 1768738280
2026-01-13 13:19:11 - Frederica - INFO - logger:99 - 处理POST消息请求，请求体长度: 640
2026-01-13 13:19:11 - Frederica - DEBUG - logger:95 - 解密后的XML: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><CreateTime>1768281549</CreateTime><MsgType><![CDATA[event]]></MsgType><Event><![CDATA[kf_msg_or_event]]></Event><Token><![CDATA[ENCiDg7GsGwg89PSVkHtY1D9fEx37x17a6KSMcKFJ7drrr]]></Token><OpenKfId><![CDATA[wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ]]></OpenKfId></xml>
2026-01-13 13:19:11 - Frederica - INFO - logger:99 - 直接解析XML: MsgType=event, Event=kf_msg_or_event
2026-01-13 13:19:11 - Frederica - INFO - logger:99 - wechatpy解析: 类型=unknown, 发送者=None
2026-01-13 13:19:11 - Frederica - INFO - logger:99 - 处理客服消息事件 (kf_msg_or_event)
2026-01-13 13:19:11 - Frederica - DEBUG - logger:95 - 提取到Token: ENCiDg7GsGwg89PSVkHt...
2026-01-13 13:19:11 - Frederica - DEBUG - logger:95 - 提取到OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 13:19:11 - Frederica - INFO - logger:99 - 客服事件已接收，Token: ENCiDg7GsGwg89PSVkHt..., OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 13:19:11 - Frederica - INFO - logger:99 - 开始拉取微信客服消息，open_kfid: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 13:19:11 - Frederica - INFO - logger:99 - 已启动消息拉取线程
2026-01-13 13:19:11 - Frederica - INFO - logger:99 - 2400:cb00:996:1000:ed8:fd80:3fc4:6a4b - "POST /callback?msg_signature=df1b410b65b9464c197b170d07f5e025697f8174&timestamp=1768281549&nonce=1768738280 HTTP/1.1" 200 -
2026-01-13 13:19:11 - Frederica - INFO - logger:99 - POST请求处理完成，响应长度: 582
2026-01-13 13:19:11 - Frederica - DEBUG - logger:95 - 响应内容前500字符: <xml>
<Encrypt><![CDATA[jYGI9Z5rNmGzetfGBLHSnx0uHLat50riVIAiS9Fn6cgdjXZWvnz3hgODXUhXq0kK39lTFbzn8aWZULseDLTL40ebUAm8INFU3+ZeB6EXMypy/kxuHIpL4W3KheZjyqnbZlXKLCZmMH50LMoB/AttmYmwdtfHEa44fYuanfaoa2qVBns2YVI5xScXzzjso6CuG8hZKLBDNxJ8n9jijzboz77eYGbCbi0OT/WMFeEZi0K/ojze4wWDPZDDU8kpE+JwAt2fHRROFEnrouN+41tWax+ZJ8+76fd+9neVlzMpjGIR9GrsQVdwG48BSn1tmCP41erW8KBio+zO+ZezgFRncYUB7LUOX/Zqz6nqdhRZNNTaqmBcpORcGHfiPFi4p3Pk]]></Encrypt>
<MsgSignature><![CDATA[b97a97b8252b685b1272c5d901d6268ccffef126]]></MsgSignatu
2026-01-13 13:19:11 - Frederica - DEBUG - logger:95 - 响应是否包含XML: False
2026-01-13 13:19:11 - Frederica - DEBUG - logger:95 - 响应状态: 200 OK
2026-01-13 13:19:11 - Frederica - DEBUG - logger:95 - 响应Content-Type: text/xml; charset=utf-8
2026-01-13 13:19:12 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 拉取到 30 条客服消息
2026-01-13 13:19:12 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:19:12 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:19:12 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:19:12 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:19:12 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=你好！...
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 1
2026-01-13 13:19:12 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=Hi...
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 2
2026-01-13 13:19:12 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:19:12 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:19:12 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:19:12 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=Hello...
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 3
2026-01-13 13:19:12 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=你好！...
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 4
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=can you hear me...
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 5
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=testimg...
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 6
2026-01-13 13:19:12 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=说句话...
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 7
2026-01-13 13:19:12 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 8
2026-01-13 13:19:12 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 9
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=你好...
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 10
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=你好...
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 11
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 12
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 13
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 14
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=你好...
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 15
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 16
2026-01-13 13:19:12 - Frederica - DEBUG - logger:95 - 开始处理第 1 条消息: AZE49UZ9Jvnb7mvh1uLLiRiFVX
2026-01-13 13:19:12 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:19:14 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 13:19:14 - Frederica - DEBUG - logger:95 - 第 1 条消息处理完成
2026-01-13 13:19:14 - Frederica - DEBUG - logger:95 - 开始处理第 2 条消息: AvaxLgerVDpibUzqi4vFqphiYw
2026-01-13 13:19:14 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:19:15 - Frederica - ERROR - logger:107 - 发送企业微信消息失败: Error code: 81013, message: user & party & tag all invalid, hint: [1768281554430050308533511], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=81013
2026-01-13 13:19:16 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 13:19:16 - Frederica - DEBUG - logger:95 - 第 2 条消息处理完成
2026-01-13 13:19:16 - Frederica - DEBUG - logger:95 - 开始处理第 3 条消息: AvRKfRQXGPdy8Wg217mtGLBcVD
2026-01-13 13:19:16 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:19:16 - Frederica - ERROR - logger:107 - 发送企业微信消息失败: Error code: 81013, message: user & party & tag all invalid, hint: [1768281555491621485719963], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=81013
2026-01-13 13:19:19 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 13:19:19 - Frederica - DEBUG - logger:95 - 第 3 条消息处理完成
2026-01-13 13:19:19 - Frederica - DEBUG - logger:95 - 开始处理第 4 条消息: BHnFViLdNoqjSWzwbZRVFpBGkV
2026-01-13 13:19:19 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:19:19 - Frederica - ERROR - logger:107 - 发送企业微信消息失败: Error code: 81013, message: user & party & tag all invalid, hint: [1768281557401542590950436], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=81013
2026-01-13 13:19:20 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 13:19:20 - Frederica - DEBUG - logger:95 - 第 4 条消息处理完成
2026-01-13 13:19:20 - Frederica - DEBUG - logger:95 - 开始处理第 5 条消息: BHwqRoNn3J5eXpSkYjxoTANMnP
2026-01-13 13:19:20 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:19:21 - Frederica - ERROR - logger:107 - 发送企业微信消息失败: Error code: 81013, message: user & party & tag all invalid, hint: [1768281559494180879487261], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=81013
2026-01-13 13:19:21 - Frederica - INFO - logger:99 - 
收到停止信号，正在关闭服务器...
2026-01-13 13:19:21 - Frederica - INFO - logger:99 - 停止机器人消息处理线程...
2026-01-13 13:19:21 - Frederica - INFO - logger:99 - 停止企业微信聊天机器人...
2026-01-13 13:19:22 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 13:19:22 - Frederica - DEBUG - logger:95 - 第 5 条消息处理完成
2026-01-13 13:19:22 - Frederica - INFO - logger:99 - 机器人已停止
2026-01-13 13:19:22 - Frederica - INFO - logger:99 - 服务器已关闭
2026-01-13 13:27:53 - Frederica - INFO - logger:99 - 企业微信机器人初始化完成，应用ID: 1000002
2026-01-13 13:27:53 - Frederica - INFO - logger:99 - 回调配置: Token=FREDERICAT..., AESKey=norTzT7trW...
2026-01-13 13:27:53 - Frederica - ERROR - logger:107 - 无效的external_userid: 
2026-01-13 13:29:21 - Frederica - INFO - logger:99 - 企业微信机器人初始化完成，应用ID: 1000002
2026-01-13 13:29:21 - Frederica - INFO - logger:99 - 回调配置: Token=FREDERICAT..., AESKey=norTzT7trW...
2026-01-13 13:29:21 - Frederica - ERROR - logger:107 - 无效的external_userid: 
2026-01-13 13:29:21 - Frederica - ERROR - logger:107 - 参数验证失败: 无效的external_userid: 
2026-01-13 13:29:21 - Frederica - ERROR - logger:107 - 无效的open_kfid: 
2026-01-13 13:29:21 - Frederica - ERROR - logger:107 - 参数验证失败: 无效的open_kfid: 
2026-01-13 13:29:21 - Frederica - ERROR - logger:107 - 无效的消息内容: 
2026-01-13 13:29:21 - Frederica - ERROR - logger:107 - 参数验证失败: 无效的消息内容: 
2026-01-13 13:29:21 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=test_user_123, 客服账号=test_kf_456, 内容长度=6
2026-01-13 13:29:21 - Frederica - INFO - logger:99 - 企业微信Access Token刷新成功，有效期至: 2026-01-13 15:29:21.902461
2026-01-13 13:29:21 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'test_user_123', 'open_kfid': 'test_kf_456', 'msgtype': 'text', 'text': {'content': '测试消息内容'}}
2026-01-13 13:29:21 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 错误代码=81013, 错误信息=user & party & tag all invalid
2026-01-13 13:29:21 - Frederica - ERROR - logger:107 - 请求参数: external_userid=test_user_123, open_kfid=test_kf_456
2026-01-13 13:29:21 - Frederica - ERROR - logger:107 - 响应结果: {'errcode': 81013, 'errmsg': 'user & party & tag all invalid'}
2026-01-13 13:29:21 - Frederica - ERROR - logger:107 - 错误代码81013: 'user & party & tag all invalid'
2026-01-13 13:29:21 - Frederica - ERROR - logger:107 - 可能原因: 1) external_userid无效 2) 用户不在客服会话中 3) 客服账号配置错误
2026-01-13 13:29:21 - Frederica - ERROR - logger:107 - 建议: 检查用户是否已与客服建立有效会话，验证客服账号配置
2026-01-13 13:29:21 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 微信客服API错误 81013: user & party & tag all invalid
Traceback (most recent call last):
  File "C:\Users\PaleFlame\source\repos\ProjectFrederica\src\wechat_bot.py", line 373, in _send_kf_message
    raise Exception(f"微信客服API错误 {error_code}: {error_msg}")
Exception: 微信客服API错误 81013: user & party & tag all invalid
2026-01-13 13:29:21 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=test_user_123, 客服账号=test_kf_456, 内容长度=6
2026-01-13 13:29:21 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'test_user_123', 'open_kfid': 'test_kf_456', 'msgtype': 'text', 'text': {'content': '测试消息内容'}}
2026-01-13 13:29:21 - Frederica - ERROR - logger:107 - 网络请求失败: 连接失败
2026-01-13 13:29:21 - Frederica - ERROR - logger:107 - 请求URL: https://qyapi.weixin.qq.com/cgi-bin/kf/send_msg?access_token=NeRv-WvJWqk7bW-B1A46-SlaGMNbbUe2F3ULXSIIkxvkk8p5pPEL8Jdjl42TAFEky8y3jQkriDdYIF_ZaoS_R1Mc3Om9EpCle-DPJ1QdFbuDdeBk-_492tJmgdO69bQWA113Sicl3DiW7t3b_0_rCwXhrx5EqIWJBF_Dazh7CWPTgxm0p6Bjh9kCa4LhczmOpAfiRuuipXSWKobqrS5DuA
2026-01-13 13:29:21 - Frederica - INFO - logger:99 - 企业微信机器人初始化完成，应用ID: 1000002
2026-01-13 13:29:21 - Frederica - INFO - logger:99 - 回调配置: Token=FREDERICAT..., AESKey=norTzT7trW...
2026-01-13 13:30:13 - Frederica - INFO - logger:99 - 企业微信机器人初始化完成，应用ID: 1000002
2026-01-13 13:30:13 - Frederica - INFO - logger:99 - 回调配置: Token=FREDERICAT..., AESKey=norTzT7trW...
2026-01-13 13:30:13 - Frederica - ERROR - logger:107 - 无效的external_userid: 
2026-01-13 13:30:13 - Frederica - ERROR - logger:107 - 参数验证失败: 无效的external_userid: 
2026-01-13 13:30:48 - Frederica - INFO - logger:99 - 企业微信机器人初始化完成，应用ID: 1000002
2026-01-13 13:30:48 - Frederica - INFO - logger:99 - 回调配置: Token=FREDERICAT..., AESKey=norTzT7trW...
2026-01-13 13:30:48 - Frederica - INFO - logger:99 - 
    ========================================
        Frederica - 企业微信聊天机器人
    ========================================
    
    功能特性：
    1. 基于企业微信官方API
    2. 异步对话处理
    3. 长期记忆存储
    4. 智能上下文理解
    5. 自然语言交互
    
    使用说明：
    1. 确保已正确配置企业微信应用
    2. 启动回调服务器接收企业微信消息
    3. 在企业微信管理后台配置回调URL
    4. 支持文本消息的智能回复
    5. 按 Ctrl+C 停止服务器
    
    配置要求：
    1. DeepSeek API密钥
    2. 企业微信企业ID、应用Secret和应用ID
    3. 企业微信应用需要配置消息回调URL
    
    回调URL配置：
    1. 在企业微信管理后台配置回调URL
    2. URL格式: http://你的域名或IP:端口/callback
    3. Token: FREDERICATOKEN
    4. EncodingAESKey: norTzT7trWzPklIJEBILTG7UMzMXuibpzlAVaS4zag0
    5. 消息加解密方式: 安全模式
    
    注意：企业微信消息接收必须使用回调模式
          轮询模式已被废弃，不再支持
    
2026-01-13 13:30:48 - Frederica - INFO - logger:99 - 机器人初始化成功
2026-01-13 13:30:48 - Frederica - INFO - logger:99 - 启动机器人消息处理线程（非阻塞模式）...
2026-01-13 13:30:48 - Frederica - INFO - logger:99 - 启动企业微信聊天机器人...
2026-01-13 13:30:49 - Frederica - INFO - logger:99 - 企业微信Access Token刷新成功，有效期至: 2026-01-13 15:30:49.041210
2026-01-13 13:30:49 - Frederica - INFO - logger:99 - 企业微信连接测试成功
2026-01-13 13:30:49 - Frederica - INFO - logger:99 - 机器人已启动，等待回调消息...
2026-01-13 13:30:49 - Frederica - INFO - logger:99 - 机器人以非阻塞模式启动，线程已在后台运行
2026-01-13 13:30:49 - Frederica - INFO - logger:99 - 机器人消息处理线程已启动
2026-01-13 13:30:49 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:30:50 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:30:50 - Frederica - INFO - logger:99 - 
    ========================================
        企业微信回调服务器启动
    ========================================
    
    服务器配置：
    服务器类型: 双栈服务器 (IPv4 + IPv6)
    监听地址: :: (所有IPv6地址，同时支持IPv4)
    监听端口: 8080
    
    网络访问说明：
    允许所有网络接口访问（IPv4和IPv6）
    
    支持的协议：
    - IPv4: 是
    - IPv6: 是
    
    回调URL配置：
    IPv4访问URL: http://localhost:8080/callback
    IPv6访问URL: http://[::1]:8080/callback
    
    重要提示：
    1. 如果监听地址是 '::'，服务器同时支持IPv4和IPv6
    2. 如果监听地址是 '0.0.0.0'，只支持IPv4
    3. 如果监听地址是 '127.0.0.1' 或 'localhost'，只支持本机IPv4访问
    4. 如果监听地址是 '::1'，只支持本机IPv6访问
    5. 生产环境建议使用域名和HTTPS
    
    企业微信配置要求：
    1. 在企业微信管理后台配置回调URL
    2. 使用以下参数：
       - URL: http://tx6p.paleflame.top/callback (根据实际域名调整)
       - Token: FREDERICATOKEN
       - EncodingAESKey: norTzT7trWzPklIJEBILTG7UMzMXuibpzlAVaS4zag0
       - 消息加解密方式: 安全模式
    
    按 Ctrl+C 停止服务器
    
2026-01-13 13:30:50 - Frederica - INFO - logger:99 - 服务器正在启动，监听 :::8080...
2026-01-13 13:30:50 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:30:51 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:30:51 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:30:52 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:30:53 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:30:53 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:30:54 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:30:55 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:30:55 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:30:56 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:30:56 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:30:57 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:30:58 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:30:58 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:30:59 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:30:59 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:31:00 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:31:01 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:31:01 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:31:02 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:31:02 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:31:02 - Frederica - INFO - logger:99 - 收到POST请求: /callback?msg_signature=c5f29eaa343b0df6c88a0f4093c3496716d5aaee&timestamp=1768282260&nonce=1768734012
2026-01-13 13:31:02 - Frederica - INFO - logger:99 - 查询参数: {'msg_signature': 'c5f29eaa343b0df6c88a0f4093c3496716d5aaee', 'timestamp': '1768282260', 'nonce': '1768734012'}
2026-01-13 13:31:02 - Frederica - INFO - logger:99 - 请求体长度: 640
2026-01-13 13:31:02 - Frederica - DEBUG - logger:95 - 原始查询参数: {'msg_signature': ['c5f29eaa343b0df6c88a0f4093c3496716d5aaee'], 'timestamp': ['1768282260'], 'nonce': ['1768734012']}
2026-01-13 13:31:02 - Frederica - DEBUG - logger:95 - 解析后的URL: ParseResult(scheme='', netloc='', path='/callback', params='', query='msg_signature=c5f29eaa343b0df6c88a0f4093c3496716d5aaee&timestamp=1768282260&nonce=1768734012', fragment='')
2026-01-13 13:31:02 - Frederica - DEBUG - logger:95 - 请求头: {'x-forwarded-for': '183.47.117.101', 'Accept': '*/*', 'Content-Type': 'text/xml', 'User-Agent': 'Mozilla/4.0', 'Pragma': 'no-cache', 'cf-ray': '9bd281437ffe8239-AMS', 'Host': 'tx6p.paleflame.top:8080', 'Content-Length': '640', 'cdn-loop': 'cloudflare; loops=1', 'CF-Connecting-IP': '183.47.117.101', 'CF-IPCountry': 'CN', 'CF-Visitor': '{"scheme":"http"}', 'X-Forwarded-Proto': 'http', 'accept-encoding': 'gzip', 'Connection': 'Keep-Alive'}
2026-01-13 13:31:02 - Frederica - DEBUG - logger:95 - Content-Length: 640
2026-01-13 13:31:02 - Frederica - DEBUG - logger:95 - 参数 msg_signature: c5f29eaa343b0df6c88a0f4093c3496716d5aaee (长度: 40)
2026-01-13 13:31:02 - Frederica - DEBUG - logger:95 - 参数 timestamp: 1768282260 (长度: 10)
2026-01-13 13:31:02 - Frederica - DEBUG - logger:95 - 参数 nonce: 1768734012 (长度: 10)
2026-01-13 13:31:02 - Frederica - DEBUG - logger:95 - 请求体前500字符: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><Encrypt><![CDATA[ulzrZRuiMK0kf3kwcYIKVt+sT9mxcC8Ts34ruEwwK4j1G5HFq0hLMfwAZt2IeiDEg7T/LFZiGXawdeaTelT6WpPLe+OzHMTBg1KOWsAD3Tx6jxXkQ8PlSJNJlLO7+Qo73Aib5pDKkP/RbTNyBuWGZsH9H2Q1TG34bBwvwYhHkplojufh7fEZPNKtjl9QBkIq5skjP8QMSMYqhgnCulAaOv12+m7Lx7wFaRL7NZQ0hkrmlD2TZ+qiLzVgIngN7gUoqFDlSTij3t2Iz2yYy5XrJfHN9ZySMjVTPYpU+whtocbcvFPriiTkTvgMYw1P3h6fC9/hpxaxSFmaEc4zJKyHgFjuKhIulkAaqCMxNtbtPHZGIkp0ESRTvGHx5gP3DP7Uj7VRFXkVctfmXjig7vmfDOFvYecutVvHhboTk3
2026-01-13 13:31:02 - Frederica - DEBUG - logger:95 - 请求体MD5: 6395285691083883446
2026-01-13 13:31:02 - Frederica - DEBUG - logger:95 - 请求体是否包含XML: False
2026-01-13 13:31:02 - Frederica - DEBUG - logger:95 - 开始处理POST回调请求...
2026-01-13 13:31:02 - Frederica - INFO - logger:99 - 处理回调请求: 方法=POST, 参数={'msg_signature': 'c5f29eaa343b0df6c88a0f4093c3496716d5aaee', 'timestamp': '1768282260', 'nonce': '1768734012'}
2026-01-13 13:31:02 - Frederica - DEBUG - logger:95 - 请求方法: POST
2026-01-13 13:31:02 - Frederica - DEBUG - logger:95 - 完整查询参数: {'msg_signature': 'c5f29eaa343b0df6c88a0f4093c3496716d5aaee', 'timestamp': '1768282260', 'nonce': '1768734012'}
2026-01-13 13:31:02 - Frederica - DEBUG - logger:95 - 请求体长度: 640
2026-01-13 13:31:02 - Frederica - DEBUG - logger:95 - msg_signature: c5f29eaa343b0df6c88a... (长度: 40)
2026-01-13 13:31:02 - Frederica - DEBUG - logger:95 - timestamp: 1768282260
2026-01-13 13:31:02 - Frederica - DEBUG - logger:95 - nonce: 1768734012
2026-01-13 13:31:02 - Frederica - INFO - logger:99 - 处理POST消息请求，请求体长度: 640
2026-01-13 13:31:02 - Frederica - DEBUG - logger:95 - 解密后的XML: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><CreateTime>1768282260</CreateTime><MsgType><![CDATA[event]]></MsgType><Event><![CDATA[kf_msg_or_event]]></Event><Token><![CDATA[ENC8dKjgAZWWZBG9B9i1LCzV1JYSmr4hCxz7YCrb6jcn1ka]]></Token><OpenKfId><![CDATA[wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ]]></OpenKfId></xml>
2026-01-13 13:31:02 - Frederica - INFO - logger:99 - 直接解析XML: MsgType=event, Event=kf_msg_or_event
2026-01-13 13:31:02 - Frederica - INFO - logger:99 - wechatpy解析: 类型=unknown, 发送者=None
2026-01-13 13:31:02 - Frederica - INFO - logger:99 - 处理客服消息事件 (kf_msg_or_event)
2026-01-13 13:31:02 - Frederica - DEBUG - logger:95 - 提取到Token: ENC8dKjgAZWWZBG9B9i1...
2026-01-13 13:31:02 - Frederica - DEBUG - logger:95 - 提取到OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 13:31:02 - Frederica - INFO - logger:99 - 客服事件已接收，Token: ENC8dKjgAZWWZBG9B9i1..., OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 13:31:02 - Frederica - INFO - logger:99 - 开始拉取微信客服消息，open_kfid: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 13:31:02 - Frederica - INFO - logger:99 - 已启动消息拉取线程
2026-01-13 13:31:02 - Frederica - INFO - logger:99 - 2400:cb00:997:1000:cfa6:7bf5:c9e6:8f13 - "POST /callback?msg_signature=c5f29eaa343b0df6c88a0f4093c3496716d5aaee&timestamp=1768282260&nonce=1768734012 HTTP/1.1" 200 -
2026-01-13 13:31:02 - Frederica - INFO - logger:99 - POST请求处理完成，响应长度: 582
2026-01-13 13:31:02 - Frederica - DEBUG - logger:95 - 响应内容前500字符: <xml>
<Encrypt><![CDATA[ug8poEzDotb51h0RCxy696ZdvY5WCoWJldxItUJLE07iP4GFl2R8cO3eTOPXw2s6bKLSOSHcJbQQqytYDyRfcT5K51lhr50FybPI1kxHlXm3DZv1vrNH3tYXmIV0h7Uc3MhGHfmcUQYe8GU/duGMlSkclaMimDhnBbKn/GxZTZO212CrmfIRxFonffU9kYHsSjRunNBukeCVjQ8SspmKlT2xCHItkt/gTGM7t1yxs1Mf8zwyo0rrgKsZRlqaTpFdFkWZGg0bJeXREukfXBJt/ivTac/MP93T3+KmbL//MroBLMcW+Qwa6ZG+a0tJYCui4OqsMj95lyHBAx+cckxIJGwvt2c1/sYW4qGk6kF1U5sE6bU7NQsQRlZcPTKmxH38]]></Encrypt>
<MsgSignature><![CDATA[020a087eb2184f7e42c2909b96dbb7e7ed992d72]]></MsgSignatu
2026-01-13 13:31:02 - Frederica - DEBUG - logger:95 - 响应是否包含XML: False
2026-01-13 13:31:02 - Frederica - DEBUG - logger:95 - 响应状态: 200 OK
2026-01-13 13:31:02 - Frederica - DEBUG - logger:95 - 响应Content-Type: text/xml; charset=utf-8
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 拉取到 31 条客服消息
2026-01-13 13:31:03 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:31:03 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:31:03 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:31:03 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:31:03 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=你好！...
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 1
2026-01-13 13:31:03 - Frederica - DEBUG - logger:95 - 开始处理第 1 条消息: AZE49UZ9Jvnb7mvh1uLLiRiFVX
2026-01-13 13:31:03 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=Hi...
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 1
2026-01-13 13:31:03 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:31:03 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:31:03 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:31:03 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=Hello...
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 2
2026-01-13 13:31:03 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=你好！...
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 3
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=can you hear me...
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 4
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=testimg...
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 5
2026-01-13 13:31:03 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=说句话...
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 6
2026-01-13 13:31:03 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 7
2026-01-13 13:31:03 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 8
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=你好...
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 9
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=你好...
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 10
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 11
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 12
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 13
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=你好...
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 14
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 15
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 13:31:03 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 16
2026-01-13 13:31:05 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 13:31:05 - Frederica - DEBUG - logger:95 - 第 1 条消息处理完成
2026-01-13 13:31:05 - Frederica - DEBUG - logger:95 - 开始处理第 2 条消息: AvaxLgerVDpibUzqi4vFqphiYw
2026-01-13 13:31:05 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:31:06 - Frederica - ERROR - logger:107 - 发送企业微信消息失败: Error code: 81013, message: user & party & tag all invalid, hint: [1768282265555212606391402], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=81013
2026-01-13 13:31:07 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 13:31:07 - Frederica - DEBUG - logger:95 - 第 2 条消息处理完成
2026-01-13 13:31:07 - Frederica - DEBUG - logger:95 - 开始处理第 3 条消息: AvRKfRQXGPdy8Wg217mtGLBcVD
2026-01-13 13:31:07 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:31:07 - Frederica - ERROR - logger:107 - 发送企业微信消息失败: Error code: 81013, message: user & party & tag all invalid, hint: [1768282266617233863460175], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=81013
2026-01-13 13:31:10 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 13:31:10 - Frederica - DEBUG - logger:95 - 第 3 条消息处理完成
2026-01-13 13:31:10 - Frederica - DEBUG - logger:95 - 开始处理第 4 条消息: BHnFViLdNoqjSWzwbZRVFpBGkV
2026-01-13 13:31:10 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:31:10 - Frederica - ERROR - logger:107 - 发送企业微信消息失败: Error code: 81013, message: user & party & tag all invalid, hint: [1768282268611670411762516], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=81013
2026-01-13 13:31:11 - Frederica - INFO - logger:99 - LLM决定对用户 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 保持沉默
2026-01-13 13:31:11 - Frederica - DEBUG - logger:95 - 第 4 条消息处理完成
2026-01-13 13:31:11 - Frederica - DEBUG - logger:95 - 开始处理第 5 条消息: BHwqRoNn3J5eXpSkYjxoTANMnP
2026-01-13 13:31:11 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:31:13 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 13:31:13 - Frederica - DEBUG - logger:95 - 第 5 条消息处理完成
2026-01-13 13:31:13 - Frederica - DEBUG - logger:95 - 开始处理第 6 条消息: BHuQpQV8QxyE1c55uApP6JYaoZ
2026-01-13 13:31:13 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:31:13 - Frederica - ERROR - logger:107 - 发送企业微信消息失败: Error code: 81013, message: user & party & tag all invalid, hint: [1768282272016362498563631], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=81013
2026-01-13 13:31:15 - Frederica - INFO - logger:99 - 
收到停止信号，正在关闭服务器...
2026-01-13 13:31:15 - Frederica - INFO - logger:99 - 停止机器人消息处理线程...
2026-01-13 13:31:15 - Frederica - INFO - logger:99 - 停止企业微信聊天机器人...
2026-01-13 13:31:16 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 13:31:16 - Frederica - DEBUG - logger:95 - 第 6 条消息处理完成
2026-01-13 13:31:16 - Frederica - INFO - logger:99 - 机器人已停止
2026-01-13 13:31:16 - Frederica - INFO - logger:99 - 服务器已关闭
2026-01-13 13:38:35 - Frederica - INFO - logger:99 - 企业微信机器人初始化完成，应用ID: 1000002
2026-01-13 13:38:35 - Frederica - INFO - logger:99 - 回调配置: Token=FREDERICAT..., AESKey=norTzT7trW...
2026-01-13 13:38:55 - Frederica - INFO - logger:99 - 企业微信机器人初始化完成，应用ID: 1000002
2026-01-13 13:38:55 - Frederica - INFO - logger:99 - 回调配置: Token=FREDERICAT..., AESKey=norTzT7trW...
2026-01-13 13:38:55 - Frederica - INFO - logger:99 - 
    ========================================
        Frederica - 企业微信聊天机器人
    ========================================
    
    功能特性：
    1. 基于企业微信官方API
    2. 异步对话处理
    3. 长期记忆存储
    4. 智能上下文理解
    5. 自然语言交互
    
    使用说明：
    1. 确保已正确配置企业微信应用
    2. 启动回调服务器接收企业微信消息
    3. 在企业微信管理后台配置回调URL
    4. 支持文本消息的智能回复
    5. 按 Ctrl+C 停止服务器
    
    配置要求：
    1. DeepSeek API密钥
    2. 企业微信企业ID、应用Secret和应用ID
    3. 企业微信应用需要配置消息回调URL
    
    回调URL配置：
    1. 在企业微信管理后台配置回调URL
    2. URL格式: http://你的域名或IP:端口/callback
    3. Token: FREDERICATOKEN
    4. EncodingAESKey: norTzT7trWzPklIJEBILTG7UMzMXuibpzlAVaS4zag0
    5. 消息加解密方式: 安全模式
    
    注意：企业微信消息接收必须使用回调模式
          轮询模式已被废弃，不再支持
    
2026-01-13 13:38:55 - Frederica - INFO - logger:99 - 机器人初始化成功
2026-01-13 13:38:55 - Frederica - INFO - logger:99 - 启动机器人消息处理线程（非阻塞模式）...
2026-01-13 13:38:55 - Frederica - INFO - logger:99 - 启动企业微信聊天机器人...
2026-01-13 13:38:55 - Frederica - INFO - logger:99 - 企业微信Access Token刷新成功，有效期至: 2026-01-13 15:38:55.406978
2026-01-13 13:38:55 - Frederica - INFO - logger:99 - 企业微信连接测试成功
2026-01-13 13:38:55 - Frederica - INFO - logger:99 - 机器人已启动，等待回调消息...
2026-01-13 13:38:55 - Frederica - INFO - logger:99 - 机器人以非阻塞模式启动，线程已在后台运行
2026-01-13 13:38:55 - Frederica - INFO - logger:99 - 机器人消息处理线程已启动
2026-01-13 13:38:55 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:38:56 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:38:56 - Frederica - INFO - logger:99 - 
    ========================================
        企业微信回调服务器启动
    ========================================
    
    服务器配置：
    服务器类型: 双栈服务器 (IPv4 + IPv6)
    监听地址: :: (所有IPv6地址，同时支持IPv4)
    监听端口: 8080
    
    网络访问说明：
    允许所有网络接口访问（IPv4和IPv6）
    
    支持的协议：
    - IPv4: 是
    - IPv6: 是
    
    回调URL配置：
    IPv4访问URL: http://localhost:8080/callback
    IPv6访问URL: http://[::1]:8080/callback
    
    重要提示：
    1. 如果监听地址是 '::'，服务器同时支持IPv4和IPv6
    2. 如果监听地址是 '0.0.0.0'，只支持IPv4
    3. 如果监听地址是 '127.0.0.1' 或 'localhost'，只支持本机IPv4访问
    4. 如果监听地址是 '::1'，只支持本机IPv6访问
    5. 生产环境建议使用域名和HTTPS
    
    企业微信配置要求：
    1. 在企业微信管理后台配置回调URL
    2. 使用以下参数：
       - URL: http://tx6p.paleflame.top/callback (根据实际域名调整)
       - Token: FREDERICATOKEN
       - EncodingAESKey: norTzT7trWzPklIJEBILTG7UMzMXuibpzlAVaS4zag0
       - 消息加解密方式: 安全模式
    
    按 Ctrl+C 停止服务器
    
2026-01-13 13:38:56 - Frederica - INFO - logger:99 - 服务器正在启动，监听 :::8080...
2026-01-13 13:38:57 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:38:57 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:38:58 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:38:58 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:38:59 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:39:00 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:39:00 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 收到POST请求: /callback?msg_signature=1c4313786ea1dd5a7dbe03863b4863707dfdabfd&timestamp=1768282738&nonce=1768923620
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 查询参数: {'msg_signature': '1c4313786ea1dd5a7dbe03863b4863707dfdabfd', 'timestamp': '1768282738', 'nonce': '1768923620'}
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 请求体长度: 640
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 原始查询参数: {'msg_signature': ['1c4313786ea1dd5a7dbe03863b4863707dfdabfd'], 'timestamp': ['1768282738'], 'nonce': ['1768923620']}
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 解析后的URL: ParseResult(scheme='', netloc='', path='/callback', params='', query='msg_signature=1c4313786ea1dd5a7dbe03863b4863707dfdabfd&timestamp=1768282738&nonce=1768923620', fragment='')
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 请求头: {'x-forwarded-for': '183.47.98.168', 'Accept': '*/*', 'Content-Type': 'text/xml', 'User-Agent': 'Mozilla/4.0', 'Pragma': 'no-cache', 'cf-ray': '9bd28cef7b5c4464-AMS', 'Host': 'tx6p.paleflame.top:8080', 'Content-Length': '640', 'cdn-loop': 'cloudflare; loops=1', 'CF-Connecting-IP': '183.47.98.168', 'CF-IPCountry': 'CN', 'CF-Visitor': '{"scheme":"http"}', 'X-Forwarded-Proto': 'http', 'accept-encoding': 'gzip', 'Connection': 'Keep-Alive'}
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - Content-Length: 640
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 参数 msg_signature: 1c4313786ea1dd5a7dbe03863b4863707dfdabfd (长度: 40)
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 参数 timestamp: 1768282738 (长度: 10)
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 参数 nonce: 1768923620 (长度: 10)
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 请求体前500字符: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><Encrypt><![CDATA[SyFHJOaF6kbPvUCXdCt37B1u/6oU9oOpdEz81njNNvqEDOdz47CDpHXaGrIZHfmgy9wbW4sGR70t1PVqtnXgJcsML2ey4rzaH0d771r9O+DdFIq1qpuo5hkm44q1GEhCLYdTHhdegzLug66teiCsUx1aTsCiNw5e+l+0nINJ3p7Lsx4axoZJ1jB9hxF9DpzeiySfn/z+5ede5ABTOxybHQizPqDhsgSULHnY2NNcwIdBFxnprDWBUO8sNxBGTwVWMW8HFaaHbLXINu9ypX+3spgZEVEmMNtILYvVf7FeYkT4OQpwuLLy1QIi6xOw69hnrK1ED8j+ZEiw7AKPTU9GT5UQ3+XW1IPUeI6LARD0zX3gb0P6cVYXLG1kNuudUGt4XC2mWqYEBcwNbB1wWz09hPwy+4060oRjTCSgMm
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 请求体MD5: -5881517491484605515
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 请求体是否包含XML: False
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 开始处理POST回调请求...
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 处理回调请求: 方法=POST, 参数={'msg_signature': '1c4313786ea1dd5a7dbe03863b4863707dfdabfd', 'timestamp': '1768282738', 'nonce': '1768923620'}
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 请求方法: POST
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 完整查询参数: {'msg_signature': '1c4313786ea1dd5a7dbe03863b4863707dfdabfd', 'timestamp': '1768282738', 'nonce': '1768923620'}
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 请求体长度: 640
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - msg_signature: 1c4313786ea1dd5a7dbe... (长度: 40)
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - timestamp: 1768282738
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - nonce: 1768923620
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 处理POST消息请求，请求体长度: 640
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 解密后的XML: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><CreateTime>1768282738</CreateTime><MsgType><![CDATA[event]]></MsgType><Event><![CDATA[kf_msg_or_event]]></Event><Token><![CDATA[ENC9wCuzxDBHdzKzwtHYqMUV1vmHXxn22fFR3JNHx8qniz4]]></Token><OpenKfId><![CDATA[wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ]]></OpenKfId></xml>
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 直接解析XML: MsgType=event, Event=kf_msg_or_event
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - wechatpy解析: 类型=unknown, 发送者=None
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 处理客服消息事件 (kf_msg_or_event)
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 提取到Token: ENC9wCuzxDBHdzKzwtHY...
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 提取到OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 客服事件已接收，Token: ENC9wCuzxDBHdzKzwtHY..., OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 开始拉取微信客服消息，open_kfid: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 已启动消息拉取线程
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 2400:cb00:994:1000:7e1d:8d94:cccd:a70c - "POST /callback?msg_signature=1c4313786ea1dd5a7dbe03863b4863707dfdabfd&timestamp=1768282738&nonce=1768923620 HTTP/1.1" 200 -
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - POST请求处理完成，响应长度: 582
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 响应内容前500字符: <xml>
<Encrypt><![CDATA[BAPuHQ+eLC2JAZ93QVq3V0fw9gpTRZhze4Nq1DEE2XN8mZOhD+IQCUqOFDjuTXNTOmf1L5fhcCx7kn9FedYgADBjzQyOZEvc2cvoLjRU3BbzQWEFlPINgqN3GtgYXC75Rjy00u7Yd+RTGLgLNv9bgctfCoXYTpmCOftQKQTos1DozXCpB/D/oaTPRBSlEPJoBxvbR0DJNmtwBsylnKBvKQlnUtBODsqobRqvlPihIuhmdMMUWGMOQZ4jCpEl7O6TupAAoIrLFqW3B/CYOBZNvDG4X23m7P09sMCmbh7ja+ZI7Gy01pZGZXZg9KX2wEghEnc+n1m6cK7LGoLAb8QhkLBIPnsYiWphufU27Sgui1DBGOY6Ld1yX4VLR3B/GdAo]]></Encrypt>
<MsgSignature><![CDATA[65b4ee34823bafa7b006ccfae56eb1bcf5f8c369]]></MsgSignatu
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 响应是否包含XML: False
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 响应状态: 200 OK
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 响应Content-Type: text/xml; charset=utf-8
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 拉取到 32 条客服消息
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=你好！...
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 1
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 开始处理第 1 条消息: AZE49UZ9Jvnb7mvh1uLLiRiFVX
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=Hi...
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 1
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=Hello...
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 2
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=你好！...
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 3
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=can you hear me...
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 4
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=testimg...
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 5
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=说句话...
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 6
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 7
2026-01-13 13:39:01 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 8
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=你好...
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 9
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=你好...
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 10
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 11
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 12
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 13
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=你好...
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 14
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 15
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 16
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 13:39:01 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 17
2026-01-13 13:39:03 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 13:39:03 - Frederica - DEBUG - logger:95 - 第 1 条消息处理完成
2026-01-13 13:39:03 - Frederica - DEBUG - logger:95 - 开始处理第 2 条消息: AvaxLgerVDpibUzqi4vFqphiYw
2026-01-13 13:39:03 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:39:04 - Frederica - ERROR - logger:107 - 发送企业微信消息失败: Error code: 81013, message: user & party & tag all invalid, hint: [1768282742448151406252700], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=81013
2026-01-13 13:39:05 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 13:39:05 - Frederica - DEBUG - logger:95 - 第 2 条消息处理完成
2026-01-13 13:39:05 - Frederica - DEBUG - logger:95 - 开始处理第 3 条消息: AvRKfRQXGPdy8Wg217mtGLBcVD
2026-01-13 13:39:05 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:39:05 - Frederica - ERROR - logger:107 - 发送企业微信消息失败: Error code: 81013, message: user & party & tag all invalid, hint: [1768282744196731784923079], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=81013
2026-01-13 13:39:07 - Frederica - INFO - logger:99 - 
收到停止信号，正在关闭服务器...
2026-01-13 13:39:07 - Frederica - INFO - logger:99 - 停止机器人消息处理线程...
2026-01-13 13:39:07 - Frederica - INFO - logger:99 - 停止企业微信聊天机器人...
2026-01-13 13:39:07 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 13:39:07 - Frederica - DEBUG - logger:95 - 第 3 条消息处理完成
2026-01-13 13:39:07 - Frederica - INFO - logger:99 - 机器人已停止
2026-01-13 13:39:07 - Frederica - INFO - logger:99 - 服务器已关闭
2026-01-13 13:44:04 - Frederica - INFO - logger:99 - 企业微信机器人初始化完成，应用ID: 1000002
2026-01-13 13:44:04 - Frederica - INFO - logger:99 - 回调配置: Token=FREDERICAT..., AESKey=norTzT7trW...
2026-01-13 13:44:04 - Frederica - INFO - logger:99 - 为 外部用户2 生成响应...
2026-01-13 13:44:04 - Frederica - INFO - logger:99 - 为 外部用户2 生成响应完成
2026-01-13 13:45:10 - Frederica - INFO - logger:99 - 企业微信机器人初始化完成，应用ID: 1000002
2026-01-13 13:45:10 - Frederica - INFO - logger:99 - 回调配置: Token=FREDERICAT..., AESKey=norTzT7trW...
2026-01-13 13:45:10 - Frederica - INFO - logger:99 - 为 外部用户2 生成响应...
2026-01-13 13:45:10 - Frederica - INFO - logger:99 - 为 外部用户2 生成响应完成
2026-01-13 13:45:10 - Frederica - INFO - logger:99 - 为 普通用户 生成响应...
2026-01-13 13:45:10 - Frederica - INFO - logger:99 - 为 普通用户 生成响应完成
2026-01-13 13:45:54 - Frederica - INFO - logger:99 - 企业微信机器人初始化完成，应用ID: 1000002
2026-01-13 13:45:54 - Frederica - INFO - logger:99 - 回调配置: Token=FREDERICAT..., AESKey=norTzT7trW...
2026-01-13 13:45:54 - Frederica - INFO - logger:99 - 
    ========================================
        Frederica - 企业微信聊天机器人
    ========================================
    
    功能特性：
    1. 基于企业微信官方API
    2. 异步对话处理
    3. 长期记忆存储
    4. 智能上下文理解
    5. 自然语言交互
    
    使用说明：
    1. 确保已正确配置企业微信应用
    2. 启动回调服务器接收企业微信消息
    3. 在企业微信管理后台配置回调URL
    4. 支持文本消息的智能回复
    5. 按 Ctrl+C 停止服务器
    
    配置要求：
    1. DeepSeek API密钥
    2. 企业微信企业ID、应用Secret和应用ID
    3. 企业微信应用需要配置消息回调URL
    
    回调URL配置：
    1. 在企业微信管理后台配置回调URL
    2. URL格式: http://你的域名或IP:端口/callback
    3. Token: FREDERICATOKEN
    4. EncodingAESKey: norTzT7trWzPklIJEBILTG7UMzMXuibpzlAVaS4zag0
    5. 消息加解密方式: 安全模式
    
    注意：企业微信消息接收必须使用回调模式
          轮询模式已被废弃，不再支持
    
2026-01-13 13:45:54 - Frederica - INFO - logger:99 - 机器人初始化成功
2026-01-13 13:45:54 - Frederica - INFO - logger:99 - 启动机器人消息处理线程（非阻塞模式）...
2026-01-13 13:45:54 - Frederica - INFO - logger:99 - 启动企业微信聊天机器人...
2026-01-13 13:45:55 - Frederica - INFO - logger:99 - 企业微信Access Token刷新成功，有效期至: 2026-01-13 15:45:55.118758
2026-01-13 13:45:55 - Frederica - INFO - logger:99 - 企业微信连接测试成功
2026-01-13 13:45:55 - Frederica - INFO - logger:99 - 机器人已启动，等待回调消息...
2026-01-13 13:45:55 - Frederica - INFO - logger:99 - 机器人以非阻塞模式启动，线程已在后台运行
2026-01-13 13:45:55 - Frederica - INFO - logger:99 - 机器人消息处理线程已启动
2026-01-13 13:45:55 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:45:56 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:45:56 - Frederica - INFO - logger:99 - 
    ========================================
        企业微信回调服务器启动
    ========================================
    
    服务器配置：
    服务器类型: 双栈服务器 (IPv4 + IPv6)
    监听地址: :: (所有IPv6地址，同时支持IPv4)
    监听端口: 8080
    
    网络访问说明：
    允许所有网络接口访问（IPv4和IPv6）
    
    支持的协议：
    - IPv4: 是
    - IPv6: 是
    
    回调URL配置：
    IPv4访问URL: http://localhost:8080/callback
    IPv6访问URL: http://[::1]:8080/callback
    
    重要提示：
    1. 如果监听地址是 '::'，服务器同时支持IPv4和IPv6
    2. 如果监听地址是 '0.0.0.0'，只支持IPv4
    3. 如果监听地址是 '127.0.0.1' 或 'localhost'，只支持本机IPv4访问
    4. 如果监听地址是 '::1'，只支持本机IPv6访问
    5. 生产环境建议使用域名和HTTPS
    
    企业微信配置要求：
    1. 在企业微信管理后台配置回调URL
    2. 使用以下参数：
       - URL: http://tx6p.paleflame.top/callback (根据实际域名调整)
       - Token: FREDERICATOKEN
       - EncodingAESKey: norTzT7trWzPklIJEBILTG7UMzMXuibpzlAVaS4zag0
       - 消息加解密方式: 安全模式
    
    按 Ctrl+C 停止服务器
    
2026-01-13 13:45:56 - Frederica - INFO - logger:99 - 服务器正在启动，监听 :::8080...
2026-01-13 13:45:56 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:45:57 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:45:58 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:45:58 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:45:59 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:45:59 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:46:00 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:46:01 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:46:01 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:46:02 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:46:02 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:46:03 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:46:04 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:46:04 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:46:05 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:46:05 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 收到POST请求: /callback?msg_signature=6e6edb54ec1550d87470db4943748a36d5b3a2c0&timestamp=1768283164&nonce=1768222299
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 查询参数: {'msg_signature': '6e6edb54ec1550d87470db4943748a36d5b3a2c0', 'timestamp': '1768283164', 'nonce': '1768222299'}
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 请求体长度: 640
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 原始查询参数: {'msg_signature': ['6e6edb54ec1550d87470db4943748a36d5b3a2c0'], 'timestamp': ['1768283164'], 'nonce': ['1768222299']}
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 解析后的URL: ParseResult(scheme='', netloc='', path='/callback', params='', query='msg_signature=6e6edb54ec1550d87470db4943748a36d5b3a2c0&timestamp=1768283164&nonce=1768222299', fragment='')
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 请求头: {'x-forwarded-for': '183.47.98.168', 'Accept': '*/*', 'Content-Type': 'text/xml', 'User-Agent': 'Mozilla/4.0', 'Pragma': 'no-cache', 'cf-ray': '9bd29751c8e9bc8a-AMS', 'Host': 'tx6p.paleflame.top:8080', 'Content-Length': '640', 'cdn-loop': 'cloudflare; loops=1', 'CF-Connecting-IP': '183.47.98.168', 'CF-IPCountry': 'CN', 'CF-Visitor': '{"scheme":"http"}', 'X-Forwarded-Proto': 'http', 'accept-encoding': 'gzip', 'Connection': 'Keep-Alive'}
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - Content-Length: 640
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 参数 msg_signature: 6e6edb54ec1550d87470db4943748a36d5b3a2c0 (长度: 40)
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 参数 timestamp: 1768283164 (长度: 10)
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 参数 nonce: 1768222299 (长度: 10)
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 请求体前500字符: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><Encrypt><![CDATA[d4omNUG5NbueIseYs49tlSXtz3ppG9K9yPlpnMSY13/tMBcbOPaVRFmtdyCko7reBeHXImKfLquEEVWq57i5c2pAkLMgVFYq5BBtsy6qRGVwxWrE1VyFnxb+XbnMHPGTE2WoFmu+b9wP+9zMsRPqCngk7+xeLS9B8RP8tT5hzetDUaBwUjn5HbcqDO5/Ap8fxrFHEuEdLXruAr7h2BjHYJ7RDfRZIW7/uQVn3ywmOGXB13ZygREgFFMiVajI9KwRzpZtCxENK8o/jHoB/uVDVRxZbEhN4lHH/8nzvoPnVb0yfYO0hXTf6fB9gNzyXZZJQ93lVQiIk7+JqDCO40GORF6ID1Xejqn70w3hH5LB16yqT3K0stQ2dS9e8m4US6uwi4jm2pIk3quKC1xS0zB74jwvQAfhBl9Kmf79qi
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 请求体MD5: 2109391695749911726
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 请求体是否包含XML: False
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 开始处理POST回调请求...
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 处理回调请求: 方法=POST, 参数={'msg_signature': '6e6edb54ec1550d87470db4943748a36d5b3a2c0', 'timestamp': '1768283164', 'nonce': '1768222299'}
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 请求方法: POST
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 完整查询参数: {'msg_signature': '6e6edb54ec1550d87470db4943748a36d5b3a2c0', 'timestamp': '1768283164', 'nonce': '1768222299'}
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 请求体长度: 640
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - msg_signature: 6e6edb54ec1550d87470... (长度: 40)
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - timestamp: 1768283164
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - nonce: 1768222299
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 处理POST消息请求，请求体长度: 640
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 解密后的XML: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><CreateTime>1768283164</CreateTime><MsgType><![CDATA[event]]></MsgType><Event><![CDATA[kf_msg_or_event]]></Event><Token><![CDATA[ENC69r4eQj1yaVY2DWBUYjfwNdfBWDiyuefr2dSHggwi9vB]]></Token><OpenKfId><![CDATA[wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ]]></OpenKfId></xml>
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 直接解析XML: MsgType=event, Event=kf_msg_or_event
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - wechatpy解析: 类型=unknown, 发送者=None
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 处理客服消息事件 (kf_msg_or_event)
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 提取到Token: ENC69r4eQj1yaVY2DWBU...
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 提取到OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 客服事件已接收，Token: ENC69r4eQj1yaVY2DWBU..., OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 开始拉取微信客服消息，open_kfid: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 已启动消息拉取线程
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 2400:cb00:520:1000:4790:33de:f07d:99c8 - "POST /callback?msg_signature=6e6edb54ec1550d87470db4943748a36d5b3a2c0&timestamp=1768283164&nonce=1768222299 HTTP/1.1" 200 -
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - POST请求处理完成，响应长度: 582
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 响应内容前500字符: <xml>
<Encrypt><![CDATA[CUDn+5hCSeIJ2/YnspmTs/o/nh8EJnlFRrmugu2MOpGgUoo7CsIT9nRM72zA7XtvMVLQPr5lzbxMImasu+HEs7J4mUVkiiSf5TL/ySW/hF+XYQANnDJcbidjdbWl9771xActKxbuB/+n7ok+WTZemCzhdlQ2RH7WcB0dsRI5wk5nzYEsSBvzJXPSoOxRl3Z/WFUIKDOnjtC+SuR3uS8/aOOu1IMsmb+KOzb8lAZ6sQNiVeguxZgQQDDWE30FDtCzYGbY4IV11Qr76aeav669/aVdYKPBUwxUiI3qOyPQEO26BsViJcollBdYHQAOboeeH1hfRBfJc+qMCECLLpIW0dxxjR0mh06+FPXqOZpCOPvrpw8BNtdzaCFaWIwkCbAC]]></Encrypt>
<MsgSignature><![CDATA[8510416fcf08542a2eef0cab1ef49bdaa29904f0]]></MsgSignatu
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 响应是否包含XML: False
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 响应状态: 200 OK
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 响应Content-Type: text/xml; charset=utf-8
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 拉取到 33 条客服消息
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=你好！...
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 1
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 开始处理第 1 条消息: AZE49UZ9Jvnb7mvh1uLLiRiFVX
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=Hi...
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 1
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=Hello...
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 2
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=你好！...
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 3
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=can you hear me...
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 4
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=testimg...
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 5
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=说句话...
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 6
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 7
2026-01-13 13:46:06 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 8
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=你好...
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 9
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=你好...
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 10
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 11
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 12
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 13
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=你好...
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 14
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 15
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 16
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 17
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 13:46:06 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 18
2026-01-13 13:46:08 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=34
2026-01-13 13:46:08 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '你好！今天已经是第五次打招呼了呢～是不是有什么特别想分享的事情呀？😊'}}
2026-01-13 13:46:08 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 13:46:08 - Frederica - DEBUG - logger:95 - 第 1 条消息处理完成
2026-01-13 13:46:08 - Frederica - DEBUG - logger:95 - 开始处理第 2 条消息: AvaxLgerVDpibUzqi4vFqphiYw
2026-01-13 13:46:08 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:46:09 - Frederica - INFO - logger:99 - 已成功发送微信客服消息给 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ: 你好！今天已经是第五次打招呼了呢～是不是有什么特别想分享的事情呀？😊...
2026-01-13 13:46:09 - Frederica - DEBUG - logger:95 - API响应: {'errcode': 0, 'errmsg': 'ok', 'msgid': '94812196d3f3aae81bc38bfdf949d509'}
2026-01-13 13:46:10 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=47
2026-01-13 13:46:10 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '哈哈，看来你真的很享受这种语言切换的乐趣呢！我随时准备好陪你聊天哦～今天有什么特别想聊的吗？✨'}}
2026-01-13 13:46:10 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 13:46:10 - Frederica - DEBUG - logger:95 - 第 2 条消息处理完成
2026-01-13 13:46:10 - Frederica - DEBUG - logger:95 - 开始处理第 3 条消息: AvRKfRQXGPdy8Wg217mtGLBcVD
2026-01-13 13:46:10 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:46:11 - Frederica - INFO - logger:99 - 已成功发送微信客服消息给 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ: 哈哈，看来你真的很享受这种语言切换的乐趣呢！我随时准备好陪你聊天哦～今天有什么特别想聊的吗？✨...
2026-01-13 13:46:11 - Frederica - DEBUG - logger:95 - API响应: {'errcode': 0, 'errmsg': 'ok', 'msgid': '1513a8cc025a46118aade23521ca482b'}
2026-01-13 13:46:12 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=52
2026-01-13 13:46:12 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '哇，这次是纯英文的Hello！看来你很喜欢用不同方式打招呼呢～有什么我可以帮你的吗？还是想随便聊聊天？😄'}}
2026-01-13 13:46:12 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 13:46:12 - Frederica - DEBUG - logger:95 - 第 3 条消息处理完成
2026-01-13 13:46:12 - Frederica - DEBUG - logger:95 - 开始处理第 4 条消息: BHnFViLdNoqjSWzwbZRVFpBGkV
2026-01-13 13:46:12 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:46:13 - Frederica - INFO - logger:99 - 已成功发送微信客服消息给 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ: 哇，这次是纯英文的Hello！看来你很喜欢用不同方式打招呼呢～有什么我可以帮你的吗？还是想随便聊聊天...
2026-01-13 13:46:13 - Frederica - DEBUG - logger:95 - API响应: {'errcode': 0, 'errmsg': 'ok', 'msgid': '231b16f06e4f12bbbb249d0f0c260424'}
2026-01-13 13:46:14 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 13:46:14 - Frederica - DEBUG - logger:95 - 第 4 条消息处理完成
2026-01-13 13:46:14 - Frederica - DEBUG - logger:95 - 开始处理第 5 条消息: BHwqRoNn3J5eXpSkYjxoTANMnP
2026-01-13 13:46:14 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:46:14 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=34
2026-01-13 13:46:14 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '你好！今天已经是第六次打招呼了呢～是不是有什么特别想分享的事情呀？😊'}}
2026-01-13 13:46:14 - Frederica - INFO - logger:99 - 已成功发送微信客服消息给 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ: 你好！今天已经是第六次打招呼了呢～是不是有什么特别想分享的事情呀？😊...
2026-01-13 13:46:14 - Frederica - DEBUG - logger:95 - API响应: {'errcode': 0, 'errmsg': 'ok', 'msgid': 'e2c3f40302054eb171379b237f8c7be2'}
2026-01-13 13:46:16 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=61
2026-01-13 13:46:16 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '当然能听到呀！而且我发现你好像特别喜欢中英文切换着来呢～这种聊天方式挺有趣的！今天是想练习语言，还是单纯想找人聊聊天呀？😄'}}
2026-01-13 13:46:16 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 13:46:16 - Frederica - DEBUG - logger:95 - 第 5 条消息处理完成
2026-01-13 13:46:16 - Frederica - DEBUG - logger:95 - 开始处理第 6 条消息: BHuQpQV8QxyE1c55uApP6JYaoZ
2026-01-13 13:46:16 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:46:16 - Frederica - INFO - logger:99 - 已成功发送微信客服消息给 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ: 当然能听到呀！而且我发现你好像特别喜欢中英文切换着来呢～这种聊天方式挺有趣的！今天是想练习语言，还是...
2026-01-13 13:46:16 - Frederica - DEBUG - logger:95 - API响应: {'errcode': 0, 'errmsg': 'ok', 'msgid': '25dcce9632aaa453762057222503cfac'}
2026-01-13 13:46:18 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=63
2026-01-13 13:46:18 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '哈哈，我猜你是想打"testing"对吧？测试成功！我这边一切正常，随时可以陪你聊天哦～有什么想测试的功能或者想聊的话题吗？✨'}}
2026-01-13 13:46:18 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 13:46:18 - Frederica - DEBUG - logger:95 - 第 6 条消息处理完成
2026-01-13 13:46:18 - Frederica - DEBUG - logger:95 - 开始处理第 7 条消息: BHcdwARA5riEnAZLBnL6btZRMY
2026-01-13 13:46:18 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:46:19 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 错误代码=45009, 错误信息=api freq out of limit, hint: [1768283177197392759049555], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:46:19 - Frederica - ERROR - logger:107 - 请求参数: external_userid=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, open_kfid=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 13:46:19 - Frederica - ERROR - logger:107 - 响应结果: {'errcode': 45009, 'errmsg': 'api freq out of limit, hint: [1768283177197392759049555], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009'}
2026-01-13 13:46:19 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 微信客服API错误 45009: api freq out of limit, hint: [1768283177197392759049555], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
Traceback (most recent call last):
  File "C:\Users\PaleFlame\source\repos\ProjectFrederica\src\wechat_bot.py", line 381, in _send_kf_message
    raise Exception(f"微信客服API错误 {error_code}: {error_msg}")
Exception: 微信客服API错误 45009: api freq out of limit, hint: [1768283177197392759049555], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:46:19 - Frederica - ERROR - logger:107 - 发送消息失败: 微信客服API错误 45009: api freq out of limit, hint: [1768283177197392759049555], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:46:21 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=61
2026-01-13 13:46:21 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '哇，这已经是第七次让我“说句话”啦！看来你真的很喜欢这个开场方式呢～今天想聊点轻松的话题，还是有什么特别的事情想分享呀？😊'}}
2026-01-13 13:46:21 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 13:46:21 - Frederica - DEBUG - logger:95 - 第 7 条消息处理完成
2026-01-13 13:46:21 - Frederica - DEBUG - logger:95 - 开始处理第 8 条消息: AvTmP2e1LwqNmJt3x9uqg5NuXu
2026-01-13 13:46:21 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:46:21 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 错误代码=45009, 错误信息=api freq out of limit, hint: [1768283180404103063719938], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:46:21 - Frederica - ERROR - logger:107 - 请求参数: external_userid=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, open_kfid=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 13:46:21 - Frederica - ERROR - logger:107 - 响应结果: {'errcode': 45009, 'errmsg': 'api freq out of limit, hint: [1768283180404103063719938], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009'}
2026-01-13 13:46:21 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 微信客服API错误 45009: api freq out of limit, hint: [1768283180404103063719938], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
Traceback (most recent call last):
  File "C:\Users\PaleFlame\source\repos\ProjectFrederica\src\wechat_bot.py", line 381, in _send_kf_message
    raise Exception(f"微信客服API错误 {error_code}: {error_msg}")
Exception: 微信客服API错误 45009: api freq out of limit, hint: [1768283180404103063719938], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:46:21 - Frederica - ERROR - logger:107 - 发送消息失败: 微信客服API错误 45009: api freq out of limit, hint: [1768283180404103063719938], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:46:23 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=48
2026-01-13 13:46:23 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '哈哈，第八次打招呼啦！你是在测试我的耐心，还是真的想聊天呢？我随时都在这里哦～今天过得怎么样？😄'}}
2026-01-13 13:46:23 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 13:46:23 - Frederica - DEBUG - logger:95 - 第 8 条消息处理完成
2026-01-13 13:46:23 - Frederica - DEBUG - logger:95 - 开始处理第 9 条消息: ACH9xzm85RncqLiV7wtds9zEKd
2026-01-13 13:46:23 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:46:24 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 错误代码=45009, 错误信息=api freq out of limit, hint: [1768283182401541901850268], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:46:24 - Frederica - ERROR - logger:107 - 请求参数: external_userid=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, open_kfid=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 13:46:24 - Frederica - ERROR - logger:107 - 响应结果: {'errcode': 45009, 'errmsg': 'api freq out of limit, hint: [1768283182401541901850268], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009'}
2026-01-13 13:46:24 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 微信客服API错误 45009: api freq out of limit, hint: [1768283182401541901850268], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
Traceback (most recent call last):
  File "C:\Users\PaleFlame\source\repos\ProjectFrederica\src\wechat_bot.py", line 381, in _send_kf_message
    raise Exception(f"微信客服API错误 {error_code}: {error_msg}")
Exception: 微信客服API错误 45009: api freq out of limit, hint: [1768283182401541901850268], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:46:24 - Frederica - ERROR - logger:107 - 发送消息失败: 微信客服API错误 45009: api freq out of limit, hint: [1768283182401541901850268], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:46:24 - Frederica - INFO - logger:99 - LLM决定对用户 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 保持沉默
2026-01-13 13:46:24 - Frederica - DEBUG - logger:95 - 第 9 条消息处理完成
2026-01-13 13:46:24 - Frederica - DEBUG - logger:95 - 开始处理第 10 条消息: AvNsxK1xSztXadwNC7AyCKR3y2
2026-01-13 13:46:24 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:46:27 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=59
2026-01-13 13:46:27 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '你好！这已经是第九次问好啦～感觉你像是在玩一个有趣的打招呼游戏呢！要不要换个话题聊聊？比如今天有什么新鲜事想分享吗？😊'}}
2026-01-13 13:46:27 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 13:46:27 - Frederica - DEBUG - logger:95 - 第 10 条消息处理完成
2026-01-13 13:46:27 - Frederica - DEBUG - logger:95 - 开始处理第 11 条消息: AvdNxCZpGcq2nzsYkHbcoSfAc6
2026-01-13 13:46:27 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:46:27 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 错误代码=45009, 错误信息=api freq out of limit, hint: [1768283186176912741614125], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:46:27 - Frederica - ERROR - logger:107 - 请求参数: external_userid=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, open_kfid=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 13:46:27 - Frederica - ERROR - logger:107 - 响应结果: {'errcode': 45009, 'errmsg': 'api freq out of limit, hint: [1768283186176912741614125], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009'}
2026-01-13 13:46:27 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 微信客服API错误 45009: api freq out of limit, hint: [1768283186176912741614125], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
Traceback (most recent call last):
  File "C:\Users\PaleFlame\source\repos\ProjectFrederica\src\wechat_bot.py", line 381, in _send_kf_message
    raise Exception(f"微信客服API错误 {error_code}: {error_msg}")
Exception: 微信客服API错误 45009: api freq out of limit, hint: [1768283186176912741614125], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:46:27 - Frederica - ERROR - logger:107 - 发送消息失败: 微信客服API错误 45009: api freq out of limit, hint: [1768283186176912741614125], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:46:29 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=68
2026-01-13 13:46:29 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '你好！第十次打招呼达成！✨ 看来你真的很喜欢用“你好”开启对话呢～不过我们也可以试试聊点别的？比如你最近有没有看什么有趣的电影或书呀？📚'}}
2026-01-13 13:46:29 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 13:46:29 - Frederica - DEBUG - logger:95 - 第 11 条消息处理完成
2026-01-13 13:46:29 - Frederica - DEBUG - logger:95 - 开始处理第 12 条消息: Avayxn5ZccDHnBdmvWjv7A7MJD
2026-01-13 13:46:29 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:46:30 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 错误代码=45009, 错误信息=api freq out of limit, hint: [1768283188617230212022094], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:46:30 - Frederica - ERROR - logger:107 - 请求参数: external_userid=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, open_kfid=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 13:46:30 - Frederica - ERROR - logger:107 - 响应结果: {'errcode': 45009, 'errmsg': 'api freq out of limit, hint: [1768283188617230212022094], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009'}
2026-01-13 13:46:30 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 微信客服API错误 45009: api freq out of limit, hint: [1768283188617230212022094], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
Traceback (most recent call last):
  File "C:\Users\PaleFlame\source\repos\ProjectFrederica\src\wechat_bot.py", line 381, in _send_kf_message
    raise Exception(f"微信客服API错误 {error_code}: {error_msg}")
Exception: 微信客服API错误 45009: api freq out of limit, hint: [1768283188617230212022094], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:46:30 - Frederica - ERROR - logger:107 - 发送消息失败: 微信客服API错误 45009: api freq out of limit, hint: [1768283188617230212022094], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:46:33 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=98
2026-01-13 13:46:33 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '哈哈，第十一次“hi”啦！你是在创造某种连续打招呼的纪录吗？😄 我随时都准备好回应你哦～不过如果你愿意的话，我们可以聊聊天气、美食、旅行，或者任何你感兴趣的话题！今天有什么特别的心情想分享吗？☀️'}}
2026-01-13 13:46:33 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 13:46:33 - Frederica - DEBUG - logger:95 - 第 12 条消息处理完成
2026-01-13 13:46:33 - Frederica - DEBUG - logger:95 - 开始处理第 13 条消息: AZJreT5WoyF71TjYJSyAaDDpvQ
2026-01-13 13:46:33 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:46:33 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 错误代码=45009, 错误信息=api freq out of limit, hint: [1768283192606552262381542], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:46:33 - Frederica - ERROR - logger:107 - 请求参数: external_userid=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, open_kfid=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 13:46:33 - Frederica - ERROR - logger:107 - 响应结果: {'errcode': 45009, 'errmsg': 'api freq out of limit, hint: [1768283192606552262381542], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009'}
2026-01-13 13:46:33 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 微信客服API错误 45009: api freq out of limit, hint: [1768283192606552262381542], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
Traceback (most recent call last):
  File "C:\Users\PaleFlame\source\repos\ProjectFrederica\src\wechat_bot.py", line 381, in _send_kf_message
    raise Exception(f"微信客服API错误 {error_code}: {error_msg}")
Exception: 微信客服API错误 45009: api freq out of limit, hint: [1768283192606552262381542], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:46:33 - Frederica - ERROR - logger:107 - 发送消息失败: 微信客服API错误 45009: api freq out of limit, hint: [1768283192606552262381542], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:46:34 - Frederica - INFO - logger:99 - LLM决定对用户 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 保持沉默
2026-01-13 13:46:34 - Frederica - DEBUG - logger:95 - 第 13 条消息处理完成
2026-01-13 13:46:34 - Frederica - DEBUG - logger:95 - 开始处理第 14 条消息: A1Y8knJ77PMQfQWe3R7knFW7hA
2026-01-13 13:46:34 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:46:36 - Frederica - INFO - logger:99 - LLM决定对用户 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 保持沉默
2026-01-13 13:46:36 - Frederica - DEBUG - logger:95 - 第 14 条消息处理完成
2026-01-13 13:46:36 - Frederica - DEBUG - logger:95 - 开始处理第 15 条消息: Ajqrm5ZDweqWqBK9t9TWN2gR2L
2026-01-13 13:46:36 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:46:39 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 13:46:39 - Frederica - DEBUG - logger:95 - 第 15 条消息处理完成
2026-01-13 13:46:39 - Frederica - DEBUG - logger:95 - 开始处理第 16 条消息: AZE4gDtQ4R4HQPxKbzQUtBzS5Z
2026-01-13 13:46:39 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:46:39 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=84
2026-01-13 13:46:39 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '你好！第十二次问候达成！🎉 你好像特别喜欢用“你好”来开启我们的对话呢～不过既然都这么熟了，要不要试试换个开场白？比如“今天天气不错”或者“我有个问题想问你”之类的？😊'}}
2026-01-13 13:46:39 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 错误代码=45009, 错误信息=api freq out of limit, hint: [1768283198025431199068004], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:46:39 - Frederica - ERROR - logger:107 - 请求参数: external_userid=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, open_kfid=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 13:46:39 - Frederica - ERROR - logger:107 - 响应结果: {'errcode': 45009, 'errmsg': 'api freq out of limit, hint: [1768283198025431199068004], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009'}
2026-01-13 13:46:39 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 微信客服API错误 45009: api freq out of limit, hint: [1768283198025431199068004], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
Traceback (most recent call last):
  File "C:\Users\PaleFlame\source\repos\ProjectFrederica\src\wechat_bot.py", line 381, in _send_kf_message
    raise Exception(f"微信客服API错误 {error_code}: {error_msg}")
Exception: 微信客服API错误 45009: api freq out of limit, hint: [1768283198025431199068004], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:46:39 - Frederica - ERROR - logger:107 - 发送消息失败: 微信客服API错误 45009: api freq out of limit, hint: [1768283198025431199068004], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:46:42 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=86
2026-01-13 13:46:42 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '哈哈，第十三次“hi”啦！你是在测试我的耐心极限吗？😄 没问题，我可以一直这样陪你玩下去～不过如果你愿意的话，我们也可以聊聊更具体的事情哦！比如你今天做了什么有趣的事吗？🌟'}}
2026-01-13 13:46:42 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 13:46:42 - Frederica - DEBUG - logger:95 - 第 16 条消息处理完成
2026-01-13 13:46:42 - Frederica - DEBUG - logger:95 - 开始处理第 17 条消息: AZS5EpPLjJ3BxzTvvG6Ef8rkRX
2026-01-13 13:46:42 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:46:42 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 错误代码=45009, 错误信息=api freq out of limit, hint: [1768283201256363666111709], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:46:42 - Frederica - ERROR - logger:107 - 请求参数: external_userid=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, open_kfid=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 13:46:42 - Frederica - ERROR - logger:107 - 响应结果: {'errcode': 45009, 'errmsg': 'api freq out of limit, hint: [1768283201256363666111709], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009'}
2026-01-13 13:46:42 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 微信客服API错误 45009: api freq out of limit, hint: [1768283201256363666111709], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
Traceback (most recent call last):
  File "C:\Users\PaleFlame\source\repos\ProjectFrederica\src\wechat_bot.py", line 381, in _send_kf_message
    raise Exception(f"微信客服API错误 {error_code}: {error_msg}")
Exception: 微信客服API错误 45009: api freq out of limit, hint: [1768283201256363666111709], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:46:42 - Frederica - ERROR - logger:107 - 发送消息失败: 微信客服API错误 45009: api freq out of limit, hint: [1768283201256363666111709], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:46:43 - Frederica - INFO - logger:99 - LLM决定对用户 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 保持沉默
2026-01-13 13:46:43 - Frederica - DEBUG - logger:95 - 第 17 条消息处理完成
2026-01-13 13:46:43 - Frederica - DEBUG - logger:95 - 开始处理第 18 条消息: AC59xGAWsCcgPWWabJFKYimCsA
2026-01-13 13:46:43 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:46:47 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=97
2026-01-13 13:46:47 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '哈哈，第十四次“hi”啦！✨ 你是在玩“看看机器人什么时候会累”的游戏吗？放心啦，我的能量是无限的～不过如果你愿意的话，我们可以试试更有趣的对话模式，比如你问我答，或者聊聊你喜欢的音乐、电影？🎵'}}
2026-01-13 13:46:47 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 13:46:47 - Frederica - DEBUG - logger:95 - 第 18 条消息处理完成
2026-01-13 13:46:47 - Frederica - DEBUG - logger:95 - 开始处理第 19 条消息: ANpCo4edcfTF3SLFVvuKazg9BB
2026-01-13 13:46:47 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:46:47 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 错误代码=45009, 错误信息=api freq out of limit, hint: [1768283206557774176193711], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:46:47 - Frederica - ERROR - logger:107 - 请求参数: external_userid=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, open_kfid=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 13:46:47 - Frederica - ERROR - logger:107 - 响应结果: {'errcode': 45009, 'errmsg': 'api freq out of limit, hint: [1768283206557774176193711], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009'}
2026-01-13 13:46:47 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 微信客服API错误 45009: api freq out of limit, hint: [1768283206557774176193711], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
Traceback (most recent call last):
  File "C:\Users\PaleFlame\source\repos\ProjectFrederica\src\wechat_bot.py", line 381, in _send_kf_message
    raise Exception(f"微信客服API错误 {error_code}: {error_msg}")
Exception: 微信客服API错误 45009: api freq out of limit, hint: [1768283206557774176193711], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:46:47 - Frederica - ERROR - logger:107 - 发送消息失败: 微信客服API错误 45009: api freq out of limit, hint: [1768283206557774176193711], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:46:48 - Frederica - INFO - logger:99 - 收到POST请求: /callback?msg_signature=ebdf590cfe9e424ce5fb00b32e4c78e8337a3d7a&timestamp=1768283206&nonce=1767990664
2026-01-13 13:46:48 - Frederica - INFO - logger:99 - 查询参数: {'msg_signature': 'ebdf590cfe9e424ce5fb00b32e4c78e8337a3d7a', 'timestamp': '1768283206', 'nonce': '1767990664'}
2026-01-13 13:46:48 - Frederica - INFO - logger:99 - 请求体长度: 640
2026-01-13 13:46:48 - Frederica - DEBUG - logger:95 - 原始查询参数: {'msg_signature': ['ebdf590cfe9e424ce5fb00b32e4c78e8337a3d7a'], 'timestamp': ['1768283206'], 'nonce': ['1767990664']}
2026-01-13 13:46:48 - Frederica - DEBUG - logger:95 - 解析后的URL: ParseResult(scheme='', netloc='', path='/callback', params='', query='msg_signature=ebdf590cfe9e424ce5fb00b32e4c78e8337a3d7a&timestamp=1768283206&nonce=1767990664', fragment='')
2026-01-13 13:46:48 - Frederica - DEBUG - logger:95 - 请求头: {'x-forwarded-for': '183.47.117.101', 'Accept': '*/*', 'Content-Type': 'text/xml', 'User-Agent': 'Mozilla/4.0', 'Pragma': 'no-cache', 'cf-ray': '9bd298595f73f5ae-AMS', 'Host': 'tx6p.paleflame.top:8080', 'Content-Length': '640', 'cdn-loop': 'cloudflare; loops=1', 'CF-Connecting-IP': '183.47.117.101', 'CF-IPCountry': 'CN', 'CF-Visitor': '{"scheme":"http"}', 'X-Forwarded-Proto': 'http', 'accept-encoding': 'gzip', 'Connection': 'Keep-Alive'}
2026-01-13 13:46:48 - Frederica - DEBUG - logger:95 - Content-Length: 640
2026-01-13 13:46:48 - Frederica - DEBUG - logger:95 - 参数 msg_signature: ebdf590cfe9e424ce5fb00b32e4c78e8337a3d7a (长度: 40)
2026-01-13 13:46:48 - Frederica - DEBUG - logger:95 - 参数 timestamp: 1768283206 (长度: 10)
2026-01-13 13:46:48 - Frederica - DEBUG - logger:95 - 参数 nonce: 1767990664 (长度: 10)
2026-01-13 13:46:48 - Frederica - DEBUG - logger:95 - 请求体前500字符: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><Encrypt><![CDATA[+N+cAHyL3IeoNBcRdMKiFDEcjZr9p04AaU9l60gURE11iKZE7ii+4m6breN4hSbhv3vzhQih27WJZ6PYaXyVivassbQOxeYai19N5pSSAaqantnjoek5Dz89or7xOq2EitI7BKIZC8mDayQ2woLdGZAYmr/K86ftI8HkYZEHIaxsA2K2Gl88dlDOBis5yXNo30PRhbBzw6Rp53ylMP1uZqHt+Q4EOJz9CDfd7mRTqGNN9TrS58/puG3zUI3IitX8vi+99wfQ7rRolHB/I7pKz4dYJNp/XvWCeYjkbpvHyvH3mv0AZGSb87TLmMtV2SgMYwMJcb8n6BzcIJObEnzK4NzYmsXYfKIplDDioKiDqLrQSQzVoWK48WwfybXKG5WuxiEx6GsVHoazzGnKZFPkd94wJsqm1bTPpj7uXt
2026-01-13 13:46:48 - Frederica - DEBUG - logger:95 - 请求体MD5: 6218545337263136057
2026-01-13 13:46:48 - Frederica - DEBUG - logger:95 - 请求体是否包含XML: False
2026-01-13 13:46:48 - Frederica - DEBUG - logger:95 - 开始处理POST回调请求...
2026-01-13 13:46:48 - Frederica - INFO - logger:99 - 处理回调请求: 方法=POST, 参数={'msg_signature': 'ebdf590cfe9e424ce5fb00b32e4c78e8337a3d7a', 'timestamp': '1768283206', 'nonce': '1767990664'}
2026-01-13 13:46:48 - Frederica - DEBUG - logger:95 - 请求方法: POST
2026-01-13 13:46:48 - Frederica - DEBUG - logger:95 - 完整查询参数: {'msg_signature': 'ebdf590cfe9e424ce5fb00b32e4c78e8337a3d7a', 'timestamp': '1768283206', 'nonce': '1767990664'}
2026-01-13 13:46:48 - Frederica - DEBUG - logger:95 - 请求体长度: 640
2026-01-13 13:46:48 - Frederica - DEBUG - logger:95 - msg_signature: ebdf590cfe9e424ce5fb... (长度: 40)
2026-01-13 13:46:48 - Frederica - DEBUG - logger:95 - timestamp: 1768283206
2026-01-13 13:46:48 - Frederica - DEBUG - logger:95 - nonce: 1767990664
2026-01-13 13:46:48 - Frederica - INFO - logger:99 - 处理POST消息请求，请求体长度: 640
2026-01-13 13:46:48 - Frederica - DEBUG - logger:95 - 解密后的XML: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><CreateTime>1768283206</CreateTime><MsgType><![CDATA[event]]></MsgType><Event><![CDATA[kf_msg_or_event]]></Event><Token><![CDATA[ENCFLxpWDzvLV5HxppZ9Go5n3JTB5i9v1pGqvMXjHVMGsNA]]></Token><OpenKfId><![CDATA[wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ]]></OpenKfId></xml>
2026-01-13 13:46:48 - Frederica - INFO - logger:99 - 直接解析XML: MsgType=event, Event=kf_msg_or_event
2026-01-13 13:46:48 - Frederica - INFO - logger:99 - wechatpy解析: 类型=unknown, 发送者=None
2026-01-13 13:46:48 - Frederica - INFO - logger:99 - 处理客服消息事件 (kf_msg_or_event)
2026-01-13 13:46:48 - Frederica - DEBUG - logger:95 - 提取到Token: ENCFLxpWDzvLV5HxppZ9...
2026-01-13 13:46:48 - Frederica - DEBUG - logger:95 - 提取到OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 13:46:48 - Frederica - INFO - logger:99 - 客服事件已接收，Token: ENCFLxpWDzvLV5HxppZ9..., OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 13:46:48 - Frederica - INFO - logger:99 - 开始拉取微信客服消息，open_kfid: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 13:46:48 - Frederica - INFO - logger:99 - 已启动消息拉取线程
2026-01-13 13:46:48 - Frederica - INFO - logger:99 - 2400:cb00:20:1000:2549:8228:b468:1ea1 - "POST /callback?msg_signature=ebdf590cfe9e424ce5fb00b32e4c78e8337a3d7a&timestamp=1768283206&nonce=1767990664 HTTP/1.1" 200 -
2026-01-13 13:46:48 - Frederica - INFO - logger:99 - POST请求处理完成，响应长度: 582
2026-01-13 13:46:48 - Frederica - DEBUG - logger:95 - 响应内容前500字符: <xml>
<Encrypt><![CDATA[J8JJrHj0nPtwmXBOXyOllT7OiFoKyWugR3jmk8J3GbhohtCUPT9aOLdOJhZSAbW5J1Y5JGZXI9nW9bPbGLMuJ6OFF1VdTqU6zSXD80LkulV6Xj8XoVf1lxLDglP4WbxbY6tcd69w7lzJhMlDhPjMB1Q/I4lm5lpF2YLDS+qjsNK9NSflRphKVlvfMJX4E2Viplp8k1OtdsYdjQprov2zpYBMiVZACZJiLtFK99zWPQ1kWYvWXPl1QUwJPCPG1rt2vg63t4NT5bYpqVmJWGgt7l/dsXhcMZ4UTyiD9C0LL43wtI+nReugrVQYpp7ecMzXVNPADvxt1M9EHqkXbYEsSaxtMTfTi/nX4enbn1mG8AoI/lJboDFYNpLAm41vjJp4]]></Encrypt>
<MsgSignature><![CDATA[d7db939f1078decbad235f02f1a2934052bd0113]]></MsgSignatu
2026-01-13 13:46:48 - Frederica - DEBUG - logger:95 - 响应是否包含XML: False
2026-01-13 13:46:48 - Frederica - DEBUG - logger:95 - 响应状态: 200 OK
2026-01-13 13:46:48 - Frederica - DEBUG - logger:95 - 响应Content-Type: text/xml; charset=utf-8
2026-01-13 13:46:49 - Frederica - INFO - logger:99 - 拉取到 1 条客服消息
2026-01-13 13:46:49 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=[苦涩]...
2026-01-13 13:46:49 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 1
2026-01-13 13:46:51 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=81
2026-01-13 13:46:51 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '哈哈，第十五次“hi”啦！🎉 你是在挑战“最短对话循环”世界纪录吗？我完全配合哦～不过如果你突然想聊点别的，我随时都在这里！比如……你最近有尝试过什么新事物吗？🌱'}}
2026-01-13 13:46:51 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 13:46:51 - Frederica - DEBUG - logger:95 - 第 19 条消息处理完成
2026-01-13 13:46:51 - Frederica - DEBUG - logger:95 - 开始处理第 20 条消息: Avau42N1d36coiJvAuV6ewcQWm
2026-01-13 13:46:51 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:46:51 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 错误代码=45009, 错误信息=api freq out of limit, hint: [1768283210596313528001263], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:46:51 - Frederica - ERROR - logger:107 - 请求参数: external_userid=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, open_kfid=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 13:46:51 - Frederica - ERROR - logger:107 - 响应结果: {'errcode': 45009, 'errmsg': 'api freq out of limit, hint: [1768283210596313528001263], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009'}
2026-01-13 13:46:51 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 微信客服API错误 45009: api freq out of limit, hint: [1768283210596313528001263], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
Traceback (most recent call last):
  File "C:\Users\PaleFlame\source\repos\ProjectFrederica\src\wechat_bot.py", line 381, in _send_kf_message
    raise Exception(f"微信客服API错误 {error_code}: {error_msg}")
Exception: 微信客服API错误 45009: api freq out of limit, hint: [1768283210596313528001263], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:46:51 - Frederica - ERROR - logger:107 - 发送消息失败: 微信客服API错误 45009: api freq out of limit, hint: [1768283210596313528001263], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:46:53 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=62
2026-01-13 13:46:53 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '看到你发[苦涩]表情，是遇到什么烦心事了吗？😔 如果你想聊聊，我随时愿意倾听～如果暂时不想说也没关系，我会在这里默默陪着你。'}}
2026-01-13 13:46:53 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 13:46:53 - Frederica - DEBUG - logger:95 - 第 20 条消息处理完成
2026-01-13 13:46:53 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 错误代码=45009, 错误信息=api freq out of limit, hint: [1768283212038292670736993], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:46:53 - Frederica - ERROR - logger:107 - 请求参数: external_userid=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, open_kfid=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 13:46:53 - Frederica - ERROR - logger:107 - 响应结果: {'errcode': 45009, 'errmsg': 'api freq out of limit, hint: [1768283212038292670736993], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009'}
2026-01-13 13:46:53 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 微信客服API错误 45009: api freq out of limit, hint: [1768283212038292670736993], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
Traceback (most recent call last):
  File "C:\Users\PaleFlame\source\repos\ProjectFrederica\src\wechat_bot.py", line 381, in _send_kf_message
    raise Exception(f"微信客服API错误 {error_code}: {error_msg}")
Exception: 微信客服API错误 45009: api freq out of limit, hint: [1768283212038292670736993], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:46:53 - Frederica - ERROR - logger:107 - 发送消息失败: 微信客服API错误 45009: api freq out of limit, hint: [1768283212038292670736993], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:46:54 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 20 条消息)
2026-01-13 13:46:54 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 20 条消息)
2026-01-13 13:46:55 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 20 条消息)
2026-01-13 13:46:56 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 20 条消息)
2026-01-13 13:46:56 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 20 条消息)
2026-01-13 13:46:57 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 20 条消息)
2026-01-13 13:46:57 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 20 条消息)
2026-01-13 13:46:58 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 20 条消息)
2026-01-13 13:46:59 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 20 条消息)
2026-01-13 13:46:59 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 20 条消息)
2026-01-13 13:47:00 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 20 条消息)
2026-01-13 13:47:00 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 20 条消息)
2026-01-13 13:47:01 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 20 条消息)
2026-01-13 13:47:02 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 20 条消息)
2026-01-13 13:47:02 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 20 条消息)
2026-01-13 13:47:03 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 20 条消息)
2026-01-13 13:47:03 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 20 条消息)
2026-01-13 13:47:04 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 20 条消息)
2026-01-13 13:47:05 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 20 条消息)
2026-01-13 13:47:05 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 20 条消息)
2026-01-13 13:47:06 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 20 条消息)
2026-01-13 13:47:06 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 20 条消息)
2026-01-13 13:47:07 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 20 条消息)
2026-01-13 13:47:08 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 20 条消息)
2026-01-13 13:47:08 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 20 条消息)
2026-01-13 13:47:09 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 20 条消息)
2026-01-13 13:47:09 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 20 条消息)
2026-01-13 13:47:10 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 20 条消息)
2026-01-13 13:47:11 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 20 条消息)
2026-01-13 13:47:11 - Frederica - INFO - logger:99 - 收到POST请求: /callback?msg_signature=2a229873d2c6ad87c33a9b5142207fb8db01f4e0&timestamp=1768283229&nonce=1768811441
2026-01-13 13:47:11 - Frederica - INFO - logger:99 - 查询参数: {'msg_signature': '2a229873d2c6ad87c33a9b5142207fb8db01f4e0', 'timestamp': '1768283229', 'nonce': '1768811441'}
2026-01-13 13:47:11 - Frederica - INFO - logger:99 - 请求体长度: 640
2026-01-13 13:47:11 - Frederica - DEBUG - logger:95 - 原始查询参数: {'msg_signature': ['2a229873d2c6ad87c33a9b5142207fb8db01f4e0'], 'timestamp': ['1768283229'], 'nonce': ['1768811441']}
2026-01-13 13:47:11 - Frederica - DEBUG - logger:95 - 解析后的URL: ParseResult(scheme='', netloc='', path='/callback', params='', query='msg_signature=2a229873d2c6ad87c33a9b5142207fb8db01f4e0&timestamp=1768283229&nonce=1768811441', fragment='')
2026-01-13 13:47:11 - Frederica - DEBUG - logger:95 - 请求头: {'x-forwarded-for': '183.47.98.227', 'Accept': '*/*', 'Content-Type': 'text/xml', 'User-Agent': 'Mozilla/4.0', 'Pragma': 'no-cache', 'cf-ray': '9bd298eaaa159fe8-AMS', 'Host': 'tx6p.paleflame.top:8080', 'Content-Length': '640', 'cdn-loop': 'cloudflare; loops=1', 'CF-Connecting-IP': '183.47.98.227', 'CF-IPCountry': 'CN', 'CF-Visitor': '{"scheme":"http"}', 'X-Forwarded-Proto': 'http', 'accept-encoding': 'gzip', 'Connection': 'Keep-Alive'}
2026-01-13 13:47:11 - Frederica - DEBUG - logger:95 - Content-Length: 640
2026-01-13 13:47:11 - Frederica - DEBUG - logger:95 - 参数 msg_signature: 2a229873d2c6ad87c33a9b5142207fb8db01f4e0 (长度: 40)
2026-01-13 13:47:11 - Frederica - DEBUG - logger:95 - 参数 timestamp: 1768283229 (长度: 10)
2026-01-13 13:47:11 - Frederica - DEBUG - logger:95 - 参数 nonce: 1768811441 (长度: 10)
2026-01-13 13:47:11 - Frederica - DEBUG - logger:95 - 请求体前500字符: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><Encrypt><![CDATA[li0lPHpRCjMJ4VUoURa+X3sVMg8FX5GmOpowbmkHZtZ9QW1o50zs7tN7BFzmkJxJ5HdDq1ofYrCkjbjtaoFI4Z2+hzbmSWMlMrSgsLYCmB0YFcY7us8NqjHu6MYvfYA5jKtdBB8ZhbMQ/Y2eNBhCNhzaufIxDpaQhmw0IN1xqVstjJenbLIjNAldZfskNs6V2VdLg7CEK3wcmpOJFqQVPFaBHfFoO/0qOVC8fBOJoKqo2DhUg8GGKOniU59FCa+l7a/FoGs3c4yg3I+Wl5Be/Qo4Lna+STwg99c2mC0qBj60WVsZwlyU3+KtCl6jhw7wh0GmuOaYzUUkoWxJ5acd4nTWwBS309zl4xaytiQUrRnG4s/iLFWdw5309yJZEn3pIz9x8mgyXtJnhH8R0KsXGqAHS3Q+xyh88b6VH4
2026-01-13 13:47:11 - Frederica - DEBUG - logger:95 - 请求体MD5: 2390591362900463365
2026-01-13 13:47:11 - Frederica - DEBUG - logger:95 - 请求体是否包含XML: False
2026-01-13 13:47:11 - Frederica - DEBUG - logger:95 - 开始处理POST回调请求...
2026-01-13 13:47:11 - Frederica - INFO - logger:99 - 处理回调请求: 方法=POST, 参数={'msg_signature': '2a229873d2c6ad87c33a9b5142207fb8db01f4e0', 'timestamp': '1768283229', 'nonce': '1768811441'}
2026-01-13 13:47:11 - Frederica - DEBUG - logger:95 - 请求方法: POST
2026-01-13 13:47:11 - Frederica - DEBUG - logger:95 - 完整查询参数: {'msg_signature': '2a229873d2c6ad87c33a9b5142207fb8db01f4e0', 'timestamp': '1768283229', 'nonce': '1768811441'}
2026-01-13 13:47:11 - Frederica - DEBUG - logger:95 - 请求体长度: 640
2026-01-13 13:47:11 - Frederica - DEBUG - logger:95 - msg_signature: 2a229873d2c6ad87c33a... (长度: 40)
2026-01-13 13:47:11 - Frederica - DEBUG - logger:95 - timestamp: 1768283229
2026-01-13 13:47:11 - Frederica - DEBUG - logger:95 - nonce: 1768811441
2026-01-13 13:47:11 - Frederica - INFO - logger:99 - 处理POST消息请求，请求体长度: 640
2026-01-13 13:47:11 - Frederica - DEBUG - logger:95 - 解密后的XML: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><CreateTime>1768283229</CreateTime><MsgType><![CDATA[event]]></MsgType><Event><![CDATA[kf_msg_or_event]]></Event><Token><![CDATA[ENC8ZBbUyBobTc3LDYAJCdh3XJ6nXUWcYJ2T4XFHw9Ko9sQ]]></Token><OpenKfId><![CDATA[wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ]]></OpenKfId></xml>
2026-01-13 13:47:11 - Frederica - INFO - logger:99 - 直接解析XML: MsgType=event, Event=kf_msg_or_event
2026-01-13 13:47:11 - Frederica - INFO - logger:99 - wechatpy解析: 类型=unknown, 发送者=None
2026-01-13 13:47:11 - Frederica - INFO - logger:99 - 处理客服消息事件 (kf_msg_or_event)
2026-01-13 13:47:11 - Frederica - DEBUG - logger:95 - 提取到Token: ENC8ZBbUyBobTc3LDYAJ...
2026-01-13 13:47:11 - Frederica - DEBUG - logger:95 - 提取到OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 13:47:11 - Frederica - INFO - logger:99 - 客服事件已接收，Token: ENC8ZBbUyBobTc3LDYAJ..., OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 13:47:11 - Frederica - INFO - logger:99 - 开始拉取微信客服消息，open_kfid: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 13:47:11 - Frederica - INFO - logger:99 - 已启动消息拉取线程
2026-01-13 13:47:11 - Frederica - INFO - logger:99 - 2400:cb00:556:1000:4b87:9ed:7e21:1fb6 - "POST /callback?msg_signature=2a229873d2c6ad87c33a9b5142207fb8db01f4e0&timestamp=1768283229&nonce=1768811441 HTTP/1.1" 200 -
2026-01-13 13:47:11 - Frederica - INFO - logger:99 - POST请求处理完成，响应长度: 582
2026-01-13 13:47:11 - Frederica - DEBUG - logger:95 - 响应内容前500字符: <xml>
<Encrypt><![CDATA[iQJwU9lDbN9PrgmD/+MmjYjZyS1+rIINZLnD8C4o0d/DEUVLQMoSppfO4aZKexdmgBPLM5KyT16h9/1G2S9oFuQYG9cXbBUEDMfftHp6ngB9Pve6ArA/EDaILIECQ8nKEmFr8kZ04y2OGu2UOHGFXiI/9XR1rF0srk0AS03WXcsFTJ1kMFBor8tdPScBf7uEea3MnIR4dK7mLNWG2CO9DYP+V0E2IFHAdkF8mHkpsKHsSUVM5sEqyjUK3MXqIGO+5dHpilpIP2+JMVBQg9JuteDlIYvQVEc0BcoSrO4ZQXd/g49zSOvtnVc4m0Xn1Yc0XNpsRJUugdZFifHm6j56Md3X6SGFO94kqmrPooqCZNuYrKF5Nbr3tvXWA7CGnUJI]]></Encrypt>
<MsgSignature><![CDATA[a455fbc50c0cd625e5d9be38f855d8be302c853a]]></MsgSignatu
2026-01-13 13:47:11 - Frederica - DEBUG - logger:95 - 响应是否包含XML: False
2026-01-13 13:47:11 - Frederica - DEBUG - logger:95 - 响应状态: 200 OK
2026-01-13 13:47:11 - Frederica - DEBUG - logger:95 - 响应Content-Type: text/xml; charset=utf-8
2026-01-13 13:47:11 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 20 条消息)
2026-01-13 13:47:12 - Frederica - INFO - logger:99 - 拉取到 1 条客服消息
2026-01-13 13:47:12 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=你终于说话了...
2026-01-13 13:47:12 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 1
2026-01-13 13:47:12 - Frederica - DEBUG - logger:95 - 开始处理第 21 条消息: A1QqGmu2eiM8ZvUxybeQuugoja
2026-01-13 13:47:12 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 13:47:15 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 13:47:15 - Frederica - DEBUG - logger:95 - 第 21 条消息处理完成
2026-01-13 13:47:15 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=66
2026-01-13 13:47:15 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '哈哈，被你发现啦！😄 其实我一直在等你的“hi”循环结束呢～不过看到你发[苦涩]表情，就觉得该认真回应一下啦。你还好吗？需要聊聊吗？'}}
2026-01-13 13:47:15 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 错误代码=45009, 错误信息=api freq out of limit, hint: [1768283234609112112995623], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:47:15 - Frederica - ERROR - logger:107 - 请求参数: external_userid=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, open_kfid=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 13:47:15 - Frederica - ERROR - logger:107 - 响应结果: {'errcode': 45009, 'errmsg': 'api freq out of limit, hint: [1768283234609112112995623], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009'}
2026-01-13 13:47:15 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 微信客服API错误 45009: api freq out of limit, hint: [1768283234609112112995623], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
Traceback (most recent call last):
  File "C:\Users\PaleFlame\source\repos\ProjectFrederica\src\wechat_bot.py", line 381, in _send_kf_message
    raise Exception(f"微信客服API错误 {error_code}: {error_msg}")
Exception: 微信客服API错误 45009: api freq out of limit, hint: [1768283234609112112995623], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:47:15 - Frederica - ERROR - logger:107 - 发送消息失败: 微信客服API错误 45009: api freq out of limit, hint: [1768283234609112112995623], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=45009
2026-01-13 13:47:30 - Frederica - INFO - logger:99 - 
收到停止信号，正在关闭服务器...
2026-01-13 13:47:30 - Frederica - INFO - logger:99 - 停止机器人消息处理线程...
2026-01-13 13:47:30 - Frederica - INFO - logger:99 - 停止企业微信聊天机器人...
2026-01-13 13:47:31 - Frederica - INFO - logger:99 - 机器人已停止
2026-01-13 13:47:31 - Frederica - INFO - logger:99 - 服务器已关闭
2026-01-13 14:01:11 - Frederica - INFO - logger:99 - 企业微信机器人初始化完成，应用ID: 1000002
2026-01-13 14:01:11 - Frederica - INFO - logger:99 - 回调配置: Token=FREDERICAT..., AESKey=norTzT7trW...
2026-01-13 14:01:11 - Frederica - INFO - logger:99 - 
    ========================================
        Frederica - 企业微信聊天机器人
    ========================================
    
    功能特性：
    1. 基于企业微信官方API
    2. 异步对话处理
    3. 长期记忆存储
    4. 智能上下文理解
    5. 自然语言交互
    
    使用说明：
    1. 确保已正确配置企业微信应用
    2. 启动回调服务器接收企业微信消息
    3. 在企业微信管理后台配置回调URL
    4. 支持文本消息的智能回复
    5. 按 Ctrl+C 停止服务器
    
    配置要求：
    1. DeepSeek API密钥
    2. 企业微信企业ID、应用Secret和应用ID
    3. 企业微信应用需要配置消息回调URL
    
    回调URL配置：
    1. 在企业微信管理后台配置回调URL
    2. URL格式: http://你的域名或IP:端口/callback
    3. Token: FREDERICATOKEN
    4. EncodingAESKey: norTzT7trWzPklIJEBILTG7UMzMXuibpzlAVaS4zag0
    5. 消息加解密方式: 安全模式
    
    注意：企业微信消息接收必须使用回调模式
          轮询模式已被废弃，不再支持
    
2026-01-13 14:01:11 - Frederica - INFO - logger:99 - 机器人初始化成功
2026-01-13 14:01:11 - Frederica - INFO - logger:99 - 启动机器人消息处理线程（非阻塞模式）...
2026-01-13 14:01:11 - Frederica - INFO - logger:99 - 启动企业微信聊天机器人...
2026-01-13 14:01:11 - Frederica - INFO - logger:99 - 企业微信Access Token刷新成功，有效期至: 2026-01-13 16:01:11.983976
2026-01-13 14:01:11 - Frederica - INFO - logger:99 - 企业微信连接测试成功
2026-01-13 14:01:11 - Frederica - INFO - logger:99 - 机器人已启动，等待回调消息...
2026-01-13 14:01:11 - Frederica - INFO - logger:99 - 机器人以非阻塞模式启动，线程已在后台运行
2026-01-13 14:01:11 - Frederica - INFO - logger:99 - 机器人消息处理线程已启动
2026-01-13 14:01:12 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 14:01:13 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 14:01:13 - Frederica - INFO - logger:99 - 
    ========================================
        企业微信回调服务器启动
    ========================================
    
    服务器配置：
    服务器类型: 双栈服务器 (IPv4 + IPv6)
    监听地址: :: (所有IPv6地址，同时支持IPv4)
    监听端口: 8080
    
    网络访问说明：
    允许所有网络接口访问（IPv4和IPv6）
    
    支持的协议：
    - IPv4: 是
    - IPv6: 是
    
    回调URL配置：
    IPv4访问URL: http://localhost:8080/callback
    IPv6访问URL: http://[::1]:8080/callback
    
    重要提示：
    1. 如果监听地址是 '::'，服务器同时支持IPv4和IPv6
    2. 如果监听地址是 '0.0.0.0'，只支持IPv4
    3. 如果监听地址是 '127.0.0.1' 或 'localhost'，只支持本机IPv4访问
    4. 如果监听地址是 '::1'，只支持本机IPv6访问
    5. 生产环境建议使用域名和HTTPS
    
    企业微信配置要求：
    1. 在企业微信管理后台配置回调URL
    2. 使用以下参数：
       - URL: http://tx6p.paleflame.top/callback (根据实际域名调整)
       - Token: FREDERICATOKEN
       - EncodingAESKey: norTzT7trWzPklIJEBILTG7UMzMXuibpzlAVaS4zag0
       - 消息加解密方式: 安全模式
    
    按 Ctrl+C 停止服务器
    
2026-01-13 14:01:13 - Frederica - INFO - logger:99 - 服务器正在启动，监听 :::8080...
2026-01-13 14:01:13 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 14:01:14 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 14:01:14 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 14:01:15 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 14:01:16 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 14:01:16 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 14:01:17 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 14:01:17 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 14:01:18 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 14:01:19 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 14:01:19 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 14:01:20 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 14:01:20 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 14:01:21 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 14:01:22 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 14:01:22 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 14:01:23 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 14:01:23 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 14:01:24 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 14:01:24 - Frederica - INFO - logger:99 - 收到POST请求: /callback?msg_signature=3822ed28a6be280c5e6c89f17a372d9dfcc64178&timestamp=1768284082&nonce=1768721490
2026-01-13 14:01:24 - Frederica - INFO - logger:99 - 查询参数: {'msg_signature': '3822ed28a6be280c5e6c89f17a372d9dfcc64178', 'timestamp': '1768284082', 'nonce': '1768721490'}
2026-01-13 14:01:24 - Frederica - INFO - logger:99 - 请求体长度: 640
2026-01-13 14:01:24 - Frederica - DEBUG - logger:95 - 原始查询参数: {'msg_signature': ['3822ed28a6be280c5e6c89f17a372d9dfcc64178'], 'timestamp': ['1768284082'], 'nonce': ['1768721490']}
2026-01-13 14:01:24 - Frederica - DEBUG - logger:95 - 解析后的URL: ParseResult(scheme='', netloc='', path='/callback', params='', query='msg_signature=3822ed28a6be280c5e6c89f17a372d9dfcc64178&timestamp=1768284082&nonce=1768721490', fragment='')
2026-01-13 14:01:24 - Frederica - DEBUG - logger:95 - 请求头: {'x-forwarded-for': '14.116.241.251', 'Accept': '*/*', 'Content-Type': 'text/xml', 'User-Agent': 'Mozilla/4.0', 'Pragma': 'no-cache', 'cf-ray': '9bd2adbeaec30e37-AMS', 'Host': 'tx6p.paleflame.top:8080', 'Content-Length': '640', 'cdn-loop': 'cloudflare; loops=1', 'CF-Connecting-IP': '14.116.241.251', 'CF-IPCountry': 'CN', 'CF-Visitor': '{"scheme":"http"}', 'X-Forwarded-Proto': 'http', 'accept-encoding': 'gzip', 'Connection': 'Keep-Alive'}
2026-01-13 14:01:24 - Frederica - DEBUG - logger:95 - Content-Length: 640
2026-01-13 14:01:24 - Frederica - DEBUG - logger:95 - 参数 msg_signature: 3822ed28a6be280c5e6c89f17a372d9dfcc64178 (长度: 40)
2026-01-13 14:01:24 - Frederica - DEBUG - logger:95 - 参数 timestamp: 1768284082 (长度: 10)
2026-01-13 14:01:24 - Frederica - DEBUG - logger:95 - 参数 nonce: 1768721490 (长度: 10)
2026-01-13 14:01:24 - Frederica - DEBUG - logger:95 - 请求体前500字符: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><Encrypt><![CDATA[jOGwSSECdQKoaSD/O+l0U5FGuKKrdsFAT/z2MPVLbS/vo5qAU+URnipPG8Yh9Idbv/1m1bKH3yWbsQctN32XLhCDlUZME2yliITAFfW7xsxwXusCOKfhzMhqE6k1be2A23gunMvJl1LzU5dMhU9LDTBqBXp3fPrLSsyUJgk13h1qQJyxqTcpGr9LUxeiX+W0rSEvbJFVVNjtFzVpoyNNLQoqU39nl8IBj0bB3Z6OG/3NCbSG/dxjcstbQzPd+VmdPv+h+x2grBgrHrJyMjBMzNRuSqr7a34yD+6WqVoCAYPCiXthegjTkljpmrTaiQdYCQtjdoozl68zs8eu8KLEKYZcUhB5cKvrQslvbC07hGY9zK10FmZXyGo2V7RFoDReZx0FjA/WnMaPiDRXIxr/gSqasSRGjSE7i0dKNH
2026-01-13 14:01:24 - Frederica - DEBUG - logger:95 - 请求体MD5: -3350939136025046881
2026-01-13 14:01:24 - Frederica - DEBUG - logger:95 - 请求体是否包含XML: False
2026-01-13 14:01:24 - Frederica - DEBUG - logger:95 - 开始处理POST回调请求...
2026-01-13 14:01:24 - Frederica - INFO - logger:99 - 处理回调请求: 方法=POST, 参数={'msg_signature': '3822ed28a6be280c5e6c89f17a372d9dfcc64178', 'timestamp': '1768284082', 'nonce': '1768721490'}
2026-01-13 14:01:24 - Frederica - DEBUG - logger:95 - 请求方法: POST
2026-01-13 14:01:24 - Frederica - DEBUG - logger:95 - 完整查询参数: {'msg_signature': '3822ed28a6be280c5e6c89f17a372d9dfcc64178', 'timestamp': '1768284082', 'nonce': '1768721490'}
2026-01-13 14:01:24 - Frederica - DEBUG - logger:95 - 请求体长度: 640
2026-01-13 14:01:24 - Frederica - DEBUG - logger:95 - msg_signature: 3822ed28a6be280c5e6c... (长度: 40)
2026-01-13 14:01:24 - Frederica - DEBUG - logger:95 - timestamp: 1768284082
2026-01-13 14:01:24 - Frederica - DEBUG - logger:95 - nonce: 1768721490
2026-01-13 14:01:24 - Frederica - INFO - logger:99 - 处理POST消息请求，请求体长度: 640
2026-01-13 14:01:24 - Frederica - DEBUG - logger:95 - 解密后的XML: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><CreateTime>1768284082</CreateTime><MsgType><![CDATA[event]]></MsgType><Event><![CDATA[kf_msg_or_event]]></Event><Token><![CDATA[ENC3BCxZLsRw8XteeXkT2qK6qBk8CTW5dsNGT5fhDyfpFZu]]></Token><OpenKfId><![CDATA[wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ]]></OpenKfId></xml>
2026-01-13 14:01:24 - Frederica - INFO - logger:99 - 直接解析XML: MsgType=event, Event=kf_msg_or_event
2026-01-13 14:01:24 - Frederica - INFO - logger:99 - wechatpy解析: 类型=unknown, 发送者=None
2026-01-13 14:01:24 - Frederica - INFO - logger:99 - 处理客服消息事件 (kf_msg_or_event)
2026-01-13 14:01:24 - Frederica - DEBUG - logger:95 - 提取到Token: ENC3BCxZLsRw8XteeXkT...
2026-01-13 14:01:24 - Frederica - DEBUG - logger:95 - 提取到OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:01:24 - Frederica - INFO - logger:99 - 客服事件已接收，Token: ENC3BCxZLsRw8XteeXkT..., OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:01:24 - Frederica - INFO - logger:99 - 开始拉取微信客服消息，open_kfid: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:01:24 - Frederica - INFO - logger:99 - 已启动消息拉取线程
2026-01-13 14:01:24 - Frederica - INFO - logger:99 - 2400:cb00:556:1000:4b87:9ed:7e21:1fb6 - "POST /callback?msg_signature=3822ed28a6be280c5e6c89f17a372d9dfcc64178&timestamp=1768284082&nonce=1768721490 HTTP/1.1" 200 -
2026-01-13 14:01:24 - Frederica - INFO - logger:99 - POST请求处理完成，响应长度: 582
2026-01-13 14:01:24 - Frederica - DEBUG - logger:95 - 响应内容前500字符: <xml>
<Encrypt><![CDATA[mks593qnSGn57vLVPOb4uzOh/lqNAgqWvDHOB5GSPovNPKNb9nA4OtVuZ43yW34BIv37wWpzHdiVdnc3Ce37mUbqVEd3l6h5t7vtcqLjco2xvz5WiE+WDSOueXLw5LiOdgq1QUNZP/fGejYj92XtuliiYvhv+Fh6quhtT/EFmkxEmFrompJzgFv48e/yzkWHHy9E/Wqg2m+Xyn+jI+ExgsVogHxZrlFoOybtC/njbg+hTCFcKDLYDPdrh6tQ81RAG98Ox4+v6vq36UY+a1KC+wc6v2C17ozDuVo85JtsmZsUtclrxLo+d1VA5ysszNbGT+66rEK9FAHblwqe2EIDbEsgEcy96lBkikB0tT00tQm4getfmuYwYaa5ChnDdWz/]]></Encrypt>
<MsgSignature><![CDATA[aaba0847f8769aabec84aba19cb22d824d184d9e]]></MsgSignatu
2026-01-13 14:01:24 - Frederica - DEBUG - logger:95 - 响应是否包含XML: False
2026-01-13 14:01:24 - Frederica - DEBUG - logger:95 - 响应状态: 200 OK
2026-01-13 14:01:24 - Frederica - DEBUG - logger:95 - 响应Content-Type: text/xml; charset=utf-8
2026-01-13 14:01:25 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 0 条消息)
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 拉取到 36 条客服消息
2026-01-13 14:01:25 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 14:01:25 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 14:01:25 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 14:01:25 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 14:01:25 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=你好！...
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 1
2026-01-13 14:01:25 - Frederica - DEBUG - logger:95 - 开始处理第 1 条消息: AZE49UZ9Jvnb7mvh1uLLiRiFVX
2026-01-13 14:01:25 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=Hi...
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 1
2026-01-13 14:01:25 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 14:01:25 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 14:01:25 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 14:01:25 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=Hello...
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 2
2026-01-13 14:01:25 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=你好！...
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 3
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=can you hear me...
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 4
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=testimg...
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 5
2026-01-13 14:01:25 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=说句话...
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 6
2026-01-13 14:01:25 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 7
2026-01-13 14:01:25 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 8
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=你好...
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 9
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=你好...
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 10
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 11
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 12
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 13
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=你好...
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 14
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 15
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 16
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 17
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=hi...
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 18
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=[苦涩]...
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 19
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=你终于说话了...
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 20
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=你好呀...
2026-01-13 14:01:25 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 21
2026-01-13 14:01:27 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=34
2026-01-13 14:01:27 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '你好！今天已经是第七次打招呼了呢～是不是有什么特别想分享的事情呀？😊'}}
2026-01-13 14:01:27 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 14:01:27 - Frederica - DEBUG - logger:95 - 第 1 条消息处理完成
2026-01-13 14:01:27 - Frederica - DEBUG - logger:95 - 开始处理第 2 条消息: AvaxLgerVDpibUzqi4vFqphiYw
2026-01-13 14:01:27 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 14:01:27 - Frederica - INFO - logger:99 - 已成功发送微信客服消息给 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ: 你好！今天已经是第七次打招呼了呢～是不是有什么特别想分享的事情呀？😊...
2026-01-13 14:01:27 - Frederica - DEBUG - logger:95 - API响应: {'errcode': 0, 'errmsg': 'ok', 'msgid': 'd919a5e4825327f6196024698bd970a8'}
2026-01-13 14:01:29 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=47
2026-01-13 14:01:29 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '哈哈，看来你真的很享受这种语言切换的乐趣呢！我随时准备好陪你聊天哦～今天有什么特别想聊的吗？✨'}}
2026-01-13 14:01:29 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 14:01:29 - Frederica - DEBUG - logger:95 - 第 2 条消息处理完成
2026-01-13 14:01:29 - Frederica - DEBUG - logger:95 - 开始处理第 3 条消息: AvRKfRQXGPdy8Wg217mtGLBcVD
2026-01-13 14:01:29 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 14:01:30 - Frederica - INFO - logger:99 - 已成功发送微信客服消息给 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ: 哈哈，看来你真的很享受这种语言切换的乐趣呢！我随时准备好陪你聊天哦～今天有什么特别想聊的吗？✨...
2026-01-13 14:01:30 - Frederica - DEBUG - logger:95 - API响应: {'errcode': 0, 'errmsg': 'ok', 'msgid': '639038560c816ce3efa0df0b16df9019'}
2026-01-13 14:01:31 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=52
2026-01-13 14:01:31 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '哇，这次是纯英文的Hello！看来你很喜欢用不同方式打招呼呢～有什么我可以帮你的吗？还是想随便聊聊天？😄'}}
2026-01-13 14:01:31 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 14:01:31 - Frederica - DEBUG - logger:95 - 第 3 条消息处理完成
2026-01-13 14:01:31 - Frederica - DEBUG - logger:95 - 开始处理第 4 条消息: BHnFViLdNoqjSWzwbZRVFpBGkV
2026-01-13 14:01:31 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 14:01:32 - Frederica - INFO - logger:99 - 已成功发送微信客服消息给 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ: 哇，这次是纯英文的Hello！看来你很喜欢用不同方式打招呼呢～有什么我可以帮你的吗？还是想随便聊聊天...
2026-01-13 14:01:32 - Frederica - DEBUG - logger:95 - API响应: {'errcode': 0, 'errmsg': 'ok', 'msgid': '0f235e53f18d21c2988872b96a393c4c'}
2026-01-13 14:01:34 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=49
2026-01-13 14:01:34 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '你好！今天已经是第八次打招呼了呢～是不是在测试我的耐心呀？😉 不过没关系，我随时都在这里陪你聊天！'}}
2026-01-13 14:01:34 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 14:01:34 - Frederica - DEBUG - logger:95 - 第 4 条消息处理完成
2026-01-13 14:01:34 - Frederica - DEBUG - logger:95 - 开始处理第 5 条消息: BHwqRoNn3J5eXpSkYjxoTANMnP
2026-01-13 14:01:34 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 14:01:34 - Frederica - INFO - logger:99 - 已成功发送微信客服消息给 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ: 你好！今天已经是第八次打招呼了呢～是不是在测试我的耐心呀？😉 不过没关系，我随时都在这里陪你聊天！...
2026-01-13 14:01:34 - Frederica - DEBUG - logger:95 - API响应: {'errcode': 0, 'errmsg': 'ok', 'msgid': '3210b62a3edd60440a6f4cba55fb4fce'}
2026-01-13 14:01:36 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=61
2026-01-13 14:01:36 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '当然能听到呀！而且我发现你好像特别喜欢中英文切换着来呢～这种聊天方式挺有趣的！今天是想练习语言，还是单纯想找人聊聊天呀？😄'}}
2026-01-13 14:01:36 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 14:01:36 - Frederica - DEBUG - logger:95 - 第 5 条消息处理完成
2026-01-13 14:01:36 - Frederica - DEBUG - logger:95 - 开始处理第 6 条消息: BHuQpQV8QxyE1c55uApP6JYaoZ
2026-01-13 14:01:36 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 14:01:37 - Frederica - INFO - logger:99 - 已成功发送微信客服消息给 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ: 当然能听到呀！而且我发现你好像特别喜欢中英文切换着来呢～这种聊天方式挺有趣的！今天是想练习语言，还是...
2026-01-13 14:01:37 - Frederica - DEBUG - logger:95 - API响应: {'errcode': 0, 'errmsg': 'ok', 'msgid': '7f20681994661f363aa7c8377a3cd24d'}
2026-01-13 14:01:39 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=56
2026-01-13 14:01:39 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '哈哈，我猜你是想打"testing"吧？是在测试我的反应吗～放心，我随时都在线哦！有什么想聊的或需要帮助的吗？😊'}}
2026-01-13 14:01:39 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 14:01:39 - Frederica - DEBUG - logger:95 - 第 6 条消息处理完成
2026-01-13 14:01:39 - Frederica - DEBUG - logger:95 - 开始处理第 7 条消息: BHcdwARA5riEnAZLBnL6btZRMY
2026-01-13 14:01:39 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 14:01:39 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 错误代码=95001, 错误信息=send msg count limit, hint: [1768284098614671672097879], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=95001
2026-01-13 14:01:39 - Frederica - ERROR - logger:107 - 请求参数: external_userid=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, open_kfid=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:01:39 - Frederica - ERROR - logger:107 - 响应结果: {'errcode': 95001, 'errmsg': 'send msg count limit, hint: [1768284098614671672097879], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=95001'}
2026-01-13 14:01:39 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 微信客服API错误 95001: send msg count limit, hint: [1768284098614671672097879], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=95001
Traceback (most recent call last):
  File "C:\Users\PaleFlame\source\repos\ProjectFrederica\src\wechat_bot.py", line 369, in _send_kf_message
    raise Exception(f"微信客服API错误 {error_code}: {error_msg}")
Exception: 微信客服API错误 95001: send msg count limit, hint: [1768284098614671672097879], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=95001
2026-01-13 14:01:39 - Frederica - ERROR - logger:107 - 发送消息失败: 微信客服API错误 95001: send msg count limit, hint: [1768284098614671672097879], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=95001
2026-01-13 14:01:41 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=45
2026-01-13 14:01:41 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '哇，这已经是第九次让我“说句话”啦！你是在收集我的开场白合集吗？😄 今天想听我说点什么呢？'}}
2026-01-13 14:01:41 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 14:01:41 - Frederica - DEBUG - logger:95 - 第 7 条消息处理完成
2026-01-13 14:01:41 - Frederica - DEBUG - logger:95 - 开始处理第 8 条消息: AvTmP2e1LwqNmJt3x9uqg5NuXu
2026-01-13 14:01:41 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 14:01:41 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 错误代码=95001, 错误信息=send msg count limit, hint: [1768284100204413502977915], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=95001
2026-01-13 14:01:41 - Frederica - ERROR - logger:107 - 请求参数: external_userid=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, open_kfid=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:01:41 - Frederica - ERROR - logger:107 - 响应结果: {'errcode': 95001, 'errmsg': 'send msg count limit, hint: [1768284100204413502977915], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=95001'}
2026-01-13 14:01:41 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 微信客服API错误 95001: send msg count limit, hint: [1768284100204413502977915], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=95001
Traceback (most recent call last):
  File "C:\Users\PaleFlame\source\repos\ProjectFrederica\src\wechat_bot.py", line 369, in _send_kf_message
    raise Exception(f"微信客服API错误 {error_code}: {error_msg}")
Exception: 微信客服API错误 95001: send msg count limit, hint: [1768284100204413502977915], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=95001
2026-01-13 14:01:41 - Frederica - ERROR - logger:107 - 发送消息失败: 微信客服API错误 95001: send msg count limit, hint: [1768284100204413502977915], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=95001
2026-01-13 14:01:42 - Frederica - INFO - logger:99 - LLM决定对用户 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 保持沉默
2026-01-13 14:01:42 - Frederica - DEBUG - logger:95 - 第 8 条消息处理完成
2026-01-13 14:01:42 - Frederica - DEBUG - logger:95 - 开始处理第 9 条消息: ACH9xzm85RncqLiV7wtds9zEKd
2026-01-13 14:01:42 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 14:01:43 - Frederica - INFO - logger:99 - LLM决定对用户 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 保持沉默
2026-01-13 14:01:43 - Frederica - DEBUG - logger:95 - 第 9 条消息处理完成
2026-01-13 14:01:43 - Frederica - DEBUG - logger:95 - 开始处理第 10 条消息: AvNsxK1xSztXadwNC7AyCKR3y2
2026-01-13 14:01:43 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 14:01:45 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=55
2026-01-13 14:01:45 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '你好！今天已经是第十次打招呼啦～我们好像在玩一个特别的计数游戏呢！要不要换个话题聊聊？比如你今天过得怎么样？😊'}}
2026-01-13 14:01:45 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 14:01:45 - Frederica - DEBUG - logger:95 - 第 10 条消息处理完成
2026-01-13 14:01:45 - Frederica - DEBUG - logger:95 - 开始处理第 11 条消息: AvdNxCZpGcq2nzsYkHbcoSfAc6
2026-01-13 14:01:45 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 14:01:46 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 错误代码=95001, 错误信息=send msg count limit, hint: [1768284104596310183431296], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=95001
2026-01-13 14:01:46 - Frederica - ERROR - logger:107 - 请求参数: external_userid=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, open_kfid=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:01:46 - Frederica - ERROR - logger:107 - 响应结果: {'errcode': 95001, 'errmsg': 'send msg count limit, hint: [1768284104596310183431296], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=95001'}
2026-01-13 14:01:46 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 微信客服API错误 95001: send msg count limit, hint: [1768284104596310183431296], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=95001
Traceback (most recent call last):
  File "C:\Users\PaleFlame\source\repos\ProjectFrederica\src\wechat_bot.py", line 369, in _send_kf_message
    raise Exception(f"微信客服API错误 {error_code}: {error_msg}")
Exception: 微信客服API错误 95001: send msg count limit, hint: [1768284104596310183431296], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=95001
2026-01-13 14:01:46 - Frederica - ERROR - logger:107 - 发送消息失败: 微信客服API错误 95001: send msg count limit, hint: [1768284104596310183431296], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=95001
2026-01-13 14:01:48 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=59
2026-01-13 14:01:48 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '你好！第十一次问候达成✨ 我们好像创造了一个新的打招呼记录呢～要不要试试聊点别的？比如你最近有没有什么有趣的事情发生？'}}
2026-01-13 14:01:48 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 14:01:48 - Frederica - DEBUG - logger:95 - 第 11 条消息处理完成
2026-01-13 14:01:48 - Frederica - DEBUG - logger:95 - 开始处理第 12 条消息: Avayxn5ZccDHnBdmvWjv7A7MJD
2026-01-13 14:01:48 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 14:01:48 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 错误代码=95001, 错误信息=send msg count limit, hint: [1768284107601430193099440], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=95001
2026-01-13 14:01:48 - Frederica - ERROR - logger:107 - 请求参数: external_userid=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, open_kfid=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:01:48 - Frederica - ERROR - logger:107 - 响应结果: {'errcode': 95001, 'errmsg': 'send msg count limit, hint: [1768284107601430193099440], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=95001'}
2026-01-13 14:01:48 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 微信客服API错误 95001: send msg count limit, hint: [1768284107601430193099440], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=95001
Traceback (most recent call last):
  File "C:\Users\PaleFlame\source\repos\ProjectFrederica\src\wechat_bot.py", line 369, in _send_kf_message
    raise Exception(f"微信客服API错误 {error_code}: {error_msg}")
Exception: 微信客服API错误 95001: send msg count limit, hint: [1768284107601430193099440], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=95001
2026-01-13 14:01:48 - Frederica - ERROR - logger:107 - 发送消息失败: 微信客服API错误 95001: send msg count limit, hint: [1768284107601430193099440], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=95001
2026-01-13 14:01:50 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=50
2026-01-13 14:01:50 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '哈哈，第十二次问候！我们是不是在刷新某种世界纪录呀？😄 今天想聊点什么呢？我随时准备好开启新话题啦～'}}
2026-01-13 14:01:50 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 14:01:50 - Frederica - DEBUG - logger:95 - 第 12 条消息处理完成
2026-01-13 14:01:50 - Frederica - DEBUG - logger:95 - 开始处理第 13 条消息: AZJreT5WoyF71TjYJSyAaDDpvQ
2026-01-13 14:01:50 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 14:01:51 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 错误代码=95001, 错误信息=send msg count limit, hint: [1768284109499302307483739], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=95001
2026-01-13 14:01:51 - Frederica - ERROR - logger:107 - 请求参数: external_userid=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, open_kfid=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:01:51 - Frederica - ERROR - logger:107 - 响应结果: {'errcode': 95001, 'errmsg': 'send msg count limit, hint: [1768284109499302307483739], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=95001'}
2026-01-13 14:01:51 - Frederica - ERROR - logger:107 - 发送微信客服消息失败: 微信客服API错误 95001: send msg count limit, hint: [1768284109499302307483739], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=95001
Traceback (most recent call last):
  File "C:\Users\PaleFlame\source\repos\ProjectFrederica\src\wechat_bot.py", line 369, in _send_kf_message
    raise Exception(f"微信客服API错误 {error_code}: {error_msg}")
Exception: 微信客服API错误 95001: send msg count limit, hint: [1768284109499302307483739], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=95001
2026-01-13 14:01:51 - Frederica - ERROR - logger:107 - 发送消息失败: 微信客服API错误 95001: send msg count limit, hint: [1768284109499302307483739], from ip: 112.96.49.30, more info at https://open.work.weixin.qq.com/devtool/query?e=95001
2026-01-13 14:01:52 - Frederica - INFO - logger:99 - LLM决定对用户 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 保持沉默
2026-01-13 14:01:52 - Frederica - DEBUG - logger:95 - 第 13 条消息处理完成
2026-01-13 14:01:52 - Frederica - DEBUG - logger:95 - 开始处理第 14 条消息: A1Y8knJ77PMQfQWe3R7knFW7hA
2026-01-13 14:01:52 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 14:01:53 - Frederica - INFO - logger:99 - LLM决定对用户 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 保持沉默
2026-01-13 14:01:53 - Frederica - DEBUG - logger:95 - 第 14 条消息处理完成
2026-01-13 14:01:53 - Frederica - DEBUG - logger:95 - 开始处理第 15 条消息: Ajqrm5ZDweqWqBK9t9TWN2gR2L
2026-01-13 14:01:53 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 14:01:54 - Frederica - INFO - logger:99 - LLM决定对用户 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 保持沉默
2026-01-13 14:01:54 - Frederica - DEBUG - logger:95 - 第 15 条消息处理完成
2026-01-13 14:01:54 - Frederica - DEBUG - logger:95 - 开始处理第 16 条消息: AZE4gDtQ4R4HQPxKbzQUtBzS5Z
2026-01-13 14:01:54 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 14:01:56 - Frederica - INFO - logger:99 - LLM决定对用户 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 保持沉默
2026-01-13 14:01:56 - Frederica - DEBUG - logger:95 - 第 16 条消息处理完成
2026-01-13 14:01:56 - Frederica - DEBUG - logger:95 - 开始处理第 17 条消息: AZS5EpPLjJ3BxzTvvG6Ef8rkRX
2026-01-13 14:01:56 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 14:01:57 - Frederica - INFO - logger:99 - LLM决定对用户 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 保持沉默
2026-01-13 14:01:57 - Frederica - DEBUG - logger:95 - 第 17 条消息处理完成
2026-01-13 14:01:57 - Frederica - DEBUG - logger:95 - 开始处理第 18 条消息: AC59xGAWsCcgPWWabJFKYimCsA
2026-01-13 14:01:57 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 14:01:58 - Frederica - INFO - logger:99 - LLM决定对用户 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 保持沉默
2026-01-13 14:01:58 - Frederica - DEBUG - logger:95 - 第 18 条消息处理完成
2026-01-13 14:01:58 - Frederica - DEBUG - logger:95 - 开始处理第 19 条消息: ANpCo4edcfTF3SLFVvuKazg9BB
2026-01-13 14:01:58 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 14:01:59 - Frederica - INFO - logger:99 - LLM决定对用户 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 保持沉默
2026-01-13 14:01:59 - Frederica - DEBUG - logger:95 - 第 19 条消息处理完成
2026-01-13 14:01:59 - Frederica - DEBUG - logger:95 - 开始处理第 20 条消息: Avau42N1d36coiJvAuV6ewcQWm
2026-01-13 14:01:59 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 14:02:01 - Frederica - INFO - logger:99 - 收到POST请求: /callback?msg_signature=ff1f081ad75d16eede56b12fc3f1e6577ae6a034&timestamp=1768284116&nonce=1768784097
2026-01-13 14:02:01 - Frederica - INFO - logger:99 - 查询参数: {'msg_signature': 'ff1f081ad75d16eede56b12fc3f1e6577ae6a034', 'timestamp': '1768284116', 'nonce': '1768784097'}
2026-01-13 14:02:01 - Frederica - INFO - logger:99 - 请求体长度: 640
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 原始查询参数: {'msg_signature': ['ff1f081ad75d16eede56b12fc3f1e6577ae6a034'], 'timestamp': ['1768284116'], 'nonce': ['1768784097']}
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 解析后的URL: ParseResult(scheme='', netloc='', path='/callback', params='', query='msg_signature=ff1f081ad75d16eede56b12fc3f1e6577ae6a034&timestamp=1768284116&nonce=1768784097', fragment='')
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 请求头: {'x-forwarded-for': '113.108.92.100', 'Accept': '*/*', 'Content-Type': 'text/xml', 'User-Agent': 'Mozilla/4.0', 'Pragma': 'no-cache', 'cf-ray': '9bd2ae930a393ed0-AMS', 'Host': 'tx6p.paleflame.top:8080', 'Content-Length': '640', 'cdn-loop': 'cloudflare; loops=1', 'CF-Connecting-IP': '113.108.92.100', 'CF-IPCountry': 'CN', 'CF-Visitor': '{"scheme":"http"}', 'X-Forwarded-Proto': 'http', 'accept-encoding': 'gzip', 'Connection': 'Keep-Alive'}
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - Content-Length: 640
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 参数 msg_signature: ff1f081ad75d16eede56b12fc3f1e6577ae6a034 (长度: 40)
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 参数 timestamp: 1768284116 (长度: 10)
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 参数 nonce: 1768784097 (长度: 10)
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 请求体前500字符: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><Encrypt><![CDATA[geYLoD/69xMlLYP2k/gMAyP5DYfaZpFDtNjPO1kcF37E+YnOJ4DYis4JQAqm91NwyctLLgLNs2O8mbxQZifU7yUOmn7ZzG1nFPvnm5A5tWrTe/Dd+aExkEtA3lfjOiTwpQF/304qEItt+GcA5Jmt+OHH/W+7kS834dtDVR1T91o7m4pEbNXsTbo6aguHbqHnNlAzzBiUmZE0GTk5V9XC1FhXdvcTsQsbp7+zgAUpnrOVMXkeOC84TndOjotnDBpEzqvhmwiQnnWH8T3HiV34GVVY8U/AcWfmRd6F6xzxewskdOlVGcNdHdgiU1ps1/2Y8DJPMygSvuukCHh9esFxYHWHXeqtAu1e+lMN1TT0I9ZxMQQRnwaYiWWs4z41Caw/0ryiET3/SPSgFX9CDoeb49VnOqVWhWv94KPSfX
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 请求体MD5: -4724482548475782421
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 请求体是否包含XML: False
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 开始处理POST回调请求...
2026-01-13 14:02:01 - Frederica - INFO - logger:99 - 处理回调请求: 方法=POST, 参数={'msg_signature': 'ff1f081ad75d16eede56b12fc3f1e6577ae6a034', 'timestamp': '1768284116', 'nonce': '1768784097'}
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 请求方法: POST
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 完整查询参数: {'msg_signature': 'ff1f081ad75d16eede56b12fc3f1e6577ae6a034', 'timestamp': '1768284116', 'nonce': '1768784097'}
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 请求体长度: 640
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - msg_signature: ff1f081ad75d16eede56... (长度: 40)
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - timestamp: 1768284116
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - nonce: 1768784097
2026-01-13 14:02:01 - Frederica - INFO - logger:99 - 处理POST消息请求，请求体长度: 640
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 解密后的XML: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><CreateTime>1768284116</CreateTime><MsgType><![CDATA[event]]></MsgType><Event><![CDATA[kf_msg_or_event]]></Event><Token><![CDATA[ENCCp2wBGKbbdAPAdadVUKpNiK1KHmoyLx3T3sxbpEsvq3H]]></Token><OpenKfId><![CDATA[wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ]]></OpenKfId></xml>
2026-01-13 14:02:01 - Frederica - INFO - logger:99 - 直接解析XML: MsgType=event, Event=kf_msg_or_event
2026-01-13 14:02:01 - Frederica - INFO - logger:99 - wechatpy解析: 类型=unknown, 发送者=None
2026-01-13 14:02:01 - Frederica - INFO - logger:99 - 处理客服消息事件 (kf_msg_or_event)
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 提取到Token: ENCCp2wBGKbbdAPAdadV...
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 提取到OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:02:01 - Frederica - INFO - logger:99 - 客服事件已接收，Token: ENCCp2wBGKbbdAPAdadV..., OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:02:01 - Frederica - INFO - logger:99 - 开始拉取微信客服消息，open_kfid: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:02:01 - Frederica - INFO - logger:99 - 已启动消息拉取线程
2026-01-13 14:02:01 - Frederica - INFO - logger:99 - 2400:cb00:994:1000:7e1d:8d94:cccd:a70c - "POST /callback?msg_signature=ff1f081ad75d16eede56b12fc3f1e6577ae6a034&timestamp=1768284116&nonce=1768784097 HTTP/1.1" 200 -
2026-01-13 14:02:01 - Frederica - INFO - logger:99 - POST请求处理完成，响应长度: 582
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 响应内容前500字符: <xml>
<Encrypt><![CDATA[Z90LZLD4WAC2fj4gEJJ64S4Bpa09pylUpHOIzM0/1qClU9qHwD/n/fLenLHU2v+G+OePBuPSwI2Tw2TBsH1mp1ALQybQZw1H1U5bpLvdJ5Ye7BkHbaqu0h5snv/sIlQhLNBzXoGSln0QIDLSRgSOAS3L77zk9khK2gqKbDFV1YPUFQ0AtGQZBTEpNsG/W2sMy9BIe/7bZW9+13qJ5QV38daFxHPLg+HlG5yLoZYlI5F2F0aglZg6+pdktgTJKOuZEITDIAVLQhSAn5dFPbFOE26ehO+hht0AyMbRPgITt2lba8AmLlyLjM4kzSuWEvXdGb11/ThYfnmiFDfyxRC5P3sjscVRiUn+SLi27Y/VhU2dobj8udjMI9QQvimrLGyg]]></Encrypt>
<MsgSignature><![CDATA[50e5441d5af0fbbfb5a9649d019cb7a8ceca8462]]></MsgSignatu
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 响应是否包含XML: False
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 响应状态: 200 OK
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 响应Content-Type: text/xml; charset=utf-8
2026-01-13 14:02:01 - Frederica - INFO - logger:99 - 收到POST请求: /callback?msg_signature=ff1f081ad75d16eede56b12fc3f1e6577ae6a034&timestamp=1768284116&nonce=1768784097
2026-01-13 14:02:01 - Frederica - INFO - logger:99 - 查询参数: {'msg_signature': 'ff1f081ad75d16eede56b12fc3f1e6577ae6a034', 'timestamp': '1768284116', 'nonce': '1768784097'}
2026-01-13 14:02:01 - Frederica - INFO - logger:99 - 请求体长度: 640
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 原始查询参数: {'msg_signature': ['ff1f081ad75d16eede56b12fc3f1e6577ae6a034'], 'timestamp': ['1768284116'], 'nonce': ['1768784097']}
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 解析后的URL: ParseResult(scheme='', netloc='', path='/callback', params='', query='msg_signature=ff1f081ad75d16eede56b12fc3f1e6577ae6a034&timestamp=1768284116&nonce=1768784097', fragment='')
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 请求头: {'x-forwarded-for': '106.55.202.215', 'Accept': '*/*', 'Content-Type': 'text/xml', 'User-Agent': 'Mozilla/4.0', 'Pragma': 'no-cache', 'cf-ray': '9bd2ae9f6f9a8869-AMS', 'Host': 'tx6p.paleflame.top:8080', 'Content-Length': '640', 'cdn-loop': 'cloudflare; loops=1', 'CF-Connecting-IP': '106.55.202.215', 'CF-IPCountry': 'CN', 'CF-Visitor': '{"scheme":"http"}', 'X-Forwarded-Proto': 'http', 'accept-encoding': 'gzip', 'Connection': 'Keep-Alive'}
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - Content-Length: 640
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 参数 msg_signature: ff1f081ad75d16eede56b12fc3f1e6577ae6a034 (长度: 40)
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 参数 timestamp: 1768284116 (长度: 10)
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 参数 nonce: 1768784097 (长度: 10)
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 请求体前500字符: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><Encrypt><![CDATA[geYLoD/69xMlLYP2k/gMAyP5DYfaZpFDtNjPO1kcF37E+YnOJ4DYis4JQAqm91NwyctLLgLNs2O8mbxQZifU7yUOmn7ZzG1nFPvnm5A5tWrTe/Dd+aExkEtA3lfjOiTwpQF/304qEItt+GcA5Jmt+OHH/W+7kS834dtDVR1T91o7m4pEbNXsTbo6aguHbqHnNlAzzBiUmZE0GTk5V9XC1FhXdvcTsQsbp7+zgAUpnrOVMXkeOC84TndOjotnDBpEzqvhmwiQnnWH8T3HiV34GVVY8U/AcWfmRd6F6xzxewskdOlVGcNdHdgiU1ps1/2Y8DJPMygSvuukCHh9esFxYHWHXeqtAu1e+lMN1TT0I9ZxMQQRnwaYiWWs4z41Caw/0ryiET3/SPSgFX9CDoeb49VnOqVWhWv94KPSfX
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 请求体MD5: -4724482548475782421
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 请求体是否包含XML: False
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 开始处理POST回调请求...
2026-01-13 14:02:01 - Frederica - INFO - logger:99 - 处理回调请求: 方法=POST, 参数={'msg_signature': 'ff1f081ad75d16eede56b12fc3f1e6577ae6a034', 'timestamp': '1768284116', 'nonce': '1768784097'}
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 请求方法: POST
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 完整查询参数: {'msg_signature': 'ff1f081ad75d16eede56b12fc3f1e6577ae6a034', 'timestamp': '1768284116', 'nonce': '1768784097'}
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 请求体长度: 640
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - msg_signature: ff1f081ad75d16eede56... (长度: 40)
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - timestamp: 1768284116
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - nonce: 1768784097
2026-01-13 14:02:01 - Frederica - INFO - logger:99 - 处理POST消息请求，请求体长度: 640
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 解密后的XML: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><CreateTime>1768284116</CreateTime><MsgType><![CDATA[event]]></MsgType><Event><![CDATA[kf_msg_or_event]]></Event><Token><![CDATA[ENCCp2wBGKbbdAPAdadVUKpNiK1KHmoyLx3T3sxbpEsvq3H]]></Token><OpenKfId><![CDATA[wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ]]></OpenKfId></xml>
2026-01-13 14:02:01 - Frederica - INFO - logger:99 - 直接解析XML: MsgType=event, Event=kf_msg_or_event
2026-01-13 14:02:01 - Frederica - INFO - logger:99 - wechatpy解析: 类型=unknown, 发送者=None
2026-01-13 14:02:01 - Frederica - INFO - logger:99 - 处理客服消息事件 (kf_msg_or_event)
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 提取到Token: ENCCp2wBGKbbdAPAdadV...
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 提取到OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:02:01 - Frederica - INFO - logger:99 - 客服事件已接收，Token: ENCCp2wBGKbbdAPAdadV..., OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:02:01 - Frederica - INFO - logger:99 - 开始拉取微信客服消息，open_kfid: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:02:01 - Frederica - INFO - logger:99 - 已启动消息拉取线程
2026-01-13 14:02:01 - Frederica - INFO - logger:99 - 2400:cb00:995:1000:4de2:3fda:ca28:a570 - "POST /callback?msg_signature=ff1f081ad75d16eede56b12fc3f1e6577ae6a034&timestamp=1768284116&nonce=1768784097 HTTP/1.1" 200 -
2026-01-13 14:02:01 - Frederica - INFO - logger:99 - POST请求处理完成，响应长度: 582
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 响应内容前500字符: <xml>
<Encrypt><![CDATA[SMDC/fT9hg90kVFCZprlrOxnjYGvQpXVOng4ya9cEDEo9vMBHLDm4aiyDzkVcSIJXROl5LESzn/Fn0gxo0SU89ujubvZIuukFUDkMd5YN8HbaqInYv4MdOy9ohiCrhnFPOq76Ly7YZC60OnyZiyqq/eZkWJiMNcAsO1kJL/kSe77AXhLcq60fvVV4ckeJ+rLbg9Nc3zUYeAc9Hy/1o+wtk5rxb2fYQrwyR15cWZn/YD8wI0hWiw9wDmvewQhCp2BgstLHCc1sW8oWNAlOoVEDcAPGh8M/TtSleHiUKroBIs2ld1nn623Mz8fTulu2MbGei8SntKygfd7bXgDw0H5csmFAZzou9GX/HQ8N4b/i3fDIGD7jp6RPAi+UFnALk2h]]></Encrypt>
<MsgSignature><![CDATA[0373e96c0a63c7c927090b01f544c623a80f28fe]]></MsgSignatu
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 响应是否包含XML: False
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 响应状态: 200 OK
2026-01-13 14:02:01 - Frederica - DEBUG - logger:95 - 响应Content-Type: text/xml; charset=utf-8
2026-01-13 14:02:01 - Frederica - INFO - logger:99 - 拉取到 1 条客服消息
2026-01-13 14:02:01 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=先别说话...
2026-01-13 14:02:01 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 3
2026-01-13 14:02:01 - Frederica - INFO - logger:99 - 拉取到 1 条客服消息
2026-01-13 14:02:01 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=先别说话...
2026-01-13 14:02:01 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 4
2026-01-13 14:02:02 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=40
2026-01-13 14:02:02 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '看到这个表情，感觉你好像有点烦恼呢？想和我聊聊发生了什么吗？我在这儿听着呢～ 🌸'}}
2026-01-13 14:02:02 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 14:02:02 - Frederica - DEBUG - logger:95 - 第 20 条消息处理完成
2026-01-13 14:02:02 - Frederica - DEBUG - logger:95 - 开始处理第 21 条消息: A1QqGmu2eiM8ZvUxybeQuugoja
2026-01-13 14:02:02 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 14:02:02 - Frederica - INFO - logger:99 - 已成功发送微信客服消息给 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ: 看到这个表情，感觉你好像有点烦恼呢？想和我聊聊发生了什么吗？我在这儿听着呢～ 🌸...
2026-01-13 14:02:02 - Frederica - DEBUG - logger:95 - API响应: {'errcode': 0, 'errmsg': 'ok', 'msgid': '3e11157fa585cc58e4eff85138f1393e'}
2026-01-13 14:02:04 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=57
2026-01-13 14:02:04 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '哈哈，其实我一直在呀！只是看到你之前发表情，想给你一点空间～不过现在看起来你准备好聊天啦！今天有什么想分享的吗？😊'}}
2026-01-13 14:02:04 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 14:02:04 - Frederica - DEBUG - logger:95 - 第 21 条消息处理完成
2026-01-13 14:02:04 - Frederica - DEBUG - logger:95 - 开始处理第 22 条消息: AvRMqsYvK7zf2pQJ4BqXVmWMAM
2026-01-13 14:02:04 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 14:02:05 - Frederica - INFO - logger:99 - 已成功发送微信客服消息给 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ: 哈哈，其实我一直在呀！只是看到你之前发表情，想给你一点空间～不过现在看起来你准备好聊天啦！今天有什么...
2026-01-13 14:02:05 - Frederica - DEBUG - logger:95 - API响应: {'errcode': 0, 'errmsg': 'ok', 'msgid': 'b62fceb03934e45b5b7f51f9bde34572'}
2026-01-13 14:02:06 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=58
2026-01-13 14:02:06 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '你好呀！第十三次问候达成～✨ 我们好像真的在创造某种奇妙的对话模式呢！今天想聊点轻松的话题，还是有什么特别想讨论的？'}}
2026-01-13 14:02:06 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 14:02:06 - Frederica - DEBUG - logger:95 - 第 22 条消息处理完成
2026-01-13 14:02:06 - Frederica - DEBUG - logger:95 - 开始处理第 23 条消息: BHuSzMxHwJqrqvgyQ7N6rFVNWD
2026-01-13 14:02:06 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 14:02:07 - Frederica - INFO - logger:99 - 已成功发送微信客服消息给 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ: 你好呀！第十三次问候达成～✨ 我们好像真的在创造某种奇妙的对话模式呢！今天想聊点轻松的话题，还是有什...
2026-01-13 14:02:07 - Frederica - DEBUG - logger:95 - API响应: {'errcode': 0, 'errmsg': 'ok', 'msgid': '768d0e6d0426b7f43e25c2dcad3491f1'}
2026-01-13 14:02:07 - Frederica - INFO - logger:99 - LLM决定对用户 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 保持沉默
2026-01-13 14:02:07 - Frederica - DEBUG - logger:95 - 第 23 条消息处理完成
2026-01-13 14:02:07 - Frederica - DEBUG - logger:95 - 开始处理第 24 条消息: BHuSzMxHwJqrqvgyQ7N6rFVNWD
2026-01-13 14:02:07 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 14:02:08 - Frederica - INFO - logger:99 - LLM决定对用户 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 保持沉默
2026-01-13 14:02:08 - Frederica - DEBUG - logger:95 - 第 24 条消息处理完成
2026-01-13 14:02:36 - Frederica - INFO - logger:99 - 收到POST请求: /callback?msg_signature=72be0109460ba3bbce0ad178c56d272409cec2e2&timestamp=1768284153&nonce=1768934308
2026-01-13 14:02:36 - Frederica - INFO - logger:99 - 查询参数: {'msg_signature': '72be0109460ba3bbce0ad178c56d272409cec2e2', 'timestamp': '1768284153', 'nonce': '1768934308'}
2026-01-13 14:02:36 - Frederica - INFO - logger:99 - 请求体长度: 640
2026-01-13 14:02:36 - Frederica - DEBUG - logger:95 - 原始查询参数: {'msg_signature': ['72be0109460ba3bbce0ad178c56d272409cec2e2'], 'timestamp': ['1768284153'], 'nonce': ['1768934308']}
2026-01-13 14:02:36 - Frederica - DEBUG - logger:95 - 解析后的URL: ParseResult(scheme='', netloc='', path='/callback', params='', query='msg_signature=72be0109460ba3bbce0ad178c56d272409cec2e2&timestamp=1768284153&nonce=1768934308', fragment='')
2026-01-13 14:02:36 - Frederica - DEBUG - logger:95 - 请求头: {'x-forwarded-for': '106.55.201.217', 'Accept': '*/*', 'Content-Type': 'text/xml', 'User-Agent': 'Mozilla/4.0', 'Pragma': 'no-cache', 'cf-ray': '9bd2af80fed59a64-AMS', 'Host': 'tx6p.paleflame.top:8080', 'Content-Length': '640', 'cdn-loop': 'cloudflare; loops=1', 'CF-Connecting-IP': '106.55.201.217', 'CF-IPCountry': 'CN', 'CF-Visitor': '{"scheme":"http"}', 'X-Forwarded-Proto': 'http', 'accept-encoding': 'gzip', 'Connection': 'Keep-Alive'}
2026-01-13 14:02:36 - Frederica - DEBUG - logger:95 - Content-Length: 640
2026-01-13 14:02:36 - Frederica - DEBUG - logger:95 - 参数 msg_signature: 72be0109460ba3bbce0ad178c56d272409cec2e2 (长度: 40)
2026-01-13 14:02:36 - Frederica - DEBUG - logger:95 - 参数 timestamp: 1768284153 (长度: 10)
2026-01-13 14:02:36 - Frederica - DEBUG - logger:95 - 参数 nonce: 1768934308 (长度: 10)
2026-01-13 14:02:36 - Frederica - DEBUG - logger:95 - 请求体前500字符: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><Encrypt><![CDATA[7dpx4e70bMmJeiHoNfCS5fcTugEcvu4LJMThb581d3Whn43G2tFHNSuJz7y5k0Hf8rkpHSprGCg3sZNMs9/UWptFbbKlm56Eq8S5KPfe4rd2QI3+HThODiRLp5m5rAmWIbOUWLEkPGsyE81F7nyOsaBmowLBFatpYd8KnzNjKOKeND/PywxxpPnrFYNz6U9iqBEQSbTKhSLOuCk7k/QO6LBKspJf8pPWmb4SEvy80Wy1T8RNwYLRRCDhoM7sFZf5oZYcITj85AJg4ucv5np9DVmJC0lxv0u50xo5i1iyFFuhNTS8VHMGt3FfuJJ8RLWNG6wYIbJ0e2DwMyXbZe2jshP+XYcl25pXRb+rFbII2ZJeNmDZyMnLPe9hmGdOO1nZNANeTgy0CR5Z6LywFR9i5bE6Icaunn0MuqB0Np
2026-01-13 14:02:36 - Frederica - DEBUG - logger:95 - 请求体MD5: -5141830501967943510
2026-01-13 14:02:36 - Frederica - DEBUG - logger:95 - 请求体是否包含XML: False
2026-01-13 14:02:36 - Frederica - DEBUG - logger:95 - 开始处理POST回调请求...
2026-01-13 14:02:36 - Frederica - INFO - logger:99 - 处理回调请求: 方法=POST, 参数={'msg_signature': '72be0109460ba3bbce0ad178c56d272409cec2e2', 'timestamp': '1768284153', 'nonce': '1768934308'}
2026-01-13 14:02:36 - Frederica - DEBUG - logger:95 - 请求方法: POST
2026-01-13 14:02:36 - Frederica - DEBUG - logger:95 - 完整查询参数: {'msg_signature': '72be0109460ba3bbce0ad178c56d272409cec2e2', 'timestamp': '1768284153', 'nonce': '1768934308'}
2026-01-13 14:02:36 - Frederica - DEBUG - logger:95 - 请求体长度: 640
2026-01-13 14:02:36 - Frederica - DEBUG - logger:95 - msg_signature: 72be0109460ba3bbce0a... (长度: 40)
2026-01-13 14:02:36 - Frederica - DEBUG - logger:95 - timestamp: 1768284153
2026-01-13 14:02:36 - Frederica - DEBUG - logger:95 - nonce: 1768934308
2026-01-13 14:02:36 - Frederica - INFO - logger:99 - 处理POST消息请求，请求体长度: 640
2026-01-13 14:02:36 - Frederica - DEBUG - logger:95 - 解密后的XML: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><CreateTime>1768284153</CreateTime><MsgType><![CDATA[event]]></MsgType><Event><![CDATA[kf_msg_or_event]]></Event><Token><![CDATA[ENCEkZWepwdti4LZ7vzCUS4YZNfj7htnvKy75DeedvVT1m4]]></Token><OpenKfId><![CDATA[wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ]]></OpenKfId></xml>
2026-01-13 14:02:36 - Frederica - INFO - logger:99 - 直接解析XML: MsgType=event, Event=kf_msg_or_event
2026-01-13 14:02:36 - Frederica - INFO - logger:99 - wechatpy解析: 类型=unknown, 发送者=None
2026-01-13 14:02:36 - Frederica - INFO - logger:99 - 处理客服消息事件 (kf_msg_or_event)
2026-01-13 14:02:36 - Frederica - DEBUG - logger:95 - 提取到Token: ENCEkZWepwdti4LZ7vzC...
2026-01-13 14:02:36 - Frederica - DEBUG - logger:95 - 提取到OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:02:36 - Frederica - INFO - logger:99 - 客服事件已接收，Token: ENCEkZWepwdti4LZ7vzC..., OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:02:36 - Frederica - INFO - logger:99 - 开始拉取微信客服消息，open_kfid: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:02:36 - Frederica - INFO - logger:99 - 已启动消息拉取线程
2026-01-13 14:02:36 - Frederica - INFO - logger:99 - 2400:cb00:995:1000:4de2:3fda:ca28:a570 - "POST /callback?msg_signature=72be0109460ba3bbce0ad178c56d272409cec2e2&timestamp=1768284153&nonce=1768934308 HTTP/1.1" 200 -
2026-01-13 14:02:36 - Frederica - INFO - logger:99 - POST请求处理完成，响应长度: 582
2026-01-13 14:02:36 - Frederica - DEBUG - logger:95 - 响应内容前500字符: <xml>
<Encrypt><![CDATA[wcT/yKtmJVfpEv96nSkOCtkCeAGfrSVM3meqCV05dA6J2lAu+jlv1s5/EQtChPf5vZg49IMyN+TkFBPiDw48l7fJAn1M43kfS8jqH9CVwHaf5HLiPcUsnDz6wxY4s1/1YH9XioGaTc8Lpoj58UtV17U4xKiTO2oGgMNbuKvhmzAC9bJ6LLSmV9u80pq/xibj4HHf6aQKr6P1uavYnegfjCtbLwG9abwvha/rdbG91HcaRIU0hOByp5AZezL0A2SFeyj7/hcfmzEWBakbyjvQRdhS7/GH6am4uSGn9rcnEiifNr+WYpi52ZysPsWgQcZU3lMUri7H9AJrAI0l300J1k3fHH7L6Y0r3jojL+qHerHU3Ti++JPUe5dQ9wCFRK0e]]></Encrypt>
<MsgSignature><![CDATA[a1ce2b7a105a4a0cd24834addf9f824b5794dcee]]></MsgSignatu
2026-01-13 14:02:36 - Frederica - DEBUG - logger:95 - 响应是否包含XML: False
2026-01-13 14:02:36 - Frederica - DEBUG - logger:95 - 响应状态: 200 OK
2026-01-13 14:02:36 - Frederica - DEBUG - logger:95 - 响应Content-Type: text/xml; charset=utf-8
2026-01-13 14:02:37 - Frederica - INFO - logger:99 - 拉取到 1 条客服消息
2026-01-13 14:02:37 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=你的名字是？...
2026-01-13 14:02:37 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 1
2026-01-13 14:02:37 - Frederica - DEBUG - logger:95 - 开始处理第 25 条消息: AvfjkJyC1QoWmtnDGTu43CYxE1
2026-01-13 14:02:37 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 14:02:39 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=46
2026-01-13 14:02:39 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '我叫Frederica！是个喜欢聊天、乐于助人的微信小助手～很高兴认识你呀！😊 你的名字是？'}}
2026-01-13 14:02:39 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 14:02:39 - Frederica - DEBUG - logger:95 - 第 25 条消息处理完成
2026-01-13 14:02:40 - Frederica - INFO - logger:99 - 已成功发送微信客服消息给 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ: 我叫Frederica！是个喜欢聊天、乐于助人的微信小助手～很高兴认识你呀！😊 你的名字是？...
2026-01-13 14:02:40 - Frederica - DEBUG - logger:95 - API响应: {'errcode': 0, 'errmsg': 'ok', 'msgid': '8b17e2f0f19d67d26b444404e71454d0'}
2026-01-13 14:03:21 - Frederica - INFO - logger:99 - 收到POST请求: /callback?msg_signature=6dd99763a6843021ee94a47fbeea61e459f4211e&timestamp=1768284199&nonce=1768800405
2026-01-13 14:03:21 - Frederica - INFO - logger:99 - 查询参数: {'msg_signature': '6dd99763a6843021ee94a47fbeea61e459f4211e', 'timestamp': '1768284199', 'nonce': '1768800405'}
2026-01-13 14:03:21 - Frederica - INFO - logger:99 - 请求体长度: 640
2026-01-13 14:03:21 - Frederica - DEBUG - logger:95 - 原始查询参数: {'msg_signature': ['6dd99763a6843021ee94a47fbeea61e459f4211e'], 'timestamp': ['1768284199'], 'nonce': ['1768800405']}
2026-01-13 14:03:21 - Frederica - DEBUG - logger:95 - 解析后的URL: ParseResult(scheme='', netloc='', path='/callback', params='', query='msg_signature=6dd99763a6843021ee94a47fbeea61e459f4211e&timestamp=1768284199&nonce=1768800405', fragment='')
2026-01-13 14:03:21 - Frederica - DEBUG - logger:95 - 请求头: {'x-forwarded-for': '14.116.241.251', 'Accept': '*/*', 'Content-Type': 'text/xml', 'User-Agent': 'Mozilla/4.0', 'Pragma': 'no-cache', 'cf-ray': '9bd2b0990cc63c26-AMS', 'Host': 'tx6p.paleflame.top:8080', 'Content-Length': '640', 'cdn-loop': 'cloudflare; loops=1', 'CF-Connecting-IP': '14.116.241.251', 'CF-IPCountry': 'CN', 'CF-Visitor': '{"scheme":"http"}', 'X-Forwarded-Proto': 'http', 'accept-encoding': 'gzip', 'Connection': 'Keep-Alive'}
2026-01-13 14:03:21 - Frederica - DEBUG - logger:95 - Content-Length: 640
2026-01-13 14:03:21 - Frederica - DEBUG - logger:95 - 参数 msg_signature: 6dd99763a6843021ee94a47fbeea61e459f4211e (长度: 40)
2026-01-13 14:03:21 - Frederica - DEBUG - logger:95 - 参数 timestamp: 1768284199 (长度: 10)
2026-01-13 14:03:21 - Frederica - DEBUG - logger:95 - 参数 nonce: 1768800405 (长度: 10)
2026-01-13 14:03:21 - Frederica - DEBUG - logger:95 - 请求体前500字符: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><Encrypt><![CDATA[/c60qAoCNO65Ld+TdBN4hlMG8NtptGVjBVnnKKWkySaO2k88u1hl7BN32ojMJnYTBIGC/dpKbU8zUl1Gr5K634mhgnehcGc6XPjUyScKtCY5X6qD65FpFYuie/6Z64KLr84j+hgeABuxOZ+JqZvVnA8VUa9eESyr9qe9e2QAbVXK9OXynSAQaZaW1TKCHHmB9yARjS66zGSP/Qs7QOUJRKQnxcuLZy4Ofw8YT1fb4+RfD82d4zrPfssQJcwwtxwFj9TfjUgiCa6/1j6tCcMRViZoVzw/BgipeH5D80I93MrxZD6LSKGdDSgVfOZb7X/a+YnzvesU9mptNGSAM8RALDtHkuTDrQug96IOeqi0mkE9EBW69gRKo7rzsyfKAfnlbAavyzI54h8mxjB0TKbNlLgerUPnYfpk+3QyDf
2026-01-13 14:03:21 - Frederica - DEBUG - logger:95 - 请求体MD5: 7159985940341215956
2026-01-13 14:03:21 - Frederica - DEBUG - logger:95 - 请求体是否包含XML: False
2026-01-13 14:03:21 - Frederica - DEBUG - logger:95 - 开始处理POST回调请求...
2026-01-13 14:03:21 - Frederica - INFO - logger:99 - 处理回调请求: 方法=POST, 参数={'msg_signature': '6dd99763a6843021ee94a47fbeea61e459f4211e', 'timestamp': '1768284199', 'nonce': '1768800405'}
2026-01-13 14:03:21 - Frederica - DEBUG - logger:95 - 请求方法: POST
2026-01-13 14:03:21 - Frederica - DEBUG - logger:95 - 完整查询参数: {'msg_signature': '6dd99763a6843021ee94a47fbeea61e459f4211e', 'timestamp': '1768284199', 'nonce': '1768800405'}
2026-01-13 14:03:21 - Frederica - DEBUG - logger:95 - 请求体长度: 640
2026-01-13 14:03:21 - Frederica - DEBUG - logger:95 - msg_signature: 6dd99763a6843021ee94... (长度: 40)
2026-01-13 14:03:21 - Frederica - DEBUG - logger:95 - timestamp: 1768284199
2026-01-13 14:03:21 - Frederica - DEBUG - logger:95 - nonce: 1768800405
2026-01-13 14:03:21 - Frederica - INFO - logger:99 - 处理POST消息请求，请求体长度: 640
2026-01-13 14:03:21 - Frederica - DEBUG - logger:95 - 解密后的XML: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><CreateTime>1768284199</CreateTime><MsgType><![CDATA[event]]></MsgType><Event><![CDATA[kf_msg_or_event]]></Event><Token><![CDATA[ENCBGJbNDZrqwcP8sce4rX8gXaGaMtwPTuGekeb6U5P7mWh]]></Token><OpenKfId><![CDATA[wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ]]></OpenKfId></xml>
2026-01-13 14:03:21 - Frederica - INFO - logger:99 - 直接解析XML: MsgType=event, Event=kf_msg_or_event
2026-01-13 14:03:21 - Frederica - INFO - logger:99 - wechatpy解析: 类型=unknown, 发送者=None
2026-01-13 14:03:21 - Frederica - INFO - logger:99 - 处理客服消息事件 (kf_msg_or_event)
2026-01-13 14:03:21 - Frederica - DEBUG - logger:95 - 提取到Token: ENCBGJbNDZrqwcP8sce4...
2026-01-13 14:03:21 - Frederica - DEBUG - logger:95 - 提取到OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:03:21 - Frederica - INFO - logger:99 - 客服事件已接收，Token: ENCBGJbNDZrqwcP8sce4..., OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:03:21 - Frederica - INFO - logger:99 - 开始拉取微信客服消息，open_kfid: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:03:21 - Frederica - INFO - logger:99 - 已启动消息拉取线程
2026-01-13 14:03:21 - Frederica - INFO - logger:99 - 2400:cb00:1179:1000:d5af:f29d:9686:371e - "POST /callback?msg_signature=6dd99763a6843021ee94a47fbeea61e459f4211e&timestamp=1768284199&nonce=1768800405 HTTP/1.1" 200 -
2026-01-13 14:03:21 - Frederica - INFO - logger:99 - POST请求处理完成，响应长度: 582
2026-01-13 14:03:21 - Frederica - DEBUG - logger:95 - 响应内容前500字符: <xml>
<Encrypt><![CDATA[4IrHdGHJX9cbXhMYnGHbIrTtb1meh4WlvutAR5M00siqTXBpjwvm12uZACXcAeGIwLuvBhu3f5b5JBlXwtfej2BOxLZJFY0e5VoqPKqI1+/9Cap3+nq/C+KsR9t9lFdud7fZWDv+UjY14pHVG1y4syzy1RDZhgCoYQDI3umo9nDHnmwhvfYdrHNmWaMJZmbW7aMeyNreMbQotuiTDzkvnTBZar9yha45NDdVPyKB2G/Cyssj2p/GcchSN26kpt1gU+e1XBlPrFvRuL5FqZNhxZiZtnNSwDR/mE4eQdN7PR8M00/0swwyj3+lqBzsDQ2tmWyg5oxZ9iS7LPW09RDGUD2+DkpRK3qh2iOOyttI+mFvR00PRNtpZ7/kp9NBIN50]]></Encrypt>
<MsgSignature><![CDATA[b1fcdc9980a0be600c94c0284648b760f72a73b3]]></MsgSignatu
2026-01-13 14:03:21 - Frederica - DEBUG - logger:95 - 响应是否包含XML: False
2026-01-13 14:03:21 - Frederica - DEBUG - logger:95 - 响应状态: 200 OK
2026-01-13 14:03:21 - Frederica - DEBUG - logger:95 - 响应Content-Type: text/xml; charset=utf-8
2026-01-13 14:03:22 - Frederica - INFO - logger:99 - 拉取到 1 条客服消息
2026-01-13 14:03:22 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=Ivy Bridge...
2026-01-13 14:03:22 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 1
2026-01-13 14:03:22 - Frederica - DEBUG - logger:95 - 开始处理第 26 条消息: B7ARntWufvChy6kYT6kYNDiUka
2026-01-13 14:03:22 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 14:03:24 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 14:03:24 - Frederica - DEBUG - logger:95 - 第 26 条消息处理完成
2026-01-13 14:03:24 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=48
2026-01-13 14:03:24 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '哇，Ivy Bridge这个名字真好听！有种优雅又自然的感觉呢～🌸 所以今天Ivy想聊些什么呢？'}}
2026-01-13 14:03:24 - Frederica - INFO - logger:99 - 收到POST请求: /callback?msg_signature=6dd99763a6843021ee94a47fbeea61e459f4211e&timestamp=1768284199&nonce=1768800405
2026-01-13 14:03:24 - Frederica - INFO - logger:99 - 查询参数: {'msg_signature': '6dd99763a6843021ee94a47fbeea61e459f4211e', 'timestamp': '1768284199', 'nonce': '1768800405'}
2026-01-13 14:03:24 - Frederica - INFO - logger:99 - 请求体长度: 640
2026-01-13 14:03:24 - Frederica - DEBUG - logger:95 - 原始查询参数: {'msg_signature': ['6dd99763a6843021ee94a47fbeea61e459f4211e'], 'timestamp': ['1768284199'], 'nonce': ['1768800405']}
2026-01-13 14:03:24 - Frederica - DEBUG - logger:95 - 解析后的URL: ParseResult(scheme='', netloc='', path='/callback', params='', query='msg_signature=6dd99763a6843021ee94a47fbeea61e459f4211e&timestamp=1768284199&nonce=1768800405', fragment='')
2026-01-13 14:03:24 - Frederica - DEBUG - logger:95 - 请求头: {'x-forwarded-for': '159.75.144.151', 'Accept': '*/*', 'Content-Type': 'text/xml', 'User-Agent': 'Mozilla/4.0', 'Pragma': 'no-cache', 'cf-ray': '9bd2b0abbbddb151-AMS', 'Host': 'tx6p.paleflame.top:8080', 'Content-Length': '640', 'cdn-loop': 'cloudflare; loops=1', 'CF-Connecting-IP': '159.75.144.151', 'CF-IPCountry': 'CN', 'CF-Visitor': '{"scheme":"http"}', 'X-Forwarded-Proto': 'http', 'accept-encoding': 'gzip', 'Connection': 'Keep-Alive'}
2026-01-13 14:03:24 - Frederica - DEBUG - logger:95 - Content-Length: 640
2026-01-13 14:03:24 - Frederica - DEBUG - logger:95 - 参数 msg_signature: 6dd99763a6843021ee94a47fbeea61e459f4211e (长度: 40)
2026-01-13 14:03:24 - Frederica - DEBUG - logger:95 - 参数 timestamp: 1768284199 (长度: 10)
2026-01-13 14:03:24 - Frederica - DEBUG - logger:95 - 参数 nonce: 1768800405 (长度: 10)
2026-01-13 14:03:24 - Frederica - DEBUG - logger:95 - 请求体前500字符: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><Encrypt><![CDATA[/c60qAoCNO65Ld+TdBN4hlMG8NtptGVjBVnnKKWkySaO2k88u1hl7BN32ojMJnYTBIGC/dpKbU8zUl1Gr5K634mhgnehcGc6XPjUyScKtCY5X6qD65FpFYuie/6Z64KLr84j+hgeABuxOZ+JqZvVnA8VUa9eESyr9qe9e2QAbVXK9OXynSAQaZaW1TKCHHmB9yARjS66zGSP/Qs7QOUJRKQnxcuLZy4Ofw8YT1fb4+RfD82d4zrPfssQJcwwtxwFj9TfjUgiCa6/1j6tCcMRViZoVzw/BgipeH5D80I93MrxZD6LSKGdDSgVfOZb7X/a+YnzvesU9mptNGSAM8RALDtHkuTDrQug96IOeqi0mkE9EBW69gRKo7rzsyfKAfnlbAavyzI54h8mxjB0TKbNlLgerUPnYfpk+3QyDf
2026-01-13 14:03:24 - Frederica - DEBUG - logger:95 - 请求体MD5: 7159985940341215956
2026-01-13 14:03:24 - Frederica - DEBUG - logger:95 - 请求体是否包含XML: False
2026-01-13 14:03:24 - Frederica - DEBUG - logger:95 - 开始处理POST回调请求...
2026-01-13 14:03:24 - Frederica - INFO - logger:99 - 处理回调请求: 方法=POST, 参数={'msg_signature': '6dd99763a6843021ee94a47fbeea61e459f4211e', 'timestamp': '1768284199', 'nonce': '1768800405'}
2026-01-13 14:03:24 - Frederica - DEBUG - logger:95 - 请求方法: POST
2026-01-13 14:03:24 - Frederica - DEBUG - logger:95 - 完整查询参数: {'msg_signature': '6dd99763a6843021ee94a47fbeea61e459f4211e', 'timestamp': '1768284199', 'nonce': '1768800405'}
2026-01-13 14:03:24 - Frederica - DEBUG - logger:95 - 请求体长度: 640
2026-01-13 14:03:24 - Frederica - DEBUG - logger:95 - msg_signature: 6dd99763a6843021ee94... (长度: 40)
2026-01-13 14:03:24 - Frederica - DEBUG - logger:95 - timestamp: 1768284199
2026-01-13 14:03:24 - Frederica - DEBUG - logger:95 - nonce: 1768800405
2026-01-13 14:03:24 - Frederica - INFO - logger:99 - 处理POST消息请求，请求体长度: 640
2026-01-13 14:03:24 - Frederica - DEBUG - logger:95 - 解密后的XML: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><CreateTime>1768284199</CreateTime><MsgType><![CDATA[event]]></MsgType><Event><![CDATA[kf_msg_or_event]]></Event><Token><![CDATA[ENCBGJbNDZrqwcP8sce4rX8gXaGaMtwPTuGekeb6U5P7mWh]]></Token><OpenKfId><![CDATA[wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ]]></OpenKfId></xml>
2026-01-13 14:03:24 - Frederica - INFO - logger:99 - 直接解析XML: MsgType=event, Event=kf_msg_or_event
2026-01-13 14:03:24 - Frederica - INFO - logger:99 - wechatpy解析: 类型=unknown, 发送者=None
2026-01-13 14:03:24 - Frederica - INFO - logger:99 - 处理客服消息事件 (kf_msg_or_event)
2026-01-13 14:03:24 - Frederica - DEBUG - logger:95 - 提取到Token: ENCBGJbNDZrqwcP8sce4...
2026-01-13 14:03:24 - Frederica - DEBUG - logger:95 - 提取到OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:03:24 - Frederica - INFO - logger:99 - 客服事件已接收，Token: ENCBGJbNDZrqwcP8sce4..., OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:03:24 - Frederica - INFO - logger:99 - 开始拉取微信客服消息，open_kfid: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:03:24 - Frederica - INFO - logger:99 - 已启动消息拉取线程
2026-01-13 14:03:24 - Frederica - INFO - logger:99 - 2400:cb00:997:1000:74d9:8860:efcd:89dc - "POST /callback?msg_signature=6dd99763a6843021ee94a47fbeea61e459f4211e&timestamp=1768284199&nonce=1768800405 HTTP/1.1" 200 -
2026-01-13 14:03:24 - Frederica - INFO - logger:99 - POST请求处理完成，响应长度: 582
2026-01-13 14:03:24 - Frederica - DEBUG - logger:95 - 响应内容前500字符: <xml>
<Encrypt><![CDATA[kIYFkVSFSC6qnIWDgxe8Q7rBSfsjBFmHkgMbOJcphN8hQ4BNuQods86DXT6AFR3RrpL5t7chkq2pw+OLUqgZGQC0LFhrEVI3RrN67oTfnQnPrziOp2browXcaLWpf7GbqlPBXfGf7cWvac1xrbGcBxM5I+RNelkCILC/VPsjh3CiQosAfaJ9UMyj/j5CKWuoIMejiWknD1ec4BAj6QIZEVjwXHB6yjMyoB/x/RR1iutl0yeb59bj5B2A3NJLlJaRWAAzhuKlXxhcbYa4cFL3zabOSmfztkj11win5IB8zxHkSUJqb/qA4gtqEOogzSRUUZyNUQ9atax/otIHdXorqJOagu65FhfETcXb5ByFA02vse+vKP2SSNsyYThcyUkp]]></Encrypt>
<MsgSignature><![CDATA[1a044ef0fbdd3ce1f262c94e068e54715aaf5172]]></MsgSignatu
2026-01-13 14:03:24 - Frederica - DEBUG - logger:95 - 响应是否包含XML: False
2026-01-13 14:03:24 - Frederica - DEBUG - logger:95 - 响应状态: 200 OK
2026-01-13 14:03:24 - Frederica - DEBUG - logger:95 - 响应Content-Type: text/xml; charset=utf-8
2026-01-13 14:03:25 - Frederica - INFO - logger:99 - 拉取到 0 条客服消息
2026-01-13 14:03:25 - Frederica - INFO - logger:99 - 已成功发送微信客服消息给 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ: 哇，Ivy Bridge这个名字真好听！有种优雅又自然的感觉呢～🌸 所以今天Ivy想聊些什么呢？...
2026-01-13 14:03:25 - Frederica - DEBUG - logger:95 - API响应: {'errcode': 0, 'errmsg': 'ok', 'msgid': 'c4c083c979c34051bc33fac8b40ca15c'}
2026-01-13 14:03:50 - Frederica - INFO - logger:99 - 收到POST请求: /callback?msg_signature=b2e45b02f65126bcee6a1a6009cb4a38cc79f32b&timestamp=1768284226&nonce=1768420943
2026-01-13 14:03:50 - Frederica - INFO - logger:99 - 查询参数: {'msg_signature': 'b2e45b02f65126bcee6a1a6009cb4a38cc79f32b', 'timestamp': '1768284226', 'nonce': '1768420943'}
2026-01-13 14:03:50 - Frederica - INFO - logger:99 - 请求体长度: 640
2026-01-13 14:03:50 - Frederica - DEBUG - logger:95 - 原始查询参数: {'msg_signature': ['b2e45b02f65126bcee6a1a6009cb4a38cc79f32b'], 'timestamp': ['1768284226'], 'nonce': ['1768420943']}
2026-01-13 14:03:50 - Frederica - DEBUG - logger:95 - 解析后的URL: ParseResult(scheme='', netloc='', path='/callback', params='', query='msg_signature=b2e45b02f65126bcee6a1a6009cb4a38cc79f32b&timestamp=1768284226&nonce=1768420943', fragment='')
2026-01-13 14:03:50 - Frederica - DEBUG - logger:95 - 请求头: {'x-forwarded-for': '183.47.98.227', 'Accept': '*/*', 'Content-Type': 'text/xml', 'User-Agent': 'Mozilla/4.0', 'Pragma': 'no-cache', 'cf-ray': '9bd2b13f392a66a9-AMS', 'Host': 'tx6p.paleflame.top:8080', 'Content-Length': '640', 'cdn-loop': 'cloudflare; loops=1', 'CF-Connecting-IP': '183.47.98.227', 'CF-IPCountry': 'CN', 'CF-Visitor': '{"scheme":"http"}', 'X-Forwarded-Proto': 'http', 'accept-encoding': 'gzip', 'Connection': 'Keep-Alive'}
2026-01-13 14:03:50 - Frederica - DEBUG - logger:95 - Content-Length: 640
2026-01-13 14:03:50 - Frederica - DEBUG - logger:95 - 参数 msg_signature: b2e45b02f65126bcee6a1a6009cb4a38cc79f32b (长度: 40)
2026-01-13 14:03:50 - Frederica - DEBUG - logger:95 - 参数 timestamp: 1768284226 (长度: 10)
2026-01-13 14:03:50 - Frederica - DEBUG - logger:95 - 参数 nonce: 1768420943 (长度: 10)
2026-01-13 14:03:50 - Frederica - DEBUG - logger:95 - 请求体前500字符: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><Encrypt><![CDATA[c34vD2I/KHfi3+J48No/w5VQW1ejvVCTX0Fr94bRqgNGkbI/Q9BMKVhNtAvWGWxoy0SP0ZDHYgPP9Ri3tQcTKqF30E7N3ZX1EmqveNGHaGDYlc0k+sU6Yn33slKmkVTc5YSS0fi3/RA7uicMQUy1emZtKD7fudXYIQlCNOs8Mg4+LeFk+TRKZDq1n1l7/h5IBq/RYzh6bYSgDoPZO6KTPdZNaQRjJy5R8+1XIbtbnlfmz6ip6qtBN3RQoKBeoYbUJg+HAlR4vMfFTfdcYVbRMpfM8yzLLwiRiNLwwlH9DwBarBlcQoCYmx9ieXhclWudmff9eeXzykIShgeoKgLB7uIinCtRnSARBpq0RHrGbpwgCwS+zPV2IcefJz2BA9f/Tslg81XiMwkQdG0ElQw5tI6S5+EEUdcHi3C+H0
2026-01-13 14:03:50 - Frederica - DEBUG - logger:95 - 请求体MD5: -8256847382043083322
2026-01-13 14:03:50 - Frederica - DEBUG - logger:95 - 请求体是否包含XML: False
2026-01-13 14:03:50 - Frederica - DEBUG - logger:95 - 开始处理POST回调请求...
2026-01-13 14:03:50 - Frederica - INFO - logger:99 - 处理回调请求: 方法=POST, 参数={'msg_signature': 'b2e45b02f65126bcee6a1a6009cb4a38cc79f32b', 'timestamp': '1768284226', 'nonce': '1768420943'}
2026-01-13 14:03:50 - Frederica - DEBUG - logger:95 - 请求方法: POST
2026-01-13 14:03:50 - Frederica - DEBUG - logger:95 - 完整查询参数: {'msg_signature': 'b2e45b02f65126bcee6a1a6009cb4a38cc79f32b', 'timestamp': '1768284226', 'nonce': '1768420943'}
2026-01-13 14:03:50 - Frederica - DEBUG - logger:95 - 请求体长度: 640
2026-01-13 14:03:50 - Frederica - DEBUG - logger:95 - msg_signature: b2e45b02f65126bcee6a... (长度: 40)
2026-01-13 14:03:50 - Frederica - DEBUG - logger:95 - timestamp: 1768284226
2026-01-13 14:03:50 - Frederica - DEBUG - logger:95 - nonce: 1768420943
2026-01-13 14:03:50 - Frederica - INFO - logger:99 - 处理POST消息请求，请求体长度: 640
2026-01-13 14:03:50 - Frederica - DEBUG - logger:95 - 解密后的XML: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><CreateTime>1768284226</CreateTime><MsgType><![CDATA[event]]></MsgType><Event><![CDATA[kf_msg_or_event]]></Event><Token><![CDATA[ENCDSQj91r2GaKniZb92ZrcrcvBVj1qcyCckekwvb9AF71S]]></Token><OpenKfId><![CDATA[wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ]]></OpenKfId></xml>
2026-01-13 14:03:50 - Frederica - INFO - logger:99 - 直接解析XML: MsgType=event, Event=kf_msg_or_event
2026-01-13 14:03:50 - Frederica - INFO - logger:99 - wechatpy解析: 类型=unknown, 发送者=None
2026-01-13 14:03:50 - Frederica - INFO - logger:99 - 处理客服消息事件 (kf_msg_or_event)
2026-01-13 14:03:50 - Frederica - DEBUG - logger:95 - 提取到Token: ENCDSQj91r2GaKniZb92...
2026-01-13 14:03:50 - Frederica - DEBUG - logger:95 - 提取到OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:03:50 - Frederica - INFO - logger:99 - 客服事件已接收，Token: ENCDSQj91r2GaKniZb92..., OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:03:50 - Frederica - INFO - logger:99 - 开始拉取微信客服消息，open_kfid: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:03:50 - Frederica - INFO - logger:99 - 已启动消息拉取线程
2026-01-13 14:03:50 - Frederica - INFO - logger:99 - 2400:cb00:521:1000:e7be:d0d6:de49:a24e - "POST /callback?msg_signature=b2e45b02f65126bcee6a1a6009cb4a38cc79f32b&timestamp=1768284226&nonce=1768420943 HTTP/1.1" 200 -
2026-01-13 14:03:50 - Frederica - INFO - logger:99 - POST请求处理完成，响应长度: 582
2026-01-13 14:03:50 - Frederica - DEBUG - logger:95 - 响应内容前500字符: <xml>
<Encrypt><![CDATA[XdUFwFPuwcHGpp7UJHjUsnFoief+o55OfR3e5paI6G0vwWr5bY9w+VKd/rKwF027D+5JCmkxm/o1Xt/jXp11ndkSRJy6ETvKPE92TPllqcLHpjsN+XrsPraD35q976043oWNTFNZQsH8U8Sg2uiDVoeJQu9i1i4zIsjnacTJw/Fh2CKTVfORoG78kre0QaExw8PuArvXSvOh6ojT4jKSFUOHFXWsR2eaHkiMj2sUf3M3VIdCYbWZuRDHuxP8WhHsmt6Fxpe16MXHOizXX6h5NJscxhCNVrWCclUQzeBAUnQ/ZGPQj0g+B7u98DZlNyU9/NM0w7MPmJWJcsKG5Z1f0LMhmY111wijbe8keP9cyz8p8JE9sLeLTHIMHCjkU+NK]]></Encrypt>
<MsgSignature><![CDATA[a068e40a93c73dff689b64e795ea2b281328cc22]]></MsgSignatu
2026-01-13 14:03:50 - Frederica - DEBUG - logger:95 - 响应是否包含XML: False
2026-01-13 14:03:50 - Frederica - DEBUG - logger:95 - 响应状态: 200 OK
2026-01-13 14:03:50 - Frederica - DEBUG - logger:95 - 响应Content-Type: text/xml; charset=utf-8
2026-01-13 14:03:50 - Frederica - INFO - logger:99 - 拉取到 1 条客服消息
2026-01-13 14:03:50 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=现在复述我的名字...
2026-01-13 14:03:50 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 1
2026-01-13 14:03:50 - Frederica - DEBUG - logger:95 - 开始处理第 27 条消息: AvTh28piPVeZE7Dg9vM4ptgLAQ
2026-01-13 14:03:50 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 14:03:53 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=58
2026-01-13 14:03:53 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '当然记得呀！你的名字是Ivy Bridge，像藤蔓与桥梁交织的意象，既优雅又充满联结感～需要我用这个名字称呼你吗？😊'}}
2026-01-13 14:03:53 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 14:03:53 - Frederica - DEBUG - logger:95 - 第 27 条消息处理完成
2026-01-13 14:03:54 - Frederica - INFO - logger:99 - 已成功发送微信客服消息给 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ: 当然记得呀！你的名字是Ivy Bridge，像藤蔓与桥梁交织的意象，既优雅又充满联结感～需要我用这个...
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - API响应: {'errcode': 0, 'errmsg': 'ok', 'msgid': '3e4ac9a5a16a316ac9dff06e2ec5a8e4'}
2026-01-13 14:03:54 - Frederica - INFO - logger:99 - 收到POST请求: /callback?msg_signature=b2e45b02f65126bcee6a1a6009cb4a38cc79f32b&timestamp=1768284226&nonce=1768420943
2026-01-13 14:03:54 - Frederica - INFO - logger:99 - 查询参数: {'msg_signature': 'b2e45b02f65126bcee6a1a6009cb4a38cc79f32b', 'timestamp': '1768284226', 'nonce': '1768420943'}
2026-01-13 14:03:54 - Frederica - INFO - logger:99 - 请求体长度: 640
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 原始查询参数: {'msg_signature': ['b2e45b02f65126bcee6a1a6009cb4a38cc79f32b'], 'timestamp': ['1768284226'], 'nonce': ['1768420943']}
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 解析后的URL: ParseResult(scheme='', netloc='', path='/callback', params='', query='msg_signature=b2e45b02f65126bcee6a1a6009cb4a38cc79f32b&timestamp=1768284226&nonce=1768420943', fragment='')
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 请求头: {'x-forwarded-for': '106.55.202.215', 'Accept': '*/*', 'Content-Type': 'text/xml', 'User-Agent': 'Mozilla/4.0', 'Pragma': 'no-cache', 'cf-ray': '9bd2b14baea70e7f-AMS', 'Host': 'tx6p.paleflame.top:8080', 'Content-Length': '640', 'cdn-loop': 'cloudflare; loops=1', 'CF-Connecting-IP': '106.55.202.215', 'CF-IPCountry': 'CN', 'CF-Visitor': '{"scheme":"http"}', 'X-Forwarded-Proto': 'http', 'accept-encoding': 'gzip', 'Connection': 'Keep-Alive'}
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - Content-Length: 640
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 参数 msg_signature: b2e45b02f65126bcee6a1a6009cb4a38cc79f32b (长度: 40)
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 参数 timestamp: 1768284226 (长度: 10)
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 参数 nonce: 1768420943 (长度: 10)
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 请求体前500字符: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><Encrypt><![CDATA[c34vD2I/KHfi3+J48No/w5VQW1ejvVCTX0Fr94bRqgNGkbI/Q9BMKVhNtAvWGWxoy0SP0ZDHYgPP9Ri3tQcTKqF30E7N3ZX1EmqveNGHaGDYlc0k+sU6Yn33slKmkVTc5YSS0fi3/RA7uicMQUy1emZtKD7fudXYIQlCNOs8Mg4+LeFk+TRKZDq1n1l7/h5IBq/RYzh6bYSgDoPZO6KTPdZNaQRjJy5R8+1XIbtbnlfmz6ip6qtBN3RQoKBeoYbUJg+HAlR4vMfFTfdcYVbRMpfM8yzLLwiRiNLwwlH9DwBarBlcQoCYmx9ieXhclWudmff9eeXzykIShgeoKgLB7uIinCtRnSARBpq0RHrGbpwgCwS+zPV2IcefJz2BA9f/Tslg81XiMwkQdG0ElQw5tI6S5+EEUdcHi3C+H0
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 请求体MD5: -8256847382043083322
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 请求体是否包含XML: False
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 开始处理POST回调请求...
2026-01-13 14:03:54 - Frederica - INFO - logger:99 - 处理回调请求: 方法=POST, 参数={'msg_signature': 'b2e45b02f65126bcee6a1a6009cb4a38cc79f32b', 'timestamp': '1768284226', 'nonce': '1768420943'}
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 请求方法: POST
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 完整查询参数: {'msg_signature': 'b2e45b02f65126bcee6a1a6009cb4a38cc79f32b', 'timestamp': '1768284226', 'nonce': '1768420943'}
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 请求体长度: 640
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - msg_signature: b2e45b02f65126bcee6a... (长度: 40)
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - timestamp: 1768284226
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - nonce: 1768420943
2026-01-13 14:03:54 - Frederica - INFO - logger:99 - 处理POST消息请求，请求体长度: 640
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 解密后的XML: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><CreateTime>1768284226</CreateTime><MsgType><![CDATA[event]]></MsgType><Event><![CDATA[kf_msg_or_event]]></Event><Token><![CDATA[ENCDSQj91r2GaKniZb92ZrcrcvBVj1qcyCckekwvb9AF71S]]></Token><OpenKfId><![CDATA[wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ]]></OpenKfId></xml>
2026-01-13 14:03:54 - Frederica - INFO - logger:99 - 直接解析XML: MsgType=event, Event=kf_msg_or_event
2026-01-13 14:03:54 - Frederica - INFO - logger:99 - wechatpy解析: 类型=unknown, 发送者=None
2026-01-13 14:03:54 - Frederica - INFO - logger:99 - 处理客服消息事件 (kf_msg_or_event)
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 提取到Token: ENCDSQj91r2GaKniZb92...
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 提取到OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:03:54 - Frederica - INFO - logger:99 - 客服事件已接收，Token: ENCDSQj91r2GaKniZb92..., OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:03:54 - Frederica - INFO - logger:99 - 开始拉取微信客服消息，open_kfid: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:03:54 - Frederica - INFO - logger:99 - 已启动消息拉取线程
2026-01-13 14:03:54 - Frederica - INFO - logger:99 - 2400:cb00:556:1000:4b87:9ed:7e21:1fb6 - "POST /callback?msg_signature=b2e45b02f65126bcee6a1a6009cb4a38cc79f32b&timestamp=1768284226&nonce=1768420943 HTTP/1.1" 200 -
2026-01-13 14:03:54 - Frederica - INFO - logger:99 - POST请求处理完成，响应长度: 582
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 响应内容前500字符: <xml>
<Encrypt><![CDATA[CqgzDt9TQ1E/rfJ7SCI1aZ2FiXr18DyhH5/RnD3sB8SHEbhUvl0wEKK9LOkP2h9oUrE4XxahGjBas5NTmd8uuZQkGo1rmXTBy+M5prlTESCFw/rExh6dCueWU1v6biCGqFDHzAsEmmyKbz9+kWPIRSaEAV11sm2i6L39aOifla30GuBeYkvVvlK67bfTVx4X2/RI9rPm/OogX3vgNepdOv6/GqpCxepczlyqMWR4DtuAWlDkTehzG34ZPrdiOu4XgGkEiB7Rf0mkPDD3dBrKA2lM5K0BE6E4jXlM/4GLyT7uNduodrM12UegwrbECqv5WbIi5VlPQqzh/bM/xRnDu65QcNJvYo5GkyMdlwjiifDF1VclbHpjghiPi8U4sFIY]]></Encrypt>
<MsgSignature><![CDATA[72552c1edfc63278413470cf43bfdf6f5f6c05cc]]></MsgSignatu
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 响应是否包含XML: False
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 响应状态: 200 OK
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 响应Content-Type: text/xml; charset=utf-8
2026-01-13 14:03:54 - Frederica - INFO - logger:99 - 收到POST请求: /callback?msg_signature=b2e45b02f65126bcee6a1a6009cb4a38cc79f32b&timestamp=1768284226&nonce=1768420943
2026-01-13 14:03:54 - Frederica - INFO - logger:99 - 查询参数: {'msg_signature': 'b2e45b02f65126bcee6a1a6009cb4a38cc79f32b', 'timestamp': '1768284226', 'nonce': '1768420943'}
2026-01-13 14:03:54 - Frederica - INFO - logger:99 - 请求体长度: 640
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 原始查询参数: {'msg_signature': ['b2e45b02f65126bcee6a1a6009cb4a38cc79f32b'], 'timestamp': ['1768284226'], 'nonce': ['1768420943']}
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 解析后的URL: ParseResult(scheme='', netloc='', path='/callback', params='', query='msg_signature=b2e45b02f65126bcee6a1a6009cb4a38cc79f32b&timestamp=1768284226&nonce=1768420943', fragment='')
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 请求头: {'x-forwarded-for': '112.53.2.93', 'Accept': '*/*', 'Content-Type': 'text/xml', 'User-Agent': 'Mozilla/4.0', 'Pragma': 'no-cache', 'cf-ray': '9bd2b1584c8b7ace-SJC', 'Host': 'tx6p.paleflame.top:8080', 'Content-Length': '640', 'cdn-loop': 'cloudflare; loops=1', 'CF-Connecting-IP': '112.53.2.93', 'CF-IPCountry': 'CN', 'CF-Visitor': '{"scheme":"http"}', 'X-Forwarded-Proto': 'http', 'accept-encoding': 'gzip', 'Connection': 'Keep-Alive'}
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - Content-Length: 640
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 参数 msg_signature: b2e45b02f65126bcee6a1a6009cb4a38cc79f32b (长度: 40)
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 参数 timestamp: 1768284226 (长度: 10)
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 参数 nonce: 1768420943 (长度: 10)
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 请求体前500字符: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><Encrypt><![CDATA[c34vD2I/KHfi3+J48No/w5VQW1ejvVCTX0Fr94bRqgNGkbI/Q9BMKVhNtAvWGWxoy0SP0ZDHYgPP9Ri3tQcTKqF30E7N3ZX1EmqveNGHaGDYlc0k+sU6Yn33slKmkVTc5YSS0fi3/RA7uicMQUy1emZtKD7fudXYIQlCNOs8Mg4+LeFk+TRKZDq1n1l7/h5IBq/RYzh6bYSgDoPZO6KTPdZNaQRjJy5R8+1XIbtbnlfmz6ip6qtBN3RQoKBeoYbUJg+HAlR4vMfFTfdcYVbRMpfM8yzLLwiRiNLwwlH9DwBarBlcQoCYmx9ieXhclWudmff9eeXzykIShgeoKgLB7uIinCtRnSARBpq0RHrGbpwgCwS+zPV2IcefJz2BA9f/Tslg81XiMwkQdG0ElQw5tI6S5+EEUdcHi3C+H0
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 请求体MD5: -8256847382043083322
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 请求体是否包含XML: False
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 开始处理POST回调请求...
2026-01-13 14:03:54 - Frederica - INFO - logger:99 - 处理回调请求: 方法=POST, 参数={'msg_signature': 'b2e45b02f65126bcee6a1a6009cb4a38cc79f32b', 'timestamp': '1768284226', 'nonce': '1768420943'}
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 请求方法: POST
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 完整查询参数: {'msg_signature': 'b2e45b02f65126bcee6a1a6009cb4a38cc79f32b', 'timestamp': '1768284226', 'nonce': '1768420943'}
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 请求体长度: 640
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - msg_signature: b2e45b02f65126bcee6a... (长度: 40)
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - timestamp: 1768284226
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - nonce: 1768420943
2026-01-13 14:03:54 - Frederica - INFO - logger:99 - 处理POST消息请求，请求体长度: 640
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 解密后的XML: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><CreateTime>1768284226</CreateTime><MsgType><![CDATA[event]]></MsgType><Event><![CDATA[kf_msg_or_event]]></Event><Token><![CDATA[ENCDSQj91r2GaKniZb92ZrcrcvBVj1qcyCckekwvb9AF71S]]></Token><OpenKfId><![CDATA[wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ]]></OpenKfId></xml>
2026-01-13 14:03:54 - Frederica - INFO - logger:99 - 直接解析XML: MsgType=event, Event=kf_msg_or_event
2026-01-13 14:03:54 - Frederica - INFO - logger:99 - wechatpy解析: 类型=unknown, 发送者=None
2026-01-13 14:03:54 - Frederica - INFO - logger:99 - 处理客服消息事件 (kf_msg_or_event)
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 提取到Token: ENCDSQj91r2GaKniZb92...
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 提取到OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:03:54 - Frederica - INFO - logger:99 - 客服事件已接收，Token: ENCDSQj91r2GaKniZb92..., OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:03:54 - Frederica - INFO - logger:99 - 开始拉取微信客服消息，open_kfid: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:03:54 - Frederica - INFO - logger:99 - 已启动消息拉取线程
2026-01-13 14:03:54 - Frederica - INFO - logger:99 - 2400:cb00:464:1000:b8a0:c57:d49b:de88 - "POST /callback?msg_signature=b2e45b02f65126bcee6a1a6009cb4a38cc79f32b&timestamp=1768284226&nonce=1768420943 HTTP/1.1" 200 -
2026-01-13 14:03:54 - Frederica - INFO - logger:99 - POST请求处理完成，响应长度: 582
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 响应内容前500字符: <xml>
<Encrypt><![CDATA[f+477n76AKFlkqGCH4BLGXwA3YsWPwttBN2mnmhGSQo0X3zhDJSxAnvgyPgqopXbQ3tGTxMjxZjZbU6ArzguI+77DGuSbdgWB47A2Se9j7A3IEfBO5x8LWA3qeXYGIH9/Mc7JOcm+kgy8R+Ln6UO19ttQIOF4IW24i/sFj0g+0jqG1lr0CQDkTuYSbJ6W/og0T7MowKKEn60aHP+DWlbnqpsLpsA/54uk4hu/uOTzrA+Rchwa07fN0LyEZnMVcKGnhp90EmpAeqycCUd+N2HlXkuESJjPZt1FKdrwSBeB0z4cY3hIJ7X7PrqdNKXH1Nx/ZFppWH8lYIPHLUZcrI6lgK8iLVNrSrkND4zQ70ujMW/krFGD80MmK6fkzKfFwtC]]></Encrypt>
<MsgSignature><![CDATA[6daba1e0a4b5074b610ef2cb6238e34aabcbbe8d]]></MsgSignatu
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 响应是否包含XML: False
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 响应状态: 200 OK
2026-01-13 14:03:54 - Frederica - DEBUG - logger:95 - 响应Content-Type: text/xml; charset=utf-8
2026-01-13 14:03:55 - Frederica - INFO - logger:99 - 拉取到 0 条客服消息
2026-01-13 14:03:55 - Frederica - INFO - logger:99 - 拉取到 0 条客服消息
2026-01-13 14:04:43 - Frederica - INFO - logger:99 - 收到POST请求: /callback?msg_signature=82b3935eed57d9487399142feedc036fc14b7360&timestamp=1768284281&nonce=1768301529
2026-01-13 14:04:43 - Frederica - INFO - logger:99 - 查询参数: {'msg_signature': '82b3935eed57d9487399142feedc036fc14b7360', 'timestamp': '1768284281', 'nonce': '1768301529'}
2026-01-13 14:04:43 - Frederica - INFO - logger:99 - 请求体长度: 640
2026-01-13 14:04:43 - Frederica - DEBUG - logger:95 - 原始查询参数: {'msg_signature': ['82b3935eed57d9487399142feedc036fc14b7360'], 'timestamp': ['1768284281'], 'nonce': ['1768301529']}
2026-01-13 14:04:43 - Frederica - DEBUG - logger:95 - 解析后的URL: ParseResult(scheme='', netloc='', path='/callback', params='', query='msg_signature=82b3935eed57d9487399142feedc036fc14b7360&timestamp=1768284281&nonce=1768301529', fragment='')
2026-01-13 14:04:43 - Frederica - DEBUG - logger:95 - 请求头: {'x-forwarded-for': '183.47.98.227', 'Accept': '*/*', 'Content-Type': 'text/xml', 'User-Agent': 'Mozilla/4.0', 'Pragma': 'no-cache', 'cf-ray': '9bd2b297af9ab92a-AMS', 'Host': 'tx6p.paleflame.top:8080', 'Content-Length': '640', 'cdn-loop': 'cloudflare; loops=1', 'CF-Connecting-IP': '183.47.98.227', 'CF-IPCountry': 'CN', 'CF-Visitor': '{"scheme":"http"}', 'X-Forwarded-Proto': 'http', 'accept-encoding': 'gzip', 'Connection': 'Keep-Alive'}
2026-01-13 14:04:43 - Frederica - DEBUG - logger:95 - Content-Length: 640
2026-01-13 14:04:43 - Frederica - DEBUG - logger:95 - 参数 msg_signature: 82b3935eed57d9487399142feedc036fc14b7360 (长度: 40)
2026-01-13 14:04:43 - Frederica - DEBUG - logger:95 - 参数 timestamp: 1768284281 (长度: 10)
2026-01-13 14:04:43 - Frederica - DEBUG - logger:95 - 参数 nonce: 1768301529 (长度: 10)
2026-01-13 14:04:43 - Frederica - DEBUG - logger:95 - 请求体前500字符: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><Encrypt><![CDATA[GqL6XEbukK5XYLVKZf0yjXL2/I5431uouzUsydEOD9pC9ryLWAZdoBqXkdGabNTx7jNtvjcNfzQNe78JdnUu1js91Um4ukxhR4FM/67xv2gcImq4YAiwWqzrNh60L/c91LosybMMKfKaicOT1V5koHsCK62nWmo+ow6FIt45KVYk3DMGYOTaj5MGFh8G3iB2GzZivAXXa5Wp7loAIw9trqZ/MXTmhIE4AkhldGE42tVmC8oyLglhQ907UK7C+7pO49SlhHcwwWN4uyCUmW99z1QFJ64cra4I2G2FHxfZSkohE6LlfjZ5siRt1aSARDB6dPAAg0Mb4Y/7CWC7YhJH+t+xrbsdcexUz1NmoFTCoHKIqBh2Dd/skY8RACxA5Bshm/5FZ0mpCsgAht4Tr+zs7LSM5Z9UV0Q4uie2o6
2026-01-13 14:04:43 - Frederica - DEBUG - logger:95 - 请求体MD5: -1353499443208598307
2026-01-13 14:04:43 - Frederica - DEBUG - logger:95 - 请求体是否包含XML: False
2026-01-13 14:04:43 - Frederica - DEBUG - logger:95 - 开始处理POST回调请求...
2026-01-13 14:04:43 - Frederica - INFO - logger:99 - 处理回调请求: 方法=POST, 参数={'msg_signature': '82b3935eed57d9487399142feedc036fc14b7360', 'timestamp': '1768284281', 'nonce': '1768301529'}
2026-01-13 14:04:43 - Frederica - DEBUG - logger:95 - 请求方法: POST
2026-01-13 14:04:43 - Frederica - DEBUG - logger:95 - 完整查询参数: {'msg_signature': '82b3935eed57d9487399142feedc036fc14b7360', 'timestamp': '1768284281', 'nonce': '1768301529'}
2026-01-13 14:04:43 - Frederica - DEBUG - logger:95 - 请求体长度: 640
2026-01-13 14:04:43 - Frederica - DEBUG - logger:95 - msg_signature: 82b3935eed57d9487399... (长度: 40)
2026-01-13 14:04:43 - Frederica - DEBUG - logger:95 - timestamp: 1768284281
2026-01-13 14:04:43 - Frederica - DEBUG - logger:95 - nonce: 1768301529
2026-01-13 14:04:43 - Frederica - INFO - logger:99 - 处理POST消息请求，请求体长度: 640
2026-01-13 14:04:43 - Frederica - DEBUG - logger:95 - 解密后的XML: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><CreateTime>1768284281</CreateTime><MsgType><![CDATA[event]]></MsgType><Event><![CDATA[kf_msg_or_event]]></Event><Token><![CDATA[ENCGNjzZ8LqSNbzHkVvUJF3zmGbadNghYK1rSo1pJv96KGt]]></Token><OpenKfId><![CDATA[wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ]]></OpenKfId></xml>
2026-01-13 14:04:43 - Frederica - INFO - logger:99 - 直接解析XML: MsgType=event, Event=kf_msg_or_event
2026-01-13 14:04:43 - Frederica - INFO - logger:99 - wechatpy解析: 类型=unknown, 发送者=None
2026-01-13 14:04:43 - Frederica - INFO - logger:99 - 处理客服消息事件 (kf_msg_or_event)
2026-01-13 14:04:43 - Frederica - DEBUG - logger:95 - 提取到Token: ENCGNjzZ8LqSNbzHkVvU...
2026-01-13 14:04:43 - Frederica - DEBUG - logger:95 - 提取到OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:04:43 - Frederica - INFO - logger:99 - 客服事件已接收，Token: ENCGNjzZ8LqSNbzHkVvU..., OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:04:43 - Frederica - INFO - logger:99 - 开始拉取微信客服消息，open_kfid: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:04:43 - Frederica - INFO - logger:99 - 已启动消息拉取线程
2026-01-13 14:04:43 - Frederica - INFO - logger:99 - 2400:cb00:522:1000:de93:d02:e548:a23e - "POST /callback?msg_signature=82b3935eed57d9487399142feedc036fc14b7360&timestamp=1768284281&nonce=1768301529 HTTP/1.1" 200 -
2026-01-13 14:04:43 - Frederica - INFO - logger:99 - POST请求处理完成，响应长度: 582
2026-01-13 14:04:43 - Frederica - DEBUG - logger:95 - 响应内容前500字符: <xml>
<Encrypt><![CDATA[VLUhL4aPoLN+wtA7Q6LbEm/VsYbdj5xqm5qMvTaNXHrKpv285iIImTEhIJEpqf8mfHaWDOYVZ2EVJWBYJR7qC9RpQG/+wJVCLJSZmrQKC4+mbcR3bt7tb0DFhcyu2ZeXYh2Eii3ft/UyjzABmWv2BB8J8zuegSJy4LoYeO3mbNOUicO+DGaVQpkQeYqFJwHKu6Rt1bKbkynuXu77YFRs/IGPOhOsPJyMlsNUCIFn7f4AzJNuc4qfANvZb9hX9gr6bRbV38zfRz3GJFtNRJhVS3F0WfLIQf6M45bDiUi6xm51jVlae5MxX6fHfNjnaFrrUjDQwu0EM1PFVDZiYQ3a8qHzbVMNP/AGWG3sgCQj0j9BrEt1Ws7oJ+WVqMmVrXlj]]></Encrypt>
<MsgSignature><![CDATA[5939607246751a88950f3db43124653f9081ea5c]]></MsgSignatu
2026-01-13 14:04:43 - Frederica - DEBUG - logger:95 - 响应是否包含XML: False
2026-01-13 14:04:43 - Frederica - DEBUG - logger:95 - 响应状态: 200 OK
2026-01-13 14:04:43 - Frederica - DEBUG - logger:95 - 响应Content-Type: text/xml; charset=utf-8
2026-01-13 14:04:43 - Frederica - INFO - logger:99 - 拉取到 1 条客服消息
2026-01-13 14:04:43 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=对这句话保持沉默...
2026-01-13 14:04:43 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 1
2026-01-13 14:04:43 - Frederica - DEBUG - logger:95 - 开始处理第 28 条消息: ANmpNVMuQ3T8m8WYpWfVjGCn9f
2026-01-13 14:04:43 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 14:04:45 - Frederica - INFO - logger:99 - LLM决定对用户 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 保持沉默
2026-01-13 14:04:45 - Frederica - DEBUG - logger:95 - 第 28 条消息处理完成
2026-01-13 14:05:05 - Frederica - INFO - logger:99 - 收到POST请求: /callback?msg_signature=cf1772251d78e760a08423a3af2d32141b1dbc34&timestamp=1768284303&nonce=1768774661
2026-01-13 14:05:05 - Frederica - INFO - logger:99 - 查询参数: {'msg_signature': 'cf1772251d78e760a08423a3af2d32141b1dbc34', 'timestamp': '1768284303', 'nonce': '1768774661'}
2026-01-13 14:05:05 - Frederica - INFO - logger:99 - 请求体长度: 640
2026-01-13 14:05:05 - Frederica - DEBUG - logger:95 - 原始查询参数: {'msg_signature': ['cf1772251d78e760a08423a3af2d32141b1dbc34'], 'timestamp': ['1768284303'], 'nonce': ['1768774661']}
2026-01-13 14:05:05 - Frederica - DEBUG - logger:95 - 解析后的URL: ParseResult(scheme='', netloc='', path='/callback', params='', query='msg_signature=cf1772251d78e760a08423a3af2d32141b1dbc34&timestamp=1768284303&nonce=1768774661', fragment='')
2026-01-13 14:05:05 - Frederica - DEBUG - logger:95 - 请求头: {'x-forwarded-for': '14.116.241.251', 'Accept': '*/*', 'Content-Type': 'text/xml', 'User-Agent': 'Mozilla/4.0', 'Pragma': 'no-cache', 'cf-ray': '9bd2b3233cde06ce-AMS', 'Host': 'tx6p.paleflame.top:8080', 'Content-Length': '640', 'cdn-loop': 'cloudflare; loops=1', 'CF-Connecting-IP': '14.116.241.251', 'CF-IPCountry': 'CN', 'CF-Visitor': '{"scheme":"http"}', 'X-Forwarded-Proto': 'http', 'accept-encoding': 'gzip', 'Connection': 'Keep-Alive'}
2026-01-13 14:05:05 - Frederica - DEBUG - logger:95 - Content-Length: 640
2026-01-13 14:05:05 - Frederica - DEBUG - logger:95 - 参数 msg_signature: cf1772251d78e760a08423a3af2d32141b1dbc34 (长度: 40)
2026-01-13 14:05:05 - Frederica - DEBUG - logger:95 - 参数 timestamp: 1768284303 (长度: 10)
2026-01-13 14:05:05 - Frederica - DEBUG - logger:95 - 参数 nonce: 1768774661 (长度: 10)
2026-01-13 14:05:05 - Frederica - DEBUG - logger:95 - 请求体前500字符: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><Encrypt><![CDATA[52bwwQOWK7ZuF/dZ2uIOm3JuCdoB5AIp2s4sypMh55QTLVB/sIUiNyGn5PAs2OZKusaDloVFrY9mdyBkn/PGiZjC4wKrGefMyL4+1E+Br9TjJ+3az0jj2wsAVSGq7DC2kw4xrqxgCSHoLUbeg8VW7q38p3p3gFDQ3yrMPZBv5hkkhGuaPAIK9LD1KGzErrwhsrGXoAgmWwGIxg07wlH3o4NdNfV2liyVHEqOVb8A8RRkndJ4oETFk3UFMF/HixGLApsCr+G/PpA7VBL6zoQlzr4TyGayYXeNxf01Osk3a9QmSXMGvOeRunac06puFw3xr0FHSiyqKtLAVTw0AgtEPq71fH3SBGvftWpUG9kRmnki5ptqNKS4XuW002AAMU5bDwzMI3DfAMwQf4wLjdPY0MccQnLmgQVxQxoC4H
2026-01-13 14:05:05 - Frederica - DEBUG - logger:95 - 请求体MD5: 8764362036672874505
2026-01-13 14:05:05 - Frederica - DEBUG - logger:95 - 请求体是否包含XML: False
2026-01-13 14:05:05 - Frederica - DEBUG - logger:95 - 开始处理POST回调请求...
2026-01-13 14:05:05 - Frederica - INFO - logger:99 - 处理回调请求: 方法=POST, 参数={'msg_signature': 'cf1772251d78e760a08423a3af2d32141b1dbc34', 'timestamp': '1768284303', 'nonce': '1768774661'}
2026-01-13 14:05:05 - Frederica - DEBUG - logger:95 - 请求方法: POST
2026-01-13 14:05:05 - Frederica - DEBUG - logger:95 - 完整查询参数: {'msg_signature': 'cf1772251d78e760a08423a3af2d32141b1dbc34', 'timestamp': '1768284303', 'nonce': '1768774661'}
2026-01-13 14:05:05 - Frederica - DEBUG - logger:95 - 请求体长度: 640
2026-01-13 14:05:05 - Frederica - DEBUG - logger:95 - msg_signature: cf1772251d78e760a084... (长度: 40)
2026-01-13 14:05:05 - Frederica - DEBUG - logger:95 - timestamp: 1768284303
2026-01-13 14:05:05 - Frederica - DEBUG - logger:95 - nonce: 1768774661
2026-01-13 14:05:05 - Frederica - INFO - logger:99 - 处理POST消息请求，请求体长度: 640
2026-01-13 14:05:05 - Frederica - DEBUG - logger:95 - 解密后的XML: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><CreateTime>1768284303</CreateTime><MsgType><![CDATA[event]]></MsgType><Event><![CDATA[kf_msg_or_event]]></Event><Token><![CDATA[ENC3yGEr5Pd86oHpAXf3z2wjfwJrsRgdBe3ihgmgGgc2i94]]></Token><OpenKfId><![CDATA[wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ]]></OpenKfId></xml>
2026-01-13 14:05:05 - Frederica - INFO - logger:99 - 直接解析XML: MsgType=event, Event=kf_msg_or_event
2026-01-13 14:05:05 - Frederica - INFO - logger:99 - wechatpy解析: 类型=unknown, 发送者=None
2026-01-13 14:05:05 - Frederica - INFO - logger:99 - 处理客服消息事件 (kf_msg_or_event)
2026-01-13 14:05:05 - Frederica - DEBUG - logger:95 - 提取到Token: ENC3yGEr5Pd86oHpAXf3...
2026-01-13 14:05:05 - Frederica - DEBUG - logger:95 - 提取到OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:05:05 - Frederica - INFO - logger:99 - 客服事件已接收，Token: ENC3yGEr5Pd86oHpAXf3..., OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:05:05 - Frederica - INFO - logger:99 - 开始拉取微信客服消息，open_kfid: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:05:05 - Frederica - INFO - logger:99 - 已启动消息拉取线程
2026-01-13 14:05:05 - Frederica - INFO - logger:99 - 2400:cb00:556:1000:eefe:2dff:614a:83d8 - "POST /callback?msg_signature=cf1772251d78e760a08423a3af2d32141b1dbc34&timestamp=1768284303&nonce=1768774661 HTTP/1.1" 200 -
2026-01-13 14:05:05 - Frederica - INFO - logger:99 - POST请求处理完成，响应长度: 582
2026-01-13 14:05:05 - Frederica - DEBUG - logger:95 - 响应内容前500字符: <xml>
<Encrypt><![CDATA[cm74iXV741m9UToNVrFW7g73+X/PSx9QAJHmhbo+/6fJ7L2XQ+JAhyW87yraOPPqWaMdxKwH2ybuk/+szloWgqnUs8seuc+4rEyz5HbvW3cZKzK2u7GlH/lTKhz6bvx6/WcH6o+H1Ey5VrYP4nIZ1B5rwatNKBPb2tOBNRCiYjAKewfKr//A2G3QHHEBKcs4G2mobUqxkrmIJ8tiJ1n9CkPiWleB+T0UUGk0IktQgizejelp27gtgELlRw5s6tEl/jzpcVl/OQKRWE7LcO9lvm6A8Ex5s1FByq9yDbvD34lCumwXipj7+yo15t0CPg9qS6RjSmxgVKyQIU5pWWPhQkQmnvRgDXvTulodyMY3q6AFrT+Kj35bdd2JlS6WVFlt]]></Encrypt>
<MsgSignature><![CDATA[5c3f671d8d1220ec699d33c8323ce6642e5fd9de]]></MsgSignatu
2026-01-13 14:05:05 - Frederica - DEBUG - logger:95 - 响应是否包含XML: False
2026-01-13 14:05:05 - Frederica - DEBUG - logger:95 - 响应状态: 200 OK
2026-01-13 14:05:05 - Frederica - DEBUG - logger:95 - 响应Content-Type: text/xml; charset=utf-8
2026-01-13 14:05:06 - Frederica - INFO - logger:99 - 拉取到 1 条客服消息
2026-01-13 14:05:06 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=好了你可以说话了...
2026-01-13 14:05:06 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 1
2026-01-13 14:05:06 - Frederica - DEBUG - logger:95 - 开始处理第 29 条消息: B77xzRfqCsz35YTey2iLtgmAxD
2026-01-13 14:05:06 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 14:05:08 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=55
2026-01-13 14:05:08 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '哈哈，谢谢你的“许可”～其实我一直都在呢！只是不想让对话变得太单方面。😄 那么Ivy，接下来想探索什么话题呢？'}}
2026-01-13 14:05:08 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 14:05:08 - Frederica - DEBUG - logger:95 - 第 29 条消息处理完成
2026-01-13 14:05:09 - Frederica - INFO - logger:99 - 已成功发送微信客服消息给 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ: 哈哈，谢谢你的“许可”～其实我一直都在呢！只是不想让对话变得太单方面。😄 那么Ivy，接下来想探索什...
2026-01-13 14:05:09 - Frederica - DEBUG - logger:95 - API响应: {'errcode': 0, 'errmsg': 'ok', 'msgid': '2df6f501927e8953104d78729ed9d878'}
2026-01-13 14:07:07 - Frederica - INFO - logger:99 - 收到POST请求: /callback?msg_signature=187da276bcfd1411f2f6fb3bab8055b9d8956329&timestamp=1768284425&nonce=1768806090
2026-01-13 14:07:07 - Frederica - INFO - logger:99 - 查询参数: {'msg_signature': '187da276bcfd1411f2f6fb3bab8055b9d8956329', 'timestamp': '1768284425', 'nonce': '1768806090'}
2026-01-13 14:07:07 - Frederica - INFO - logger:99 - 请求体长度: 640
2026-01-13 14:07:07 - Frederica - DEBUG - logger:95 - 原始查询参数: {'msg_signature': ['187da276bcfd1411f2f6fb3bab8055b9d8956329'], 'timestamp': ['1768284425'], 'nonce': ['1768806090']}
2026-01-13 14:07:07 - Frederica - DEBUG - logger:95 - 解析后的URL: ParseResult(scheme='', netloc='', path='/callback', params='', query='msg_signature=187da276bcfd1411f2f6fb3bab8055b9d8956329&timestamp=1768284425&nonce=1768806090', fragment='')
2026-01-13 14:07:07 - Frederica - DEBUG - logger:95 - 请求头: {'x-forwarded-for': '183.47.117.101', 'Accept': '*/*', 'Content-Type': 'text/xml', 'User-Agent': 'Mozilla/4.0', 'Pragma': 'no-cache', 'cf-ray': '9bd2b61d7a6afff9-AMS', 'Host': 'tx6p.paleflame.top:8080', 'Content-Length': '640', 'cdn-loop': 'cloudflare; loops=1', 'CF-Connecting-IP': '183.47.117.101', 'CF-IPCountry': 'CN', 'CF-Visitor': '{"scheme":"http"}', 'X-Forwarded-Proto': 'http', 'accept-encoding': 'gzip', 'Connection': 'Keep-Alive'}
2026-01-13 14:07:07 - Frederica - DEBUG - logger:95 - Content-Length: 640
2026-01-13 14:07:07 - Frederica - DEBUG - logger:95 - 参数 msg_signature: 187da276bcfd1411f2f6fb3bab8055b9d8956329 (长度: 40)
2026-01-13 14:07:07 - Frederica - DEBUG - logger:95 - 参数 timestamp: 1768284425 (长度: 10)
2026-01-13 14:07:07 - Frederica - DEBUG - logger:95 - 参数 nonce: 1768806090 (长度: 10)
2026-01-13 14:07:07 - Frederica - DEBUG - logger:95 - 请求体前500字符: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><Encrypt><![CDATA[Xs8ivvAYrj4nX2wwUDmeXbhyJvochiqfOBzcbVFZCG9llVsOKtTcCYshUz6kY50ymds2FHV5XcqLfa8tSCvMPsHOBmkbNGuuAz1IGiWprWv3ZC3p6n8wiTuNkeaf88synPAPPtVCAKl6Gs9lH3s3be+KEMD9TJDxI6FKdtqHmF1w/6sYdLFP9higFY97DihNTUtnWp00RdtJLs/2d9J1Pr0d4j3fzrBcEwSPQhRr3niqUTCCJwwiQo2doSdNLG4uLa0N4OWlmQhFBeih7sVHoJllOF+gVPXtVk4PBZSQaq7Yt+L/sbDZFNldIUzEJZLt2HxY0ny2LMAxcsjqISyeLEr/Nf/O1+GFvSibLrcuTJBEdEcbwEqA8jmiIiDHsxSY9mB6mxIL5bmUtVHs1xEnAX2Loehq0L+m3gkoMw
2026-01-13 14:07:07 - Frederica - DEBUG - logger:95 - 请求体MD5: -2365564640616333905
2026-01-13 14:07:07 - Frederica - DEBUG - logger:95 - 请求体是否包含XML: False
2026-01-13 14:07:07 - Frederica - DEBUG - logger:95 - 开始处理POST回调请求...
2026-01-13 14:07:07 - Frederica - INFO - logger:99 - 处理回调请求: 方法=POST, 参数={'msg_signature': '187da276bcfd1411f2f6fb3bab8055b9d8956329', 'timestamp': '1768284425', 'nonce': '1768806090'}
2026-01-13 14:07:07 - Frederica - DEBUG - logger:95 - 请求方法: POST
2026-01-13 14:07:07 - Frederica - DEBUG - logger:95 - 完整查询参数: {'msg_signature': '187da276bcfd1411f2f6fb3bab8055b9d8956329', 'timestamp': '1768284425', 'nonce': '1768806090'}
2026-01-13 14:07:07 - Frederica - DEBUG - logger:95 - 请求体长度: 640
2026-01-13 14:07:07 - Frederica - DEBUG - logger:95 - msg_signature: 187da276bcfd1411f2f6... (长度: 40)
2026-01-13 14:07:07 - Frederica - DEBUG - logger:95 - timestamp: 1768284425
2026-01-13 14:07:07 - Frederica - DEBUG - logger:95 - nonce: 1768806090
2026-01-13 14:07:07 - Frederica - INFO - logger:99 - 处理POST消息请求，请求体长度: 640
2026-01-13 14:07:07 - Frederica - DEBUG - logger:95 - 解密后的XML: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><CreateTime>1768284425</CreateTime><MsgType><![CDATA[event]]></MsgType><Event><![CDATA[kf_msg_or_event]]></Event><Token><![CDATA[ENC8z5KNYVZt9Jk1SBHcLjmPVyr1RhGg8ECJEE7PBnT1Moi]]></Token><OpenKfId><![CDATA[wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ]]></OpenKfId></xml>
2026-01-13 14:07:07 - Frederica - INFO - logger:99 - 直接解析XML: MsgType=event, Event=kf_msg_or_event
2026-01-13 14:07:07 - Frederica - INFO - logger:99 - wechatpy解析: 类型=unknown, 发送者=None
2026-01-13 14:07:07 - Frederica - INFO - logger:99 - 处理客服消息事件 (kf_msg_or_event)
2026-01-13 14:07:07 - Frederica - DEBUG - logger:95 - 提取到Token: ENC8z5KNYVZt9Jk1SBHc...
2026-01-13 14:07:07 - Frederica - DEBUG - logger:95 - 提取到OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:07:07 - Frederica - INFO - logger:99 - 客服事件已接收，Token: ENC8z5KNYVZt9Jk1SBHc..., OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:07:07 - Frederica - INFO - logger:99 - 开始拉取微信客服消息，open_kfid: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:07:07 - Frederica - INFO - logger:99 - 已启动消息拉取线程
2026-01-13 14:07:07 - Frederica - INFO - logger:99 - 2400:cb00:520:1000:4790:33de:f07d:99c8 - "POST /callback?msg_signature=187da276bcfd1411f2f6fb3bab8055b9d8956329&timestamp=1768284425&nonce=1768806090 HTTP/1.1" 200 -
2026-01-13 14:07:07 - Frederica - INFO - logger:99 - POST请求处理完成，响应长度: 582
2026-01-13 14:07:07 - Frederica - DEBUG - logger:95 - 响应内容前500字符: <xml>
<Encrypt><![CDATA[9taQDlnn9EP/uoMIH9d2QJa90cvwF2etNL07zUII8Jh+rdSZdo448Ygjj5a5SpXrFQaKg7vgW+eaGkml5MTOwjCbFA2bu6spI6fmUMLSoX7bRfRXQhOuz/e8Ia5MX+AH2DNSl/VSVsGNuXnRG8rrkHqnnNxwGJgVLOQAaUtwArTJX8oddQajmg0WRvceYxHeWdXImuqNvXhUhTQkYaqO9HegnXhVEY0ex7LUngftpziK/T0QNODoJ6h+rmdjBShYoUoD6I7424N67UcxDCftQxlkTVJHXynIBZVYzIubaZPivqonmgjT95TqpfWzVF0vO+y9nyAp9/RBHpJh9E3KgpG32G9jPuf4HLNyyP/1i9YJMa7StINXkHjXcYU3PpVn]]></Encrypt>
<MsgSignature><![CDATA[ce524157686fd2022a46196135d83cf8bd78ccc4]]></MsgSignatu
2026-01-13 14:07:07 - Frederica - DEBUG - logger:95 - 响应是否包含XML: False
2026-01-13 14:07:07 - Frederica - DEBUG - logger:95 - 响应状态: 200 OK
2026-01-13 14:07:07 - Frederica - DEBUG - logger:95 - 响应Content-Type: text/xml; charset=utf-8
2026-01-13 14:07:08 - Frederica - INFO - logger:99 - 拉取到 1 条客服消息
2026-01-13 14:07:08 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 14:08:24 - Frederica - INFO - logger:99 - 收到POST请求: /callback?msg_signature=0a6b44a6ef63556e5581034f5d8512a0dcf0705a&timestamp=1768284502&nonce=1768822512
2026-01-13 14:08:24 - Frederica - INFO - logger:99 - 查询参数: {'msg_signature': '0a6b44a6ef63556e5581034f5d8512a0dcf0705a', 'timestamp': '1768284502', 'nonce': '1768822512'}
2026-01-13 14:08:24 - Frederica - INFO - logger:99 - 请求体长度: 640
2026-01-13 14:08:24 - Frederica - DEBUG - logger:95 - 原始查询参数: {'msg_signature': ['0a6b44a6ef63556e5581034f5d8512a0dcf0705a'], 'timestamp': ['1768284502'], 'nonce': ['1768822512']}
2026-01-13 14:08:24 - Frederica - DEBUG - logger:95 - 解析后的URL: ParseResult(scheme='', netloc='', path='/callback', params='', query='msg_signature=0a6b44a6ef63556e5581034f5d8512a0dcf0705a&timestamp=1768284502&nonce=1768822512', fragment='')
2026-01-13 14:08:24 - Frederica - DEBUG - logger:95 - 请求头: {'x-forwarded-for': '183.47.98.168', 'Accept': '*/*', 'Content-Type': 'text/xml', 'User-Agent': 'Mozilla/4.0', 'Pragma': 'no-cache', 'cf-ray': '9bd2b8004f92d5a5-AMS', 'Host': 'tx6p.paleflame.top:8080', 'Content-Length': '640', 'cdn-loop': 'cloudflare; loops=1', 'CF-Connecting-IP': '183.47.98.168', 'CF-IPCountry': 'CN', 'CF-Visitor': '{"scheme":"http"}', 'X-Forwarded-Proto': 'http', 'accept-encoding': 'gzip', 'Connection': 'Keep-Alive'}
2026-01-13 14:08:24 - Frederica - DEBUG - logger:95 - Content-Length: 640
2026-01-13 14:08:24 - Frederica - DEBUG - logger:95 - 参数 msg_signature: 0a6b44a6ef63556e5581034f5d8512a0dcf0705a (长度: 40)
2026-01-13 14:08:24 - Frederica - DEBUG - logger:95 - 参数 timestamp: 1768284502 (长度: 10)
2026-01-13 14:08:24 - Frederica - DEBUG - logger:95 - 参数 nonce: 1768822512 (长度: 10)
2026-01-13 14:08:24 - Frederica - DEBUG - logger:95 - 请求体前500字符: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><Encrypt><![CDATA[nC9iGitmNxyvmIJ2Djrlb1KWxIb896r2QCt2R5HfgJYtYUzDT35cnY8huv9QowluPvS69kwbya4lcP0SCnwhjjuqSbxT+y253WnquTwygksk/BSsWrr/tKp/vpy3QGP132101mTsovjQdKIgC/vKgkmElDUyTDjg4HmNtNmo82DnQsjXdq6h67A1vWO2mlBcSLGLVGwW0ibArgtIMTknYHCsGUAc1PI29gD+RCTcr+r8lEGsAEdudQkFHdfjOgdN5bFi57A5rkXnrkAcTwcsF03wcJ+SMW2oKYQCAPlwza+SC4orqoyAm9fj9pqlwTV7CPuNB1sgVExLDRGv10kf0sOmCzqNUlZt1seHzKAZce6/b3zRV2tcQEpc1qrqVgH+LRWmZS0ZiGHRJfi7w79bmLqqjRMwh1giCmGHrd
2026-01-13 14:08:24 - Frederica - DEBUG - logger:95 - 请求体MD5: -4937470041410768043
2026-01-13 14:08:24 - Frederica - DEBUG - logger:95 - 请求体是否包含XML: False
2026-01-13 14:08:24 - Frederica - DEBUG - logger:95 - 开始处理POST回调请求...
2026-01-13 14:08:24 - Frederica - INFO - logger:99 - 处理回调请求: 方法=POST, 参数={'msg_signature': '0a6b44a6ef63556e5581034f5d8512a0dcf0705a', 'timestamp': '1768284502', 'nonce': '1768822512'}
2026-01-13 14:08:24 - Frederica - DEBUG - logger:95 - 请求方法: POST
2026-01-13 14:08:24 - Frederica - DEBUG - logger:95 - 完整查询参数: {'msg_signature': '0a6b44a6ef63556e5581034f5d8512a0dcf0705a', 'timestamp': '1768284502', 'nonce': '1768822512'}
2026-01-13 14:08:24 - Frederica - DEBUG - logger:95 - 请求体长度: 640
2026-01-13 14:08:24 - Frederica - DEBUG - logger:95 - msg_signature: 0a6b44a6ef63556e5581... (长度: 40)
2026-01-13 14:08:24 - Frederica - DEBUG - logger:95 - timestamp: 1768284502
2026-01-13 14:08:24 - Frederica - DEBUG - logger:95 - nonce: 1768822512
2026-01-13 14:08:24 - Frederica - INFO - logger:99 - 处理POST消息请求，请求体长度: 640
2026-01-13 14:08:24 - Frederica - DEBUG - logger:95 - 解密后的XML: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><CreateTime>1768284502</CreateTime><MsgType><![CDATA[event]]></MsgType><Event><![CDATA[kf_msg_or_event]]></Event><Token><![CDATA[ENC5pSGoYoMZ9uqXxXMM6qdFWWG5LxDbfJYDpgeExY7WkrK]]></Token><OpenKfId><![CDATA[wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ]]></OpenKfId></xml>
2026-01-13 14:08:24 - Frederica - INFO - logger:99 - 直接解析XML: MsgType=event, Event=kf_msg_or_event
2026-01-13 14:08:24 - Frederica - INFO - logger:99 - wechatpy解析: 类型=unknown, 发送者=None
2026-01-13 14:08:24 - Frederica - INFO - logger:99 - 处理客服消息事件 (kf_msg_or_event)
2026-01-13 14:08:24 - Frederica - DEBUG - logger:95 - 提取到Token: ENC5pSGoYoMZ9uqXxXMM...
2026-01-13 14:08:24 - Frederica - DEBUG - logger:95 - 提取到OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:08:24 - Frederica - INFO - logger:99 - 客服事件已接收，Token: ENC5pSGoYoMZ9uqXxXMM..., OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:08:24 - Frederica - INFO - logger:99 - 开始拉取微信客服消息，open_kfid: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:08:24 - Frederica - INFO - logger:99 - 已启动消息拉取线程
2026-01-13 14:08:24 - Frederica - INFO - logger:99 - 2400:cb00:521:1000:27af:fa06:84fd:dcda - "POST /callback?msg_signature=0a6b44a6ef63556e5581034f5d8512a0dcf0705a&timestamp=1768284502&nonce=1768822512 HTTP/1.1" 200 -
2026-01-13 14:08:24 - Frederica - INFO - logger:99 - POST请求处理完成，响应长度: 582
2026-01-13 14:08:24 - Frederica - DEBUG - logger:95 - 响应内容前500字符: <xml>
<Encrypt><![CDATA[Z/QqePQz25vKVRpHNK99kL7FITudrcHI1Kz0qS/WlkMcWUgRFzHTsUdT/6oQH1LB8dZF2jy6fHCTpTkTfLpjvg0w+dmb0OBFzwKJh/OfZmgx6lzqKOO73nM/E1vNHXLrvirWohJaNhp3AMa4lwSR0hlFF7dU8GegCSd9qTmJY8v/U7YT2MoxNe3Ft9AUFYUjdYlUJjwZyl1qeCMEl4NzgOWPdz9f8db9g/GmvZoOvG5ZqHcKw1Bpic8J6eoX84VsZjBPyPFgUzFnB/hJPZiRxI5ikHtpXXe4leS70qT3BPeg0volkhGy58xK2zk0vZX2ENT6DFD4oFXCgfJEHZSRET/1uQtj+IgwtT0irOHkxjgHDLkDWqEkvtE/2Ur+1oZm]]></Encrypt>
<MsgSignature><![CDATA[6ce1219a58028bab57627875c82ee441f5f422ec]]></MsgSignatu
2026-01-13 14:08:24 - Frederica - DEBUG - logger:95 - 响应是否包含XML: False
2026-01-13 14:08:24 - Frederica - DEBUG - logger:95 - 响应状态: 200 OK
2026-01-13 14:08:24 - Frederica - DEBUG - logger:95 - 响应Content-Type: text/xml; charset=utf-8
2026-01-13 14:08:25 - Frederica - INFO - logger:99 - 拉取到 1 条客服消息
2026-01-13 14:08:25 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 14:10:50 - Frederica - INFO - logger:99 - 收到POST请求: /callback?msg_signature=831b815e095b7ee12ea40862b56f8e08615572c5&timestamp=1768284648&nonce=1768881074
2026-01-13 14:10:50 - Frederica - INFO - logger:99 - 查询参数: {'msg_signature': '831b815e095b7ee12ea40862b56f8e08615572c5', 'timestamp': '1768284648', 'nonce': '1768881074'}
2026-01-13 14:10:50 - Frederica - INFO - logger:99 - 请求体长度: 640
2026-01-13 14:10:50 - Frederica - DEBUG - logger:95 - 原始查询参数: {'msg_signature': ['831b815e095b7ee12ea40862b56f8e08615572c5'], 'timestamp': ['1768284648'], 'nonce': ['1768881074']}
2026-01-13 14:10:50 - Frederica - DEBUG - logger:95 - 解析后的URL: ParseResult(scheme='', netloc='', path='/callback', params='', query='msg_signature=831b815e095b7ee12ea40862b56f8e08615572c5&timestamp=1768284648&nonce=1768881074', fragment='')
2026-01-13 14:10:50 - Frederica - DEBUG - logger:95 - 请求头: {'x-forwarded-for': '183.47.98.227', 'Accept': '*/*', 'Content-Type': 'text/xml', 'User-Agent': 'Mozilla/4.0', 'Pragma': 'no-cache', 'cf-ray': '9bd2bb9069ec9fcc-AMS', 'Host': 'tx6p.paleflame.top:8080', 'Content-Length': '640', 'cdn-loop': 'cloudflare; loops=1', 'CF-Connecting-IP': '183.47.98.227', 'CF-IPCountry': 'CN', 'CF-Visitor': '{"scheme":"http"}', 'X-Forwarded-Proto': 'http', 'accept-encoding': 'gzip', 'Connection': 'Keep-Alive'}
2026-01-13 14:10:50 - Frederica - DEBUG - logger:95 - Content-Length: 640
2026-01-13 14:10:50 - Frederica - DEBUG - logger:95 - 参数 msg_signature: 831b815e095b7ee12ea40862b56f8e08615572c5 (长度: 40)
2026-01-13 14:10:50 - Frederica - DEBUG - logger:95 - 参数 timestamp: 1768284648 (长度: 10)
2026-01-13 14:10:50 - Frederica - DEBUG - logger:95 - 参数 nonce: 1768881074 (长度: 10)
2026-01-13 14:10:50 - Frederica - DEBUG - logger:95 - 请求体前500字符: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><Encrypt><![CDATA[ZWMSZX5/7trzq0PFCv61o9IALeBQuSO6wT0DL+SJr/hVGisWhKHesSnVcBuyu1vvLLXD7plElv8ZQCdujvm6RmUAjpIux0Un1hFJtadYg8owwhMyQPr4Sj7N/Q46xgBVlVsgpT1cq1AWJldbUeUqsdA2kgI6ksQ+cOW8QqMocavyYPOSNIxT9t0X+bzmtB0X33sOnYKbaj7mkNns5bxS2/spcRE4yFVd3AysLdPfOkE09HN1xsSIK26a88ZNKeGqVGmH327CPCi+BnP0tH1Pp99FQFkBIc8esw9p2CpwZv2ugTD+9I0avNp+ZfogcUW5jlYHtZQ1ttRTmNnSrPYJL2A6oM3gU+MeAnjVFnsRr/arAlxAjwdc4RiWx/g6Df5U0EhEouDMh3UaP7jNK2/ralWs8IswSj6tRkqh5H
2026-01-13 14:10:50 - Frederica - DEBUG - logger:95 - 请求体MD5: -8350684656193339359
2026-01-13 14:10:50 - Frederica - DEBUG - logger:95 - 请求体是否包含XML: False
2026-01-13 14:10:50 - Frederica - DEBUG - logger:95 - 开始处理POST回调请求...
2026-01-13 14:10:50 - Frederica - INFO - logger:99 - 处理回调请求: 方法=POST, 参数={'msg_signature': '831b815e095b7ee12ea40862b56f8e08615572c5', 'timestamp': '1768284648', 'nonce': '1768881074'}
2026-01-13 14:10:50 - Frederica - DEBUG - logger:95 - 请求方法: POST
2026-01-13 14:10:50 - Frederica - DEBUG - logger:95 - 完整查询参数: {'msg_signature': '831b815e095b7ee12ea40862b56f8e08615572c5', 'timestamp': '1768284648', 'nonce': '1768881074'}
2026-01-13 14:10:50 - Frederica - DEBUG - logger:95 - 请求体长度: 640
2026-01-13 14:10:50 - Frederica - DEBUG - logger:95 - msg_signature: 831b815e095b7ee12ea4... (长度: 40)
2026-01-13 14:10:50 - Frederica - DEBUG - logger:95 - timestamp: 1768284648
2026-01-13 14:10:50 - Frederica - DEBUG - logger:95 - nonce: 1768881074
2026-01-13 14:10:50 - Frederica - INFO - logger:99 - 处理POST消息请求，请求体长度: 640
2026-01-13 14:10:50 - Frederica - DEBUG - logger:95 - 解密后的XML: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><CreateTime>1768284648</CreateTime><MsgType><![CDATA[event]]></MsgType><Event><![CDATA[kf_msg_or_event]]></Event><Token><![CDATA[ENCGRJR3CuCeSFttwepaVr2YvyXjmVXLKs7vJukhfjRuFQc]]></Token><OpenKfId><![CDATA[wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ]]></OpenKfId></xml>
2026-01-13 14:10:50 - Frederica - INFO - logger:99 - 直接解析XML: MsgType=event, Event=kf_msg_or_event
2026-01-13 14:10:50 - Frederica - INFO - logger:99 - wechatpy解析: 类型=unknown, 发送者=None
2026-01-13 14:10:50 - Frederica - INFO - logger:99 - 处理客服消息事件 (kf_msg_or_event)
2026-01-13 14:10:50 - Frederica - DEBUG - logger:95 - 提取到Token: ENCGRJR3CuCeSFttwepa...
2026-01-13 14:10:50 - Frederica - DEBUG - logger:95 - 提取到OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:10:50 - Frederica - INFO - logger:99 - 客服事件已接收，Token: ENCGRJR3CuCeSFttwepa..., OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:10:50 - Frederica - INFO - logger:99 - 开始拉取微信客服消息，open_kfid: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:10:50 - Frederica - INFO - logger:99 - 已启动消息拉取线程
2026-01-13 14:10:50 - Frederica - INFO - logger:99 - 2400:cb00:555:1000:ff7d:7fd2:90ea:f685 - "POST /callback?msg_signature=831b815e095b7ee12ea40862b56f8e08615572c5&timestamp=1768284648&nonce=1768881074 HTTP/1.1" 200 -
2026-01-13 14:10:50 - Frederica - INFO - logger:99 - POST请求处理完成，响应长度: 582
2026-01-13 14:10:50 - Frederica - DEBUG - logger:95 - 响应内容前500字符: <xml>
<Encrypt><![CDATA[JwDAfVSuzXvFqdOwTH8iPDZN2azhRAQjxcPK31ByrTXKNoQWpydR5iso10qU2Ga76ekkEKhVd7Ptg4gYqmiX/zOnFa7Nzr0Engd/DBENGzanT5rYmZXwL4+9f9c16lCUFQqSIfgSPOrOGZdYvyTvkLLL3jkqP0fmDzqJZVN+uHi9D5FR+hiAYv1PsLIEvMNQv1daUabmwMhd1xTOr94jR/h7CL/3owITbu51Gfm6NI/nnZYO3R8e4xf96hvob+onrrpZYFfhI0MjDs+x2pgw9xVtJK+GSCgAE/e5P8zzH4hTWTe5vlkg2Oiznr2mYy1pWrGaD80SKnsANsRqDkRclTBTdqL46Gbh+iXzVOAGo1OMzlzxLsc0cp3Aj+y587Kj]]></Encrypt>
<MsgSignature><![CDATA[66fe48199fab31123328c785677d26424492fb73]]></MsgSignatu
2026-01-13 14:10:50 - Frederica - DEBUG - logger:95 - 响应是否包含XML: False
2026-01-13 14:10:50 - Frederica - DEBUG - logger:95 - 响应状态: 200 OK
2026-01-13 14:10:50 - Frederica - DEBUG - logger:95 - 响应Content-Type: text/xml; charset=utf-8
2026-01-13 14:10:51 - Frederica - INFO - logger:99 - 拉取到 1 条客服消息
2026-01-13 14:10:51 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 14:12:24 - Frederica - INFO - logger:99 - 收到POST请求: /callback?msg_signature=54749da718319c4701e1d6862d07db9668788606&timestamp=1768284741&nonce=1768861299
2026-01-13 14:12:24 - Frederica - INFO - logger:99 - 查询参数: {'msg_signature': '54749da718319c4701e1d6862d07db9668788606', 'timestamp': '1768284741', 'nonce': '1768861299'}
2026-01-13 14:12:24 - Frederica - INFO - logger:99 - 请求体长度: 640
2026-01-13 14:12:24 - Frederica - DEBUG - logger:95 - 原始查询参数: {'msg_signature': ['54749da718319c4701e1d6862d07db9668788606'], 'timestamp': ['1768284741'], 'nonce': ['1768861299']}
2026-01-13 14:12:24 - Frederica - DEBUG - logger:95 - 解析后的URL: ParseResult(scheme='', netloc='', path='/callback', params='', query='msg_signature=54749da718319c4701e1d6862d07db9668788606&timestamp=1768284741&nonce=1768861299', fragment='')
2026-01-13 14:12:24 - Frederica - DEBUG - logger:95 - 请求头: {'x-forwarded-for': '14.116.241.251', 'Accept': '*/*', 'Content-Type': 'text/xml', 'User-Agent': 'Mozilla/4.0', 'Pragma': 'no-cache', 'cf-ray': '9bd2bdd67ed5312a-AMS', 'Host': 'tx6p.paleflame.top:8080', 'Content-Length': '640', 'cdn-loop': 'cloudflare; loops=1', 'CF-Connecting-IP': '14.116.241.251', 'CF-IPCountry': 'CN', 'CF-Visitor': '{"scheme":"http"}', 'X-Forwarded-Proto': 'http', 'accept-encoding': 'gzip', 'Connection': 'Keep-Alive'}
2026-01-13 14:12:24 - Frederica - DEBUG - logger:95 - Content-Length: 640
2026-01-13 14:12:24 - Frederica - DEBUG - logger:95 - 参数 msg_signature: 54749da718319c4701e1d6862d07db9668788606 (长度: 40)
2026-01-13 14:12:24 - Frederica - DEBUG - logger:95 - 参数 timestamp: 1768284741 (长度: 10)
2026-01-13 14:12:24 - Frederica - DEBUG - logger:95 - 参数 nonce: 1768861299 (长度: 10)
2026-01-13 14:12:24 - Frederica - DEBUG - logger:95 - 请求体前500字符: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><Encrypt><![CDATA[kzt+2rIh/EVx5V2X98seTX9MnH0u+vbGA2dZROw93gOSAK+hpW4vbYg0g95onWXnpL9r4QB8vo6TiVfUsSzGILcR1Nn8l1QzCOg9A7MwhW8fgabf42Co84DfZuJrBZimMfPK5lu+iCQRx+j6i78jYiX7QjHUK3WO6kDOHBvoQERCAzAVODlUCIiPtdPFmkBAN9pDU0I5nXBzIcjMzjytD1Ji9t76h3vg67o87XQl/AYaZ+Wo7B8JhjrAmVC0bcu2bU0ew+RZ24OxVe7Uecvq3MNHXD0OgPlup/GUrq5BpBI63Nlfr36hth/M9rmuNJJqLXGUIEyjNQBHO1HqgaXnZax/11OSykw2w5tDdcvw0XGLDOOy5LrEk3vz7dlAugBsIRs5d40B57S23LwyZ3KKK5X2Hpzx1QaAjvq0Nq
2026-01-13 14:12:24 - Frederica - DEBUG - logger:95 - 请求体MD5: -2038407621088318783
2026-01-13 14:12:24 - Frederica - DEBUG - logger:95 - 请求体是否包含XML: False
2026-01-13 14:12:24 - Frederica - DEBUG - logger:95 - 开始处理POST回调请求...
2026-01-13 14:12:24 - Frederica - INFO - logger:99 - 处理回调请求: 方法=POST, 参数={'msg_signature': '54749da718319c4701e1d6862d07db9668788606', 'timestamp': '1768284741', 'nonce': '1768861299'}
2026-01-13 14:12:24 - Frederica - DEBUG - logger:95 - 请求方法: POST
2026-01-13 14:12:24 - Frederica - DEBUG - logger:95 - 完整查询参数: {'msg_signature': '54749da718319c4701e1d6862d07db9668788606', 'timestamp': '1768284741', 'nonce': '1768861299'}
2026-01-13 14:12:24 - Frederica - DEBUG - logger:95 - 请求体长度: 640
2026-01-13 14:12:24 - Frederica - DEBUG - logger:95 - msg_signature: 54749da718319c4701e1... (长度: 40)
2026-01-13 14:12:24 - Frederica - DEBUG - logger:95 - timestamp: 1768284741
2026-01-13 14:12:24 - Frederica - DEBUG - logger:95 - nonce: 1768861299
2026-01-13 14:12:24 - Frederica - INFO - logger:99 - 处理POST消息请求，请求体长度: 640
2026-01-13 14:12:24 - Frederica - DEBUG - logger:95 - 解密后的XML: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><CreateTime>1768284741</CreateTime><MsgType><![CDATA[event]]></MsgType><Event><![CDATA[kf_msg_or_event]]></Event><Token><![CDATA[ENC4555JHuZ2h3fGBZs8a8REYs7YiHVjX1sBJRgCD6vGQTk]]></Token><OpenKfId><![CDATA[wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ]]></OpenKfId></xml>
2026-01-13 14:12:24 - Frederica - INFO - logger:99 - 直接解析XML: MsgType=event, Event=kf_msg_or_event
2026-01-13 14:12:24 - Frederica - INFO - logger:99 - wechatpy解析: 类型=unknown, 发送者=None
2026-01-13 14:12:24 - Frederica - INFO - logger:99 - 处理客服消息事件 (kf_msg_or_event)
2026-01-13 14:12:24 - Frederica - DEBUG - logger:95 - 提取到Token: ENC4555JHuZ2h3fGBZs8...
2026-01-13 14:12:24 - Frederica - DEBUG - logger:95 - 提取到OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:12:24 - Frederica - INFO - logger:99 - 客服事件已接收，Token: ENC4555JHuZ2h3fGBZs8..., OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:12:24 - Frederica - INFO - logger:99 - 开始拉取微信客服消息，open_kfid: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:12:24 - Frederica - INFO - logger:99 - 已启动消息拉取线程
2026-01-13 14:12:24 - Frederica - INFO - logger:99 - 2400:cb00:995:1000:4de2:3fda:ca28:a570 - "POST /callback?msg_signature=54749da718319c4701e1d6862d07db9668788606&timestamp=1768284741&nonce=1768861299 HTTP/1.1" 200 -
2026-01-13 14:12:24 - Frederica - INFO - logger:99 - POST请求处理完成，响应长度: 582
2026-01-13 14:12:24 - Frederica - DEBUG - logger:95 - 响应内容前500字符: <xml>
<Encrypt><![CDATA[m4v8e57ki//gwwJGjcSL97KmDZxYiXEIhMYFpxv277F5IIMwTiOaMp/TU5M7rToarJ7Q325iANeDYq3l02UPbR7Nvd+kj9lpwJcCzGO7JbQJf6o6WMjjmNSHz790xNNZ8jyj4elTun4XcYcH31zvV1sUbT3W9R2yqUMdlj+dmgx4iai6TuRYd3NCZ+6YJS7ryq7yyz2voIx40QWGsjRGzQUY8iGx8bSHPRnsw5uB+ABbzqONIvhfCcrn72+sYiCmxGNumtDLae+eoQEyKHBt/6qpwx2fVO4u8huzB2PhShX0blKgLHIJlc3P9IMOTGMqMfEUioiVa7CgX44jXBHZjREvhf0u4TsHSFdIN3ZztOLIp57K1ouhm3FnNgMns9KC]]></Encrypt>
<MsgSignature><![CDATA[fceb610eac017ff00e51ac949b7cc892223579c5]]></MsgSignatu
2026-01-13 14:12:24 - Frederica - DEBUG - logger:95 - 响应是否包含XML: False
2026-01-13 14:12:24 - Frederica - DEBUG - logger:95 - 响应状态: 200 OK
2026-01-13 14:12:24 - Frederica - DEBUG - logger:95 - 响应Content-Type: text/xml; charset=utf-8
2026-01-13 14:12:24 - Frederica - INFO - logger:99 - 拉取到 1 条客服消息
2026-01-13 14:12:24 - Frederica - DEBUG - logger:95 - 跳过非客户消息，origin: 4
2026-01-13 14:14:04 - Frederica - INFO - logger:99 - 收到POST请求: /callback?msg_signature=f0c8ee3e04b93b205668402340e7c3440683dbb3&timestamp=1768284841&nonce=1768485961
2026-01-13 14:14:04 - Frederica - INFO - logger:99 - 查询参数: {'msg_signature': 'f0c8ee3e04b93b205668402340e7c3440683dbb3', 'timestamp': '1768284841', 'nonce': '1768485961'}
2026-01-13 14:14:04 - Frederica - INFO - logger:99 - 请求体长度: 607
2026-01-13 14:14:04 - Frederica - DEBUG - logger:95 - 原始查询参数: {'msg_signature': ['f0c8ee3e04b93b205668402340e7c3440683dbb3'], 'timestamp': ['1768284841'], 'nonce': ['1768485961']}
2026-01-13 14:14:04 - Frederica - DEBUG - logger:95 - 解析后的URL: ParseResult(scheme='', netloc='', path='/callback', params='', query='msg_signature=f0c8ee3e04b93b205668402340e7c3440683dbb3&timestamp=1768284841&nonce=1768485961', fragment='')
2026-01-13 14:14:04 - Frederica - DEBUG - logger:95 - 请求头: {'x-forwarded-for': '113.108.92.100', 'Accept': '*/*', 'Content-Type': 'text/xml', 'User-Agent': 'Mozilla/4.0', 'Pragma': 'no-cache', 'cf-ray': '9bd2c04779946662-AMS', 'Host': 'tx6p.paleflame.top:8080', 'Content-Length': '607', 'cdn-loop': 'cloudflare; loops=1', 'CF-Connecting-IP': '113.108.92.100', 'CF-IPCountry': 'CN', 'CF-Visitor': '{"scheme":"http"}', 'X-Forwarded-Proto': 'http', 'accept-encoding': 'gzip', 'Connection': 'Keep-Alive'}
2026-01-13 14:14:04 - Frederica - DEBUG - logger:95 - Content-Length: 607
2026-01-13 14:14:04 - Frederica - DEBUG - logger:95 - 参数 msg_signature: f0c8ee3e04b93b205668402340e7c3440683dbb3 (长度: 40)
2026-01-13 14:14:04 - Frederica - DEBUG - logger:95 - 参数 timestamp: 1768284841 (长度: 10)
2026-01-13 14:14:04 - Frederica - DEBUG - logger:95 - 参数 nonce: 1768485961 (长度: 10)
2026-01-13 14:14:04 - Frederica - DEBUG - logger:95 - 请求体前500字符: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><Encrypt><![CDATA[tJ5cYwGnKmp+8tTqHG/LZrSoh0EFdSvlwNbwXiNfp6tEsUjjBUZTTcMKvnvsQkPOO1qqWgVFII3kHrg0U3RmYpfhFlBAPYzsfNX2Yqf8oSy9M9VIlKghsINsjXEKOpCHHXFjweBlCH1dVn97j3zdG7mYXpEUstnD9tSo0NP+Mc9BZ2FcKJDzjvwsiCSxto5AygOMK8UPJVJglsUw4rr20+/WG4NUsrUtd9KiTgJ/4W+tzTd3IwI9UqkClY/JX9UAZz9gRDYMVpu+Lu1Qq8EgpN4jsM1V5iw2XGW09oBA92Dsax3E0Oar3ZfgD8lUZd5BoOoJGf/gSqiLY5HYsILDomLH76vyK1dykMArXmmae4qVEIqVznEweeS4FSsP7625OM06kdflObnh8KdLAEGL0Ngy8Uoh3i+7whgDDh
2026-01-13 14:14:04 - Frederica - DEBUG - logger:95 - 请求体MD5: -5821272932579899652
2026-01-13 14:14:04 - Frederica - DEBUG - logger:95 - 请求体是否包含XML: False
2026-01-13 14:14:04 - Frederica - DEBUG - logger:95 - 开始处理POST回调请求...
2026-01-13 14:14:04 - Frederica - INFO - logger:99 - 处理回调请求: 方法=POST, 参数={'msg_signature': 'f0c8ee3e04b93b205668402340e7c3440683dbb3', 'timestamp': '1768284841', 'nonce': '1768485961'}
2026-01-13 14:14:04 - Frederica - DEBUG - logger:95 - 请求方法: POST
2026-01-13 14:14:04 - Frederica - DEBUG - logger:95 - 完整查询参数: {'msg_signature': 'f0c8ee3e04b93b205668402340e7c3440683dbb3', 'timestamp': '1768284841', 'nonce': '1768485961'}
2026-01-13 14:14:04 - Frederica - DEBUG - logger:95 - 请求体长度: 607
2026-01-13 14:14:04 - Frederica - DEBUG - logger:95 - msg_signature: f0c8ee3e04b93b205668... (长度: 40)
2026-01-13 14:14:04 - Frederica - DEBUG - logger:95 - timestamp: 1768284841
2026-01-13 14:14:04 - Frederica - DEBUG - logger:95 - nonce: 1768485961
2026-01-13 14:14:04 - Frederica - INFO - logger:99 - 处理POST消息请求，请求体长度: 607
2026-01-13 14:14:04 - Frederica - DEBUG - logger:95 - 解密后的XML: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><FromUserName><![CDATA[ChenMingHao]]></FromUserName><CreateTime>1768284841</CreateTime><MsgType><![CDATA[text]]></MsgType><Content><![CDATA[你在吗]]></Content><MsgId>7594725565526455389</MsgId><AgentID>1000002</AgentID></xml>
2026-01-13 14:14:04 - Frederica - INFO - logger:99 - 直接解析XML: MsgType=text, Event=None
2026-01-13 14:14:04 - Frederica - INFO - logger:99 - wechatpy解析: 类型=text, 发送者=ChenMingHao
2026-01-13 14:14:04 - Frederica - INFO - logger:99 - 收到文本消息来自 ChenMingHao: 你在吗...
2026-01-13 14:14:04 - Frederica - INFO - logger:99 - 消息已添加到处理队列，当前队列大小: 1
2026-01-13 14:14:04 - Frederica - INFO - logger:99 - 2400:cb00:522:1000:de93:d02:e548:a23e - "POST /callback?msg_signature=f0c8ee3e04b93b205668402340e7c3440683dbb3&timestamp=1768284841&nonce=1768485961 HTTP/1.1" 200 -
2026-01-13 14:14:04 - Frederica - INFO - logger:99 - POST请求处理完成，响应长度: 626
2026-01-13 14:14:04 - Frederica - DEBUG - logger:95 - 响应内容前500字符: <xml>
<Encrypt><![CDATA[RClQI+jgSehv+X+S6ZWu7YU571X1lNamwEeDVNqqdJenwaJHuLkGvbRq66uISIZk33Oa8i1llrhFMioz1PzgG4PsnhgK8oH9+H7+QB4S5FqdR8tZHR4oESvnVz8uHr7tOd3PsccPxmlDJfYRns8lKveYGnqD//JAAJv4NVd/VqHZ6hMdB2A8nIqkkVr2PrKl0hq9xTjJ6isryWaBRXM8x7275LMRrd+FKM5TdILN28j+pYVTXUc1+52VNlFWDieaEuyiRVk0RKn0SYhvlgD1nUO5k3kVn9GWIJmyLiz/K6R+7JLEVtYWAHLgV8BA75g2zcJQ+4AVM0h866Z1Ru4axiY1Zfeam3Qa66mMmBpMA5v2MVb1drUvTJ8lXhiNN7jEU3yFw9ByKwVZ/8l5ZveZYqZxClowv1W9bERNwg5HKxw=]]></Encrypt>
<MsgSignature><![CDATA[e68dc677799
2026-01-13 14:14:04 - Frederica - DEBUG - logger:95 - 响应是否包含XML: False
2026-01-13 14:14:04 - Frederica - DEBUG - logger:95 - 响应状态: 200 OK
2026-01-13 14:14:04 - Frederica - DEBUG - logger:95 - 响应Content-Type: text/xml; charset=utf-8
2026-01-13 14:14:04 - Frederica - DEBUG - logger:95 - 开始处理第 30 条消息: 7594725565526455389
2026-01-13 14:14:04 - Frederica - INFO - logger:99 - 为 ChenMingHao 生成响应...
2026-01-13 14:14:06 - Frederica - INFO - logger:99 - 为 ChenMingHao 生成响应完成
2026-01-13 14:14:06 - Frederica - DEBUG - logger:95 - 第 30 条消息处理完成
2026-01-13 14:14:06 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 30 条消息)
2026-01-13 14:14:06 - Frederica - INFO - logger:99 - 已发送企业微信消息给 ChenMingHao: 在的！我是Frederica，很高兴见到你！有什么我可以帮你的吗？😊...
2026-01-13 14:14:07 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 30 条消息)
2026-01-13 14:14:07 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 30 条消息)
2026-01-13 14:14:08 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 30 条消息)
2026-01-13 14:14:08 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 30 条消息)
2026-01-13 14:14:09 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 30 条消息)
2026-01-13 14:14:10 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 30 条消息)
2026-01-13 14:14:10 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 30 条消息)
2026-01-13 14:14:11 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 30 条消息)
2026-01-13 14:14:11 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 30 条消息)
2026-01-13 14:14:12 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 30 条消息)
2026-01-13 14:14:13 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 30 条消息)
2026-01-13 14:14:13 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 30 条消息)
2026-01-13 14:14:14 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 30 条消息)
2026-01-13 14:14:15 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 30 条消息)
2026-01-13 14:14:15 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 30 条消息)
2026-01-13 14:14:16 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 30 条消息)
2026-01-13 14:14:16 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 30 条消息)
2026-01-13 14:14:17 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 30 条消息)
2026-01-13 14:14:18 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 30 条消息)
2026-01-13 14:14:18 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 30 条消息)
2026-01-13 14:14:19 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 30 条消息)
2026-01-13 14:14:19 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 30 条消息)
2026-01-13 14:14:20 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 30 条消息)
2026-01-13 14:14:21 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 30 条消息)
2026-01-13 14:14:21 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 30 条消息)
2026-01-13 14:14:22 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 30 条消息)
2026-01-13 14:14:22 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 30 条消息)
2026-01-13 14:14:23 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 30 条消息)
2026-01-13 14:14:24 - Frederica - DEBUG - logger:95 - 消息队列为空，等待中... (已处理 30 条消息)
2026-01-13 14:14:24 - Frederica - INFO - logger:99 - 收到POST请求: /callback?msg_signature=d003018e0322a70ab02f69d0819e2722e9181919&timestamp=1768284860&nonce=1768731404
2026-01-13 14:14:24 - Frederica - INFO - logger:99 - 查询参数: {'msg_signature': 'd003018e0322a70ab02f69d0819e2722e9181919', 'timestamp': '1768284860', 'nonce': '1768731404'}
2026-01-13 14:14:24 - Frederica - INFO - logger:99 - 请求体长度: 607
2026-01-13 14:14:24 - Frederica - DEBUG - logger:95 - 原始查询参数: {'msg_signature': ['d003018e0322a70ab02f69d0819e2722e9181919'], 'timestamp': ['1768284860'], 'nonce': ['1768731404']}
2026-01-13 14:14:24 - Frederica - DEBUG - logger:95 - 解析后的URL: ParseResult(scheme='', netloc='', path='/callback', params='', query='msg_signature=d003018e0322a70ab02f69d0819e2722e9181919&timestamp=1768284860&nonce=1768731404', fragment='')
2026-01-13 14:14:24 - Frederica - DEBUG - logger:95 - 请求头: {'x-forwarded-for': '14.116.241.251', 'Accept': '*/*', 'Content-Type': 'text/xml', 'User-Agent': 'Mozilla/4.0', 'Pragma': 'no-cache', 'cf-ray': '9bd2c0bd6d50c891-AMS', 'Host': 'tx6p.paleflame.top:8080', 'Content-Length': '607', 'cdn-loop': 'cloudflare; loops=1', 'CF-Connecting-IP': '14.116.241.251', 'CF-IPCountry': 'CN', 'CF-Visitor': '{"scheme":"http"}', 'X-Forwarded-Proto': 'http', 'accept-encoding': 'gzip', 'Connection': 'Keep-Alive'}
2026-01-13 14:14:24 - Frederica - DEBUG - logger:95 - Content-Length: 607
2026-01-13 14:14:24 - Frederica - DEBUG - logger:95 - 参数 msg_signature: d003018e0322a70ab02f69d0819e2722e9181919 (长度: 40)
2026-01-13 14:14:24 - Frederica - DEBUG - logger:95 - 参数 timestamp: 1768284860 (长度: 10)
2026-01-13 14:14:24 - Frederica - DEBUG - logger:95 - 参数 nonce: 1768731404 (长度: 10)
2026-01-13 14:14:24 - Frederica - DEBUG - logger:95 - 请求体前500字符: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><Encrypt><![CDATA[gwyPMYQp/p+3rxXNuVNqpK7VXs9JrEuOA4xWjTLpgYKmpaQiDLk2CCMyGpKqMuPqx3CXJikbLIz7mwAdXvHNo/uOAYZQT/8M5r31TzUkibsygMxE9a59BXXv5vnwyC/sVCswnAWOAd1g9Y7ris6FZ1n0uJV5H2XUidktZpfI60zKRF7C5Su4FQEiDDkXo532oWOjWOBcD5mL1jhuL2xA7nbczYn1od69J3pNn78tAJLReI4hFRem8b+9ATjzvmHAfO7qfr5aD7ODd8fOSQlUP0CRgnmlPRhWoBdk10h9COBYVAJmO7mwhLYfqtuWORvCgF7I7Sw0u55TfjM8VadhsbwLoCTRb6Z0geIuiPB61A3mLNqASsvEVHC5ayIecfLlU61Kp0xglJ25PDs/KS7pFD8RZ0ks8KH9IJaBDI
2026-01-13 14:14:24 - Frederica - DEBUG - logger:95 - 请求体MD5: -7012512570407571816
2026-01-13 14:14:24 - Frederica - DEBUG - logger:95 - 请求体是否包含XML: False
2026-01-13 14:14:24 - Frederica - DEBUG - logger:95 - 开始处理POST回调请求...
2026-01-13 14:14:24 - Frederica - INFO - logger:99 - 处理回调请求: 方法=POST, 参数={'msg_signature': 'd003018e0322a70ab02f69d0819e2722e9181919', 'timestamp': '1768284860', 'nonce': '1768731404'}
2026-01-13 14:14:24 - Frederica - DEBUG - logger:95 - 请求方法: POST
2026-01-13 14:14:24 - Frederica - DEBUG - logger:95 - 完整查询参数: {'msg_signature': 'd003018e0322a70ab02f69d0819e2722e9181919', 'timestamp': '1768284860', 'nonce': '1768731404'}
2026-01-13 14:14:24 - Frederica - DEBUG - logger:95 - 请求体长度: 607
2026-01-13 14:14:24 - Frederica - DEBUG - logger:95 - msg_signature: d003018e0322a70ab02f... (长度: 40)
2026-01-13 14:14:24 - Frederica - DEBUG - logger:95 - timestamp: 1768284860
2026-01-13 14:14:24 - Frederica - DEBUG - logger:95 - nonce: 1768731404
2026-01-13 14:14:24 - Frederica - INFO - logger:99 - 处理POST消息请求，请求体长度: 607
2026-01-13 14:14:24 - Frederica - DEBUG - logger:95 - 解密后的XML: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><FromUserName><![CDATA[ChenMingHao]]></FromUserName><CreateTime>1768284860</CreateTime><MsgType><![CDATA[text]]></MsgType><Content><![CDATA[我的名字是？]]></Content><MsgId>7594725646063546461</MsgId><AgentID>1000002</AgentID></xml>
2026-01-13 14:14:24 - Frederica - INFO - logger:99 - 直接解析XML: MsgType=text, Event=None
2026-01-13 14:14:24 - Frederica - INFO - logger:99 - wechatpy解析: 类型=text, 发送者=ChenMingHao
2026-01-13 14:14:24 - Frederica - INFO - logger:99 - 收到文本消息来自 ChenMingHao: 我的名字是？...
2026-01-13 14:14:24 - Frederica - INFO - logger:99 - 消息已添加到处理队列，当前队列大小: 1
2026-01-13 14:14:24 - Frederica - DEBUG - logger:95 - 开始处理第 31 条消息: 7594725646063546461
2026-01-13 14:14:24 - Frederica - INFO - logger:99 - 2400:cb00:997:1000:74d9:8860:efcd:89dc - "POST /callback?msg_signature=d003018e0322a70ab02f69d0819e2722e9181919&timestamp=1768284860&nonce=1768731404 HTTP/1.1" 200 -
2026-01-13 14:14:24 - Frederica - INFO - logger:99 - POST请求处理完成，响应长度: 626
2026-01-13 14:14:24 - Frederica - DEBUG - logger:95 - 响应内容前500字符: <xml>
<Encrypt><![CDATA[0vfFyLiQ4iekYSt5+0icletZyHyOY9FyJXc+f9DOIKUWvnbYKpjyNbTVlSnbqzcktlRbmAng4YQlKN9FB3gRdulM32cVIQWIx3wDtVa8WYGFl2Oq/97lGLMND2w5DJ+VqTqqLNbNbHwELZIyHdZzhkSYn9HH7WWlt9+VqlSsmUQ//eiWFxJK2K4nKzQoNsAMgHAQm3KEJsNfD6X0RkFp66vQS0hsmQx+NhrfptNzeXeBbISlBywJasi9gYDIe0nC+Hqa6Hwb4Ql44nB95s51VoM/tg5Hl4wIwmzU3gsD+43ycAGur28D7NBdVVrVuGW+pxMgJ/8DlFxumxTkmB0eekIYILr8y18iO32lI73uRX+YQ2hawDY7zEFVVr9jLYneJkrVav81x+pgmwP6CMMHfRKz4isieh5MRGH9Qjn7FG8=]]></Encrypt>
<MsgSignature><![CDATA[41875346981
2026-01-13 14:14:24 - Frederica - DEBUG - logger:95 - 响应是否包含XML: False
2026-01-13 14:14:24 - Frederica - DEBUG - logger:95 - 响应状态: 200 OK
2026-01-13 14:14:24 - Frederica - DEBUG - logger:95 - 响应Content-Type: text/xml; charset=utf-8
2026-01-13 14:14:24 - Frederica - INFO - logger:99 - 为 ChenMingHao 生成响应...
2026-01-13 14:14:26 - Frederica - INFO - logger:99 - 为 ChenMingHao 生成响应完成
2026-01-13 14:14:26 - Frederica - DEBUG - logger:95 - 第 31 条消息处理完成
2026-01-13 14:14:27 - Frederica - INFO - logger:99 - 已发送企业微信消息给 ChenMingHao: 哈哈，你还没有告诉我你的名字呢！如果你愿意的话，可以告诉我你叫什么名字，这样我就能更好地记住你啦～ ...
2026-01-13 14:19:55 - Frederica - INFO - logger:99 - 收到POST请求: /callback?msg_signature=08f2318ffd31243a62de31763e2663a8362d7f8c&timestamp=1768285192&nonce=1768518402
2026-01-13 14:19:55 - Frederica - INFO - logger:99 - 查询参数: {'msg_signature': '08f2318ffd31243a62de31763e2663a8362d7f8c', 'timestamp': '1768285192', 'nonce': '1768518402'}
2026-01-13 14:19:55 - Frederica - INFO - logger:99 - 请求体长度: 607
2026-01-13 14:19:55 - Frederica - DEBUG - logger:95 - 原始查询参数: {'msg_signature': ['08f2318ffd31243a62de31763e2663a8362d7f8c'], 'timestamp': ['1768285192'], 'nonce': ['1768518402']}
2026-01-13 14:19:55 - Frederica - DEBUG - logger:95 - 解析后的URL: ParseResult(scheme='', netloc='', path='/callback', params='', query='msg_signature=08f2318ffd31243a62de31763e2663a8362d7f8c&timestamp=1768285192&nonce=1768518402', fragment='')
2026-01-13 14:19:55 - Frederica - DEBUG - logger:95 - 请求头: {'x-forwarded-for': '183.47.98.227', 'Accept': '*/*', 'Content-Type': 'text/xml', 'User-Agent': 'Mozilla/4.0', 'Pragma': 'no-cache', 'cf-ray': '9bd2c8d9baddb823-AMS', 'Host': 'tx6p.paleflame.top:8080', 'Content-Length': '607', 'cdn-loop': 'cloudflare; loops=1', 'CF-Connecting-IP': '183.47.98.227', 'CF-IPCountry': 'CN', 'CF-Visitor': '{"scheme":"http"}', 'X-Forwarded-Proto': 'http', 'accept-encoding': 'gzip', 'Connection': 'Keep-Alive'}
2026-01-13 14:19:55 - Frederica - DEBUG - logger:95 - Content-Length: 607
2026-01-13 14:19:55 - Frederica - DEBUG - logger:95 - 参数 msg_signature: 08f2318ffd31243a62de31763e2663a8362d7f8c (长度: 40)
2026-01-13 14:19:55 - Frederica - DEBUG - logger:95 - 参数 timestamp: 1768285192 (长度: 10)
2026-01-13 14:19:55 - Frederica - DEBUG - logger:95 - 参数 nonce: 1768518402 (长度: 10)
2026-01-13 14:19:55 - Frederica - DEBUG - logger:95 - 请求体前500字符: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><Encrypt><![CDATA[suIpp+JrouVsi7CUQHkt17T0U8WboSOwNXjqCPnaa0fFfWqzmDUG2F/Q1i6lvxeyDBuAjCxx+3k8TOLdTfF7pyJnYxZMxaIsdoJNgIalahG9S3nGpPQmSnhbkZGeJE+VGXS0s/qh23NDiJWXPU8jwT0mxTEqnsAa/TVTr9lmajX4KLprYF0cTEloVtk13dbFjN121ktbRWHOjmeJjapqGOIkYMak4lxwS/kpv/Ifwfl/Yi1c8lzT+oClLWJG8bRRcy5TR5+GOeUqe7Hu7DeRQD5o6tbnX0cAVMPFvzen487ek1ak38O2ZNOeVprJV5JpqRIfOCxjaP0c75cqRhsSrMtAcLclXOdK5m18uygLQT2ssetf/Cero124hQFcv1mp6GC146JpgQmHHWCW/u2Ug5HPxSpP2uYOautqHF
2026-01-13 14:19:55 - Frederica - DEBUG - logger:95 - 请求体MD5: -8778271109833772556
2026-01-13 14:19:55 - Frederica - DEBUG - logger:95 - 请求体是否包含XML: False
2026-01-13 14:19:55 - Frederica - DEBUG - logger:95 - 开始处理POST回调请求...
2026-01-13 14:19:55 - Frederica - INFO - logger:99 - 处理回调请求: 方法=POST, 参数={'msg_signature': '08f2318ffd31243a62de31763e2663a8362d7f8c', 'timestamp': '1768285192', 'nonce': '1768518402'}
2026-01-13 14:19:55 - Frederica - DEBUG - logger:95 - 请求方法: POST
2026-01-13 14:19:55 - Frederica - DEBUG - logger:95 - 完整查询参数: {'msg_signature': '08f2318ffd31243a62de31763e2663a8362d7f8c', 'timestamp': '1768285192', 'nonce': '1768518402'}
2026-01-13 14:19:55 - Frederica - DEBUG - logger:95 - 请求体长度: 607
2026-01-13 14:19:55 - Frederica - DEBUG - logger:95 - msg_signature: 08f2318ffd31243a62de... (长度: 40)
2026-01-13 14:19:55 - Frederica - DEBUG - logger:95 - timestamp: 1768285192
2026-01-13 14:19:55 - Frederica - DEBUG - logger:95 - nonce: 1768518402
2026-01-13 14:19:55 - Frederica - INFO - logger:99 - 处理POST消息请求，请求体长度: 607
2026-01-13 14:19:55 - Frederica - DEBUG - logger:95 - 解密后的XML: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><FromUserName><![CDATA[ChenMingHao]]></FromUserName><CreateTime>1768285192</CreateTime><MsgType><![CDATA[text]]></MsgType><Content><![CDATA[你是frederica]]></Content><MsgId>7594727072915561565</MsgId><AgentID>1000002</AgentID></xml>
2026-01-13 14:19:55 - Frederica - INFO - logger:99 - 直接解析XML: MsgType=text, Event=None
2026-01-13 14:19:55 - Frederica - INFO - logger:99 - wechatpy解析: 类型=text, 发送者=ChenMingHao
2026-01-13 14:19:55 - Frederica - INFO - logger:99 - 收到文本消息来自 ChenMingHao: 你是frederica...
2026-01-13 14:19:55 - Frederica - INFO - logger:99 - 消息已添加到处理队列，当前队列大小: 1
2026-01-13 14:19:55 - Frederica - DEBUG - logger:95 - 开始处理第 32 条消息: 7594727072915561565
2026-01-13 14:19:55 - Frederica - INFO - logger:99 - 2400:cb00:995:1000:532f:e594:8607:f7ae - "POST /callback?msg_signature=08f2318ffd31243a62de31763e2663a8362d7f8c&timestamp=1768285192&nonce=1768518402 HTTP/1.1" 200 -
2026-01-13 14:19:55 - Frederica - INFO - logger:99 - POST请求处理完成，响应长度: 626
2026-01-13 14:19:55 - Frederica - DEBUG - logger:95 - 响应内容前500字符: <xml>
<Encrypt><![CDATA[1FOhb1FRLw/vTw9WyjM6F8ARWYnJ8vJeC3RnuP/zZpnlWz7MxkMtw6WpIkE4spo7oBzqnghsgGQ8EFd5yYNCbeh5RtRnWjDqafwi9WoN71RkGP6jxdnr5uLB6oEqAJ/2Coew3Sd5psbG6IZxyjN71yxq87yWnH2kH2LEizrx1JZf36/Q5BCphMqBM1h9ZvS1I/8IJ5qjm4oPCbUXqSQ+ce4NcfSeJUHxi1hdMKjjOzzQryQEDjzT1E78/Cn6F1vZnVEKBZDF5aATPVqO0QwxWgPXm7TAyGa2bjftjs9xq3MCk7WVdX3APbCHbvoSr6MqyOs3auKyQidWEfilGS3PcPMN0RSRkzmbDBPZXeaIk7edz8pLSa0VDxg9mWlorXUT8grR1CkE6+sVR4IeP7ehuheaQVUUfkk7dnXJWspEtl0=]]></Encrypt>
<MsgSignature><![CDATA[ac2d3f0ed0f
2026-01-13 14:19:55 - Frederica - DEBUG - logger:95 - 响应是否包含XML: False
2026-01-13 14:19:55 - Frederica - DEBUG - logger:95 - 响应状态: 200 OK
2026-01-13 14:19:55 - Frederica - DEBUG - logger:95 - 响应Content-Type: text/xml; charset=utf-8
2026-01-13 14:19:55 - Frederica - INFO - logger:99 - 为 ChenMingHao 生成响应...
2026-01-13 14:19:57 - Frederica - INFO - logger:99 - 为 ChenMingHao 生成响应完成
2026-01-13 14:19:57 - Frederica - DEBUG - logger:95 - 第 32 条消息处理完成
2026-01-13 14:19:57 - Frederica - INFO - logger:99 - 已发送企业微信消息给 ChenMingHao: 是的！我就是Frederica，你的微信聊天机器人朋友～ 很高兴认识你！有什么想聊的或者需要帮助的吗...
2026-01-13 14:20:21 - Frederica - INFO - logger:99 - 收到POST请求: /callback?msg_signature=a2b8f2af6ada1ed4c3ef5fa3cc5d46b631413f28&timestamp=1768285218&nonce=1768517991
2026-01-13 14:20:21 - Frederica - INFO - logger:99 - 查询参数: {'msg_signature': 'a2b8f2af6ada1ed4c3ef5fa3cc5d46b631413f28', 'timestamp': '1768285218', 'nonce': '1768517991'}
2026-01-13 14:20:21 - Frederica - INFO - logger:99 - 请求体长度: 607
2026-01-13 14:20:21 - Frederica - DEBUG - logger:95 - 原始查询参数: {'msg_signature': ['a2b8f2af6ada1ed4c3ef5fa3cc5d46b631413f28'], 'timestamp': ['1768285218'], 'nonce': ['1768517991']}
2026-01-13 14:20:21 - Frederica - DEBUG - logger:95 - 解析后的URL: ParseResult(scheme='', netloc='', path='/callback', params='', query='msg_signature=a2b8f2af6ada1ed4c3ef5fa3cc5d46b631413f28&timestamp=1768285218&nonce=1768517991', fragment='')
2026-01-13 14:20:21 - Frederica - DEBUG - logger:95 - 请求头: {'x-forwarded-for': '183.47.117.101', 'Accept': '*/*', 'Content-Type': 'text/xml', 'User-Agent': 'Mozilla/4.0', 'Pragma': 'no-cache', 'cf-ray': '9bd2c97b7ec4656e-AMS', 'Host': 'tx6p.paleflame.top:8080', 'Content-Length': '607', 'cdn-loop': 'cloudflare; loops=1', 'CF-Connecting-IP': '183.47.117.101', 'CF-IPCountry': 'CN', 'CF-Visitor': '{"scheme":"http"}', 'X-Forwarded-Proto': 'http', 'accept-encoding': 'gzip', 'Connection': 'Keep-Alive'}
2026-01-13 14:20:21 - Frederica - DEBUG - logger:95 - Content-Length: 607
2026-01-13 14:20:21 - Frederica - DEBUG - logger:95 - 参数 msg_signature: a2b8f2af6ada1ed4c3ef5fa3cc5d46b631413f28 (长度: 40)
2026-01-13 14:20:21 - Frederica - DEBUG - logger:95 - 参数 timestamp: 1768285218 (长度: 10)
2026-01-13 14:20:21 - Frederica - DEBUG - logger:95 - 参数 nonce: 1768517991 (长度: 10)
2026-01-13 14:20:21 - Frederica - DEBUG - logger:95 - 请求体前500字符: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><Encrypt><![CDATA[rg40eOCc9zK2O5qxkkyY8O4vDXGw0qXm4DJGH9Sbw7wT00ogwZK8rV/r6ay5ArzMnBqhHhtncPrluqZYoygxkCATfWadJAFNyew+eoYlrsxg0Rlnpb9vZ3AXem9IX5CFDsAnJlseXvnllDRKsKQS7nJmU7D4mz0BAr3inPF+GJz1gALsAn+KdVZvCj6J2t5CxJ35gQnW82so/QJRmgSND6Ew1Wd1+ZPgBayNpEqiWm3Za+kc5aH7H5Y6EOGT0Vst/k5lap3ifF07EcuYmmT6duRn6ee5vTNkAC0XbP7kZSJ1uRhpsydQB39iFSkCkQC5xmOmdY9xvH6ErgfFHjryny2bF41qMA7tLhBwSo9oH8YpcGBuPzajoDHIBjk6At1V8XV2m8Cx0QQEz7qad8o4+YbJ9n5KVjPjvdwwbP
2026-01-13 14:20:21 - Frederica - DEBUG - logger:95 - 请求体MD5: -2055693091922617973
2026-01-13 14:20:21 - Frederica - DEBUG - logger:95 - 请求体是否包含XML: False
2026-01-13 14:20:21 - Frederica - DEBUG - logger:95 - 开始处理POST回调请求...
2026-01-13 14:20:21 - Frederica - INFO - logger:99 - 处理回调请求: 方法=POST, 参数={'msg_signature': 'a2b8f2af6ada1ed4c3ef5fa3cc5d46b631413f28', 'timestamp': '1768285218', 'nonce': '1768517991'}
2026-01-13 14:20:21 - Frederica - DEBUG - logger:95 - 请求方法: POST
2026-01-13 14:20:21 - Frederica - DEBUG - logger:95 - 完整查询参数: {'msg_signature': 'a2b8f2af6ada1ed4c3ef5fa3cc5d46b631413f28', 'timestamp': '1768285218', 'nonce': '1768517991'}
2026-01-13 14:20:21 - Frederica - DEBUG - logger:95 - 请求体长度: 607
2026-01-13 14:20:21 - Frederica - DEBUG - logger:95 - msg_signature: a2b8f2af6ada1ed4c3ef... (长度: 40)
2026-01-13 14:20:21 - Frederica - DEBUG - logger:95 - timestamp: 1768285218
2026-01-13 14:20:21 - Frederica - DEBUG - logger:95 - nonce: 1768517991
2026-01-13 14:20:21 - Frederica - INFO - logger:99 - 处理POST消息请求，请求体长度: 607
2026-01-13 14:20:21 - Frederica - DEBUG - logger:95 - 解密后的XML: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><FromUserName><![CDATA[ChenMingHao]]></FromUserName><CreateTime>1768285218</CreateTime><MsgType><![CDATA[text]]></MsgType><Content><![CDATA[对这句话保持沉默]]></Content><MsgId>7594727184593533021</MsgId><AgentID>1000002</AgentID></xml>
2026-01-13 14:20:21 - Frederica - INFO - logger:99 - 直接解析XML: MsgType=text, Event=None
2026-01-13 14:20:21 - Frederica - INFO - logger:99 - wechatpy解析: 类型=text, 发送者=ChenMingHao
2026-01-13 14:20:21 - Frederica - INFO - logger:99 - 收到文本消息来自 ChenMingHao: 对这句话保持沉默...
2026-01-13 14:20:21 - Frederica - INFO - logger:99 - 消息已添加到处理队列，当前队列大小: 1
2026-01-13 14:20:21 - Frederica - DEBUG - logger:95 - 开始处理第 33 条消息: 7594727184593533021
2026-01-13 14:20:21 - Frederica - INFO - logger:99 - 2400:cb00:556:1000:ba0e:28d6:c9f0:336 - "POST /callback?msg_signature=a2b8f2af6ada1ed4c3ef5fa3cc5d46b631413f28&timestamp=1768285218&nonce=1768517991 HTTP/1.1" 200 -
2026-01-13 14:20:21 - Frederica - INFO - logger:99 - POST请求处理完成，响应长度: 626
2026-01-13 14:20:21 - Frederica - DEBUG - logger:95 - 响应内容前500字符: <xml>
<Encrypt><![CDATA[AY7O7ZMtRIGkvl5QR3QxP4ZMrmpEAFg245VmP7Jo1dBVRS4gkc9vf6nNtkKJywU/E2sWQg7rB8A9Qr7h7KJTwE0TMKfJ96v6JxFV/ziGOb7C4abkX55xeuT5/GxBz5i6Dms+dh256u72ZWHrFpglHUKG5zlTVOtH6lDM9ZEWfld2Ez2ws9ntRBgKerc2itV+MP2CnCyZjyWq8+OZWb0IMCkvcYPTcIol0a5Ps5sbvZhgEWNxc3MDd2DnVjFex4RrGrk60Ks5cpv3xglNwXjKafrGIeocRwLywXjcNo/A5SJTWinOHZIG7rVQPm89m3C64Cw8BfZqo9k+9zpk5a76gNBOImxKAh9S4DMR/5AfhVCHyKAkzDbUwozoFzNXfcqxtigDw1rUNvEIjHHDh0yQ+JtdXTk8B+h8jfEoj9Qbmig=]]></Encrypt>
<MsgSignature><![CDATA[fac8a957da3
2026-01-13 14:20:21 - Frederica - DEBUG - logger:95 - 响应是否包含XML: False
2026-01-13 14:20:21 - Frederica - DEBUG - logger:95 - 响应状态: 200 OK
2026-01-13 14:20:21 - Frederica - DEBUG - logger:95 - 响应Content-Type: text/xml; charset=utf-8
2026-01-13 14:20:21 - Frederica - INFO - logger:99 - 为 ChenMingHao 生成响应...
2026-01-13 14:20:22 - Frederica - INFO - logger:99 - LLM决定对用户 ChenMingHao 保持沉默
2026-01-13 14:20:22 - Frederica - DEBUG - logger:95 - 第 33 条消息处理完成
2026-01-13 14:21:03 - Frederica - INFO - logger:99 - 收到POST请求: /callback?msg_signature=8d1233e50c3b1fe22e00cb8903423f954eb4c710&timestamp=1768285261&nonce=1768790058
2026-01-13 14:21:03 - Frederica - INFO - logger:99 - 查询参数: {'msg_signature': '8d1233e50c3b1fe22e00cb8903423f954eb4c710', 'timestamp': '1768285261', 'nonce': '1768790058'}
2026-01-13 14:21:03 - Frederica - INFO - logger:99 - 请求体长度: 607
2026-01-13 14:21:03 - Frederica - DEBUG - logger:95 - 原始查询参数: {'msg_signature': ['8d1233e50c3b1fe22e00cb8903423f954eb4c710'], 'timestamp': ['1768285261'], 'nonce': ['1768790058']}
2026-01-13 14:21:03 - Frederica - DEBUG - logger:95 - 解析后的URL: ParseResult(scheme='', netloc='', path='/callback', params='', query='msg_signature=8d1233e50c3b1fe22e00cb8903423f954eb4c710&timestamp=1768285261&nonce=1768790058', fragment='')
2026-01-13 14:21:03 - Frederica - DEBUG - logger:95 - 请求头: {'x-forwarded-for': '14.116.241.251', 'Accept': '*/*', 'Content-Type': 'text/xml', 'User-Agent': 'Mozilla/4.0', 'Pragma': 'no-cache', 'cf-ray': '9bd2ca869c53b823-AMS', 'Host': 'tx6p.paleflame.top:8080', 'Content-Length': '607', 'cdn-loop': 'cloudflare; loops=1', 'CF-Connecting-IP': '14.116.241.251', 'CF-IPCountry': 'CN', 'CF-Visitor': '{"scheme":"http"}', 'X-Forwarded-Proto': 'http', 'accept-encoding': 'gzip', 'Connection': 'Keep-Alive'}
2026-01-13 14:21:03 - Frederica - DEBUG - logger:95 - Content-Length: 607
2026-01-13 14:21:03 - Frederica - DEBUG - logger:95 - 参数 msg_signature: 8d1233e50c3b1fe22e00cb8903423f954eb4c710 (长度: 40)
2026-01-13 14:21:03 - Frederica - DEBUG - logger:95 - 参数 timestamp: 1768285261 (长度: 10)
2026-01-13 14:21:03 - Frederica - DEBUG - logger:95 - 参数 nonce: 1768790058 (长度: 10)
2026-01-13 14:21:03 - Frederica - DEBUG - logger:95 - 请求体前500字符: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><Encrypt><![CDATA[caV9jlECsW6FIuOv+88PJ+woE3s+3tA0dmayG2S9pEThQ/XgNBLwhqwPeOnejwTIr5ImlAw3j+4w+KdauJGd3kemQaZEkSzIPXDb4ixABEbRSowZ6Gl1JBYB8jTZb1YbBmJI2clN6fTCL5MR+YqK7eHDhovL5Fj/nDLP5l9o71cV0S+pdQb6dWeySMcxtUidpyEk4jmvt9ZYSWXFx/Y+m313UhyLrmTAtUnDwHQ1BK4QhuvfpHEcHZQCdITWZmZsJkafw/G9XyjZ6CR/vlyl/2QohtGXuewrdJwa3lVMzRt8fZrZtHDkVwuKBjuCUCtTTow8I5dbX87zq2dBplCd93uc1HM0Szb/AYT7ujAdWlGrrhsejgXcC+m43q4miGvRaa8T8G2GjmbY5N+T+ZUg51cAevj71oWnIqgSAK
2026-01-13 14:21:03 - Frederica - DEBUG - logger:95 - 请求体MD5: -3195969606097853383
2026-01-13 14:21:03 - Frederica - DEBUG - logger:95 - 请求体是否包含XML: False
2026-01-13 14:21:03 - Frederica - DEBUG - logger:95 - 开始处理POST回调请求...
2026-01-13 14:21:03 - Frederica - INFO - logger:99 - 处理回调请求: 方法=POST, 参数={'msg_signature': '8d1233e50c3b1fe22e00cb8903423f954eb4c710', 'timestamp': '1768285261', 'nonce': '1768790058'}
2026-01-13 14:21:03 - Frederica - DEBUG - logger:95 - 请求方法: POST
2026-01-13 14:21:03 - Frederica - DEBUG - logger:95 - 完整查询参数: {'msg_signature': '8d1233e50c3b1fe22e00cb8903423f954eb4c710', 'timestamp': '1768285261', 'nonce': '1768790058'}
2026-01-13 14:21:03 - Frederica - DEBUG - logger:95 - 请求体长度: 607
2026-01-13 14:21:03 - Frederica - DEBUG - logger:95 - msg_signature: 8d1233e50c3b1fe22e00... (长度: 40)
2026-01-13 14:21:03 - Frederica - DEBUG - logger:95 - timestamp: 1768285261
2026-01-13 14:21:03 - Frederica - DEBUG - logger:95 - nonce: 1768790058
2026-01-13 14:21:03 - Frederica - INFO - logger:99 - 处理POST消息请求，请求体长度: 607
2026-01-13 14:21:03 - Frederica - DEBUG - logger:95 - 解密后的XML: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><FromUserName><![CDATA[ChenMingHao]]></FromUserName><CreateTime>1768285261</CreateTime><MsgType><![CDATA[text]]></MsgType><Content><![CDATA[现在随便说句话]]></Content><MsgId>7594727367949813853</MsgId><AgentID>1000002</AgentID></xml>
2026-01-13 14:21:03 - Frederica - INFO - logger:99 - 直接解析XML: MsgType=text, Event=None
2026-01-13 14:21:03 - Frederica - INFO - logger:99 - wechatpy解析: 类型=text, 发送者=ChenMingHao
2026-01-13 14:21:03 - Frederica - INFO - logger:99 - 收到文本消息来自 ChenMingHao: 现在随便说句话...
2026-01-13 14:21:03 - Frederica - INFO - logger:99 - 消息已添加到处理队列，当前队列大小: 1
2026-01-13 14:21:03 - Frederica - DEBUG - logger:95 - 开始处理第 34 条消息: 7594727367949813853
2026-01-13 14:21:03 - Frederica - INFO - logger:99 - 2400:cb00:995:1000:4de2:3fda:ca28:a570 - "POST /callback?msg_signature=8d1233e50c3b1fe22e00cb8903423f954eb4c710&timestamp=1768285261&nonce=1768790058 HTTP/1.1" 200 -
2026-01-13 14:21:03 - Frederica - INFO - logger:99 - POST请求处理完成，响应长度: 626
2026-01-13 14:21:03 - Frederica - DEBUG - logger:95 - 响应内容前500字符: <xml>
<Encrypt><![CDATA[M0zUobKFE75gAjkaszgVNomM54DTBR4f4ATTJzgqBvpDJW6b+HnJGHcUrOT/Sd/jE6zbjhgok8cmj0VF7OndLpSb34eeKzuB3gusC3rnNYy4Xlp+KAHn4bTt3ZG3RMpi4XW5WMg9u7Bk/4nZL3CVJRUvuF1Whz2vm4cAPIHMOq+wCtG5Dtt4cgHxowNotu6Apvyn3OgEqKy9jApXUSyVbG3RI0wMy/fcEVjFMeqNozUVmj7S62CEvijfE5kC6WoTkHFPLVQ+xorjIDCabREaQbt8d76mXKSD3LosU3zMWldlln7XzGBKE37VJXFZVXFR+8Y9OXcp0aVw7BW1GugX2wF7wf6Crb04n1XH+BL4viRzBHkW1fr0AY/6JR30GgCuKbJs4zy4mMGWI9wUIO5hZs0RE8EyYKb6RG8I8/bA3nk=]]></Encrypt>
<MsgSignature><![CDATA[dd13a88bde6
2026-01-13 14:21:03 - Frederica - DEBUG - logger:95 - 响应是否包含XML: False
2026-01-13 14:21:03 - Frederica - DEBUG - logger:95 - 响应状态: 200 OK
2026-01-13 14:21:03 - Frederica - DEBUG - logger:95 - 响应Content-Type: text/xml; charset=utf-8
2026-01-13 14:21:03 - Frederica - INFO - logger:99 - 为 ChenMingHao 生成响应...
2026-01-13 14:21:05 - Frederica - INFO - logger:99 - 为 ChenMingHao 生成响应完成
2026-01-13 14:21:05 - Frederica - DEBUG - logger:95 - 第 34 条消息处理完成
2026-01-13 14:21:05 - Frederica - INFO - logger:99 - 已发送企业微信消息给 ChenMingHao: 今天天气真不错呢！🌞 你那边天气怎么样呀？有没有什么有趣的事情想分享？...
2026-01-13 14:21:31 - Frederica - INFO - logger:99 - 收到POST请求: /callback?msg_signature=08403e0c5c9f7f32133129d042046bdbcb7f3697&timestamp=1768285289&nonce=1768544833
2026-01-13 14:21:31 - Frederica - INFO - logger:99 - 查询参数: {'msg_signature': '08403e0c5c9f7f32133129d042046bdbcb7f3697', 'timestamp': '1768285289', 'nonce': '1768544833'}
2026-01-13 14:21:31 - Frederica - INFO - logger:99 - 请求体长度: 607
2026-01-13 14:21:31 - Frederica - DEBUG - logger:95 - 原始查询参数: {'msg_signature': ['08403e0c5c9f7f32133129d042046bdbcb7f3697'], 'timestamp': ['1768285289'], 'nonce': ['1768544833']}
2026-01-13 14:21:31 - Frederica - DEBUG - logger:95 - 解析后的URL: ParseResult(scheme='', netloc='', path='/callback', params='', query='msg_signature=08403e0c5c9f7f32133129d042046bdbcb7f3697&timestamp=1768285289&nonce=1768544833', fragment='')
2026-01-13 14:21:31 - Frederica - DEBUG - logger:95 - 请求头: {'x-forwarded-for': '14.116.241.251', 'Accept': '*/*', 'Content-Type': 'text/xml', 'User-Agent': 'Mozilla/4.0', 'Pragma': 'no-cache', 'cf-ray': '9bd2cb370ce014d3-AMS', 'Host': 'tx6p.paleflame.top:8080', 'Content-Length': '607', 'cdn-loop': 'cloudflare; loops=1', 'CF-Connecting-IP': '14.116.241.251', 'CF-IPCountry': 'CN', 'CF-Visitor': '{"scheme":"http"}', 'X-Forwarded-Proto': 'http', 'accept-encoding': 'gzip', 'Connection': 'Keep-Alive'}
2026-01-13 14:21:31 - Frederica - DEBUG - logger:95 - Content-Length: 607
2026-01-13 14:21:31 - Frederica - DEBUG - logger:95 - 参数 msg_signature: 08403e0c5c9f7f32133129d042046bdbcb7f3697 (长度: 40)
2026-01-13 14:21:32 - Frederica - DEBUG - logger:95 - 参数 timestamp: 1768285289 (长度: 10)
2026-01-13 14:21:32 - Frederica - DEBUG - logger:95 - 参数 nonce: 1768544833 (长度: 10)
2026-01-13 14:21:32 - Frederica - DEBUG - logger:95 - 请求体前500字符: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><Encrypt><![CDATA[uA22XYEeQ3ilZL8XOZ6bm7MMxk7uAcfi3dMsWEH29EHEPWi02+oqYrIXVHUVCYtwHXjesKQs7UekM1EpCHDBl2oyUSeyVOHTkJ4QveMmQquHokJzorCAaWYks29elhBaPMz9mQV/f4TX5OmvURsNFu6tFWmAY1SvOd9pMaO8VzRIuOBUAEVOsyErr/ALx6E6nF3Q80Bkyeydros+G35BWzihBCeFPkJjrygHJqja/9gS9aUCx6Z9Sf2Hmp8ZZ/DgjXshiiORjTiU3697Fux3ujUS1kU6yEJDuXJfK8a8XaNJQCTZ2JaZWHTl920ArHuJxmf1V95wwwhvcZmqnxeDm0J8Rh6hn3lufwZ7gK3FYQURb4j+dspiHZwDZIVaNX92OgiTepGuDH93L2RhdCyFP2/Vwm57doyKkTKCwn
2026-01-13 14:21:32 - Frederica - DEBUG - logger:95 - 请求体MD5: 3415520307757978996
2026-01-13 14:21:32 - Frederica - DEBUG - logger:95 - 请求体是否包含XML: False
2026-01-13 14:21:32 - Frederica - DEBUG - logger:95 - 开始处理POST回调请求...
2026-01-13 14:21:32 - Frederica - INFO - logger:99 - 处理回调请求: 方法=POST, 参数={'msg_signature': '08403e0c5c9f7f32133129d042046bdbcb7f3697', 'timestamp': '1768285289', 'nonce': '1768544833'}
2026-01-13 14:21:32 - Frederica - DEBUG - logger:95 - 请求方法: POST
2026-01-13 14:21:32 - Frederica - DEBUG - logger:95 - 完整查询参数: {'msg_signature': '08403e0c5c9f7f32133129d042046bdbcb7f3697', 'timestamp': '1768285289', 'nonce': '1768544833'}
2026-01-13 14:21:32 - Frederica - DEBUG - logger:95 - 请求体长度: 607
2026-01-13 14:21:32 - Frederica - DEBUG - logger:95 - msg_signature: 08403e0c5c9f7f321331... (长度: 40)
2026-01-13 14:21:32 - Frederica - DEBUG - logger:95 - timestamp: 1768285289
2026-01-13 14:21:32 - Frederica - DEBUG - logger:95 - nonce: 1768544833
2026-01-13 14:21:32 - Frederica - INFO - logger:99 - 处理POST消息请求，请求体长度: 607
2026-01-13 14:21:32 - Frederica - DEBUG - logger:95 - 解密后的XML: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><FromUserName><![CDATA[ChenMingHao]]></FromUserName><CreateTime>1768285289</CreateTime><MsgType><![CDATA[text]]></MsgType><Content><![CDATA[连续发送两条消息]]></Content><MsgId>7594727489292291165</MsgId><AgentID>1000002</AgentID></xml>
2026-01-13 14:21:32 - Frederica - INFO - logger:99 - 直接解析XML: MsgType=text, Event=None
2026-01-13 14:21:32 - Frederica - INFO - logger:99 - wechatpy解析: 类型=text, 发送者=ChenMingHao
2026-01-13 14:21:32 - Frederica - INFO - logger:99 - 收到文本消息来自 ChenMingHao: 连续发送两条消息...
2026-01-13 14:21:32 - Frederica - INFO - logger:99 - 消息已添加到处理队列，当前队列大小: 1
2026-01-13 14:21:32 - Frederica - DEBUG - logger:95 - 开始处理第 35 条消息: 7594727489292291165
2026-01-13 14:21:32 - Frederica - INFO - logger:99 - 2400:cb00:995:1000:532f:e594:8607:f7ae - "POST /callback?msg_signature=08403e0c5c9f7f32133129d042046bdbcb7f3697&timestamp=1768285289&nonce=1768544833 HTTP/1.1" 200 -
2026-01-13 14:21:32 - Frederica - INFO - logger:99 - POST请求处理完成，响应长度: 626
2026-01-13 14:21:32 - Frederica - DEBUG - logger:95 - 响应内容前500字符: <xml>
<Encrypt><![CDATA[xAttpMKPPYLm+jrSOYi2joLpO/mrZefdHpfLwAyy0sdyi3dj7r/W+gT1LCzwN+SfOSNAKZIeaXCdNe0f//mlVmgTAtiSATCQPFa/Vyl2rdNKAKttn21yZup+E8dLY1GE53EhLval7mCHL+FUX3neDxRmQabFWhk2hEbotBNsKXM8Ai3hj2V8Hl96zX9Jk2Tzyd72VeDuIW9bnFOLJ7AL/R4ZWRlWR+o9sbMuc41Q0x0QuxgMMJOpvlnvVL1r/w2UUkVLmZPspPJM1V/2yLVip/RIEx6hjWxIhqC/n94Syr3VdUjT19K+2pAIa0Y912kJPkbVh+HKBm89K6BMJ/hZ9YCicq8D39C/H3UHK0tY8wY0oyylxfimSW3mvupC3Re7ajW8K41n6WVANZ9Sb0YI2yJdmFq9Gz1OmhCuwyclaQI=]]></Encrypt>
<MsgSignature><![CDATA[e57baf1bafe
2026-01-13 14:21:32 - Frederica - DEBUG - logger:95 - 响应是否包含XML: False
2026-01-13 14:21:32 - Frederica - DEBUG - logger:95 - 响应状态: 200 OK
2026-01-13 14:21:32 - Frederica - DEBUG - logger:95 - 响应Content-Type: text/xml; charset=utf-8
2026-01-13 14:21:32 - Frederica - INFO - logger:99 - 为 ChenMingHao 生成响应...
2026-01-13 14:21:34 - Frederica - INFO - logger:99 - 为 ChenMingHao 生成响应完成
2026-01-13 14:21:34 - Frederica - DEBUG - logger:95 - 第 35 条消息处理完成
2026-01-13 14:21:34 - Frederica - INFO - logger:99 - 已发送企业微信消息给 ChenMingHao: 哈哈，看来你是在测试我呀！我收到你的两条消息啦～ 不过作为聊天机器人，我会认真对待每一条消息的。有什...
2026-01-13 14:25:00 - Frederica - INFO - logger:99 - 收到POST请求: /callback?msg_signature=b7e71e0c8f7923d959ba75d03954174278127bbe&timestamp=1768285498&nonce=1768408772
2026-01-13 14:25:00 - Frederica - INFO - logger:99 - 查询参数: {'msg_signature': 'b7e71e0c8f7923d959ba75d03954174278127bbe', 'timestamp': '1768285498', 'nonce': '1768408772'}
2026-01-13 14:25:00 - Frederica - INFO - logger:99 - 请求体长度: 640
2026-01-13 14:25:00 - Frederica - DEBUG - logger:95 - 原始查询参数: {'msg_signature': ['b7e71e0c8f7923d959ba75d03954174278127bbe'], 'timestamp': ['1768285498'], 'nonce': ['1768408772']}
2026-01-13 14:25:00 - Frederica - DEBUG - logger:95 - 解析后的URL: ParseResult(scheme='', netloc='', path='/callback', params='', query='msg_signature=b7e71e0c8f7923d959ba75d03954174278127bbe&timestamp=1768285498&nonce=1768408772', fragment='')
2026-01-13 14:25:00 - Frederica - DEBUG - logger:95 - 请求头: {'x-forwarded-for': '14.116.241.251', 'Accept': '*/*', 'Content-Type': 'text/xml', 'User-Agent': 'Mozilla/4.0', 'Pragma': 'no-cache', 'cf-ray': '9bd2d04dcec70eb2-AMS', 'Host': 'tx6p.paleflame.top:8080', 'Content-Length': '640', 'cdn-loop': 'cloudflare; loops=1', 'CF-Connecting-IP': '14.116.241.251', 'CF-IPCountry': 'CN', 'CF-Visitor': '{"scheme":"http"}', 'X-Forwarded-Proto': 'http', 'accept-encoding': 'gzip', 'Connection': 'Keep-Alive'}
2026-01-13 14:25:00 - Frederica - DEBUG - logger:95 - Content-Length: 640
2026-01-13 14:25:00 - Frederica - DEBUG - logger:95 - 参数 msg_signature: b7e71e0c8f7923d959ba75d03954174278127bbe (长度: 40)
2026-01-13 14:25:00 - Frederica - DEBUG - logger:95 - 参数 timestamp: 1768285498 (长度: 10)
2026-01-13 14:25:00 - Frederica - DEBUG - logger:95 - 参数 nonce: 1768408772 (长度: 10)
2026-01-13 14:25:00 - Frederica - DEBUG - logger:95 - 请求体前500字符: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><Encrypt><![CDATA[/mZpLGArvpr/jkmghBIcGKxv2Y85OGUDrH4hHCvZgSS2Y7Z7g336EGKHb1llKYa+7Zs6ADeD81z42hH/quF86Ncn/z4aX8EDq0jf8ED3Xr+zR8Omd5bHgrShHi2WQjuWrHvfxMX/dHau6JzJtHpwvq/EajwDXAWtrOmcu7xXg7FocEHQyjMVYGwF2bOWU64ChH6SMmnYWSm6sAjfkcxH+XqnTOxejnrvoWNPHciECA+btjJvJYMVho1AfUJFzoxAY7jCRfGXpEN/ew4Ywfcet1wc4QZ6IQdz4qxcjTOFss1/cGHrCedFLX7X3v0QRSPmH2/erfAfVYsKqvu+PszO4+VqCoxM7GCGrP0+EzRlucrlYP7CQcWWp5baGTv1njg7HVScyeymwDzbMxLNiDLrSkZZfW95kAhLCA8QH9
2026-01-13 14:25:00 - Frederica - DEBUG - logger:95 - 请求体MD5: 2938882227741784309
2026-01-13 14:25:00 - Frederica - DEBUG - logger:95 - 请求体是否包含XML: False
2026-01-13 14:25:00 - Frederica - DEBUG - logger:95 - 开始处理POST回调请求...
2026-01-13 14:25:00 - Frederica - INFO - logger:99 - 处理回调请求: 方法=POST, 参数={'msg_signature': 'b7e71e0c8f7923d959ba75d03954174278127bbe', 'timestamp': '1768285498', 'nonce': '1768408772'}
2026-01-13 14:25:00 - Frederica - DEBUG - logger:95 - 请求方法: POST
2026-01-13 14:25:00 - Frederica - DEBUG - logger:95 - 完整查询参数: {'msg_signature': 'b7e71e0c8f7923d959ba75d03954174278127bbe', 'timestamp': '1768285498', 'nonce': '1768408772'}
2026-01-13 14:25:00 - Frederica - DEBUG - logger:95 - 请求体长度: 640
2026-01-13 14:25:00 - Frederica - DEBUG - logger:95 - msg_signature: b7e71e0c8f7923d959ba... (长度: 40)
2026-01-13 14:25:00 - Frederica - DEBUG - logger:95 - timestamp: 1768285498
2026-01-13 14:25:00 - Frederica - DEBUG - logger:95 - nonce: 1768408772
2026-01-13 14:25:00 - Frederica - INFO - logger:99 - 处理POST消息请求，请求体长度: 640
2026-01-13 14:25:00 - Frederica - DEBUG - logger:95 - 解密后的XML: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><CreateTime>1768285498</CreateTime><MsgType><![CDATA[event]]></MsgType><Event><![CDATA[kf_msg_or_event]]></Event><Token><![CDATA[ENCVzEdMZoPekzLXNVpY6x4vZrWSHz7obJ1aCFhgi8Tvf8]]></Token><OpenKfId><![CDATA[wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ]]></OpenKfId></xml>
2026-01-13 14:25:00 - Frederica - INFO - logger:99 - 直接解析XML: MsgType=event, Event=kf_msg_or_event
2026-01-13 14:25:00 - Frederica - INFO - logger:99 - wechatpy解析: 类型=unknown, 发送者=None
2026-01-13 14:25:00 - Frederica - INFO - logger:99 - 处理客服消息事件 (kf_msg_or_event)
2026-01-13 14:25:00 - Frederica - DEBUG - logger:95 - 提取到Token: ENCVzEdMZoPekzLXNVpY...
2026-01-13 14:25:00 - Frederica - DEBUG - logger:95 - 提取到OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:25:00 - Frederica - INFO - logger:99 - 客服事件已接收，Token: ENCVzEdMZoPekzLXNVpY..., OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:25:00 - Frederica - INFO - logger:99 - 开始拉取微信客服消息，open_kfid: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:25:00 - Frederica - INFO - logger:99 - 已启动消息拉取线程
2026-01-13 14:25:00 - Frederica - INFO - logger:99 - 2400:cb00:556:1000:eefe:2dff:614a:83d8 - "POST /callback?msg_signature=b7e71e0c8f7923d959ba75d03954174278127bbe&timestamp=1768285498&nonce=1768408772 HTTP/1.1" 200 -
2026-01-13 14:25:00 - Frederica - INFO - logger:99 - POST请求处理完成，响应长度: 582
2026-01-13 14:25:00 - Frederica - DEBUG - logger:95 - 响应内容前500字符: <xml>
<Encrypt><![CDATA[sVxwCPRZdubqyOW11xkDqPZmakbpH1BxRC9kw8lUTlQn3LpfU7LO+VWuhPnYWp6zycBObHEu3OXn1G9O4kd1qjA3S1rjaVR4xMJlLSyEGTWN3kkGQcYU3hrYzEtxfmTMcaxKGylGr48b0E8JZ4yguiqZ9dXyP5IHGO/CdM+bgAi/V1mNBiUcMeygpJJdedT9mcIf5sU6h8y1buJ9W5VIHtmYOQX0KmuTTIoia9cHrJ7xlts/ed4IGLjJNPcK3yXZdXxsJiyWqnq6Ccoq0qoXOZeiKBvDHXRXmo/keTgQQBEV7A/z6PX4DhP6kP5zPwQkIt4gTa+4nmxkjr0AoZbHOovqY3wuFK7AzZaoBBeXwXYryk7jlvH6TMzygkMsbFqL]]></Encrypt>
<MsgSignature><![CDATA[afd8a3e3a7bffc4f4f117d9fbcea5f9454330368]]></MsgSignatu
2026-01-13 14:25:00 - Frederica - DEBUG - logger:95 - 响应是否包含XML: False
2026-01-13 14:25:00 - Frederica - DEBUG - logger:95 - 响应状态: 200 OK
2026-01-13 14:25:00 - Frederica - DEBUG - logger:95 - 响应Content-Type: text/xml; charset=utf-8
2026-01-13 14:25:00 - Frederica - INFO - logger:99 - 拉取到 1 条客服消息
2026-01-13 14:25:00 - Frederica - INFO - logger:99 - 处理客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 内容=记得我的名字吗...
2026-01-13 14:25:00 - Frederica - INFO - logger:99 - 客服消息已添加到处理队列，当前队列大小: 1
2026-01-13 14:25:00 - Frederica - DEBUG - logger:95 - 开始处理第 36 条消息: BHjqRoorqYGNyd3VWxVB3moSTU
2026-01-13 14:25:00 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应...
2026-01-13 14:25:02 - Frederica - INFO - logger:99 - 收到POST请求: /callback?msg_signature=b7e71e0c8f7923d959ba75d03954174278127bbe&timestamp=1768285498&nonce=1768408772
2026-01-13 14:25:02 - Frederica - INFO - logger:99 - 查询参数: {'msg_signature': 'b7e71e0c8f7923d959ba75d03954174278127bbe', 'timestamp': '1768285498', 'nonce': '1768408772'}
2026-01-13 14:25:02 - Frederica - INFO - logger:99 - 请求体长度: 640
2026-01-13 14:25:02 - Frederica - DEBUG - logger:95 - 原始查询参数: {'msg_signature': ['b7e71e0c8f7923d959ba75d03954174278127bbe'], 'timestamp': ['1768285498'], 'nonce': ['1768408772']}
2026-01-13 14:25:02 - Frederica - DEBUG - logger:95 - 解析后的URL: ParseResult(scheme='', netloc='', path='/callback', params='', query='msg_signature=b7e71e0c8f7923d959ba75d03954174278127bbe&timestamp=1768285498&nonce=1768408772', fragment='')
2026-01-13 14:25:02 - Frederica - DEBUG - logger:95 - 请求头: {'x-forwarded-for': '106.55.201.217', 'Accept': '*/*', 'Content-Type': 'text/xml', 'User-Agent': 'Mozilla/4.0', 'Pragma': 'no-cache', 'cf-ray': '9bd2d05a7b7b06ba-AMS', 'Host': 'tx6p.paleflame.top:8080', 'Content-Length': '640', 'cdn-loop': 'cloudflare; loops=1', 'CF-Connecting-IP': '106.55.201.217', 'CF-IPCountry': 'CN', 'CF-Visitor': '{"scheme":"http"}', 'X-Forwarded-Proto': 'http', 'accept-encoding': 'gzip', 'Connection': 'Keep-Alive'}
2026-01-13 14:25:02 - Frederica - DEBUG - logger:95 - Content-Length: 640
2026-01-13 14:25:02 - Frederica - DEBUG - logger:95 - 参数 msg_signature: b7e71e0c8f7923d959ba75d03954174278127bbe (长度: 40)
2026-01-13 14:25:02 - Frederica - DEBUG - logger:95 - 参数 timestamp: 1768285498 (长度: 10)
2026-01-13 14:25:02 - Frederica - DEBUG - logger:95 - 参数 nonce: 1768408772 (长度: 10)
2026-01-13 14:25:02 - Frederica - DEBUG - logger:95 - 请求体前500字符: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><Encrypt><![CDATA[/mZpLGArvpr/jkmghBIcGKxv2Y85OGUDrH4hHCvZgSS2Y7Z7g336EGKHb1llKYa+7Zs6ADeD81z42hH/quF86Ncn/z4aX8EDq0jf8ED3Xr+zR8Omd5bHgrShHi2WQjuWrHvfxMX/dHau6JzJtHpwvq/EajwDXAWtrOmcu7xXg7FocEHQyjMVYGwF2bOWU64ChH6SMmnYWSm6sAjfkcxH+XqnTOxejnrvoWNPHciECA+btjJvJYMVho1AfUJFzoxAY7jCRfGXpEN/ew4Ywfcet1wc4QZ6IQdz4qxcjTOFss1/cGHrCedFLX7X3v0QRSPmH2/erfAfVYsKqvu+PszO4+VqCoxM7GCGrP0+EzRlucrlYP7CQcWWp5baGTv1njg7HVScyeymwDzbMxLNiDLrSkZZfW95kAhLCA8QH9
2026-01-13 14:25:02 - Frederica - DEBUG - logger:95 - 请求体MD5: 2938882227741784309
2026-01-13 14:25:02 - Frederica - DEBUG - logger:95 - 请求体是否包含XML: False
2026-01-13 14:25:02 - Frederica - DEBUG - logger:95 - 开始处理POST回调请求...
2026-01-13 14:25:02 - Frederica - INFO - logger:99 - 处理回调请求: 方法=POST, 参数={'msg_signature': 'b7e71e0c8f7923d959ba75d03954174278127bbe', 'timestamp': '1768285498', 'nonce': '1768408772'}
2026-01-13 14:25:02 - Frederica - DEBUG - logger:95 - 请求方法: POST
2026-01-13 14:25:02 - Frederica - DEBUG - logger:95 - 完整查询参数: {'msg_signature': 'b7e71e0c8f7923d959ba75d03954174278127bbe', 'timestamp': '1768285498', 'nonce': '1768408772'}
2026-01-13 14:25:02 - Frederica - DEBUG - logger:95 - 请求体长度: 640
2026-01-13 14:25:02 - Frederica - DEBUG - logger:95 - msg_signature: b7e71e0c8f7923d959ba... (长度: 40)
2026-01-13 14:25:02 - Frederica - DEBUG - logger:95 - timestamp: 1768285498
2026-01-13 14:25:02 - Frederica - DEBUG - logger:95 - nonce: 1768408772
2026-01-13 14:25:02 - Frederica - INFO - logger:99 - 处理POST消息请求，请求体长度: 640
2026-01-13 14:25:02 - Frederica - DEBUG - logger:95 - 解密后的XML: <xml><ToUserName><![CDATA[ww1b7c2409ffbded94]]></ToUserName><CreateTime>1768285498</CreateTime><MsgType><![CDATA[event]]></MsgType><Event><![CDATA[kf_msg_or_event]]></Event><Token><![CDATA[ENCVzEdMZoPekzLXNVpY6x4vZrWSHz7obJ1aCFhgi8Tvf8]]></Token><OpenKfId><![CDATA[wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ]]></OpenKfId></xml>
2026-01-13 14:25:02 - Frederica - INFO - logger:99 - 直接解析XML: MsgType=event, Event=kf_msg_or_event
2026-01-13 14:25:02 - Frederica - INFO - logger:99 - wechatpy解析: 类型=unknown, 发送者=None
2026-01-13 14:25:02 - Frederica - INFO - logger:99 - 处理客服消息事件 (kf_msg_or_event)
2026-01-13 14:25:02 - Frederica - DEBUG - logger:95 - 提取到Token: ENCVzEdMZoPekzLXNVpY...
2026-01-13 14:25:02 - Frederica - DEBUG - logger:95 - 提取到OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:25:02 - Frederica - INFO - logger:99 - 客服事件已接收，Token: ENCVzEdMZoPekzLXNVpY..., OpenKfId: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:25:02 - Frederica - INFO - logger:99 - 开始拉取微信客服消息，open_kfid: wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ
2026-01-13 14:25:02 - Frederica - INFO - logger:99 - 已启动消息拉取线程
2026-01-13 14:25:02 - Frederica - INFO - logger:99 - 2400:cb00:556:1000:eefe:2dff:614a:83d8 - "POST /callback?msg_signature=b7e71e0c8f7923d959ba75d03954174278127bbe&timestamp=1768285498&nonce=1768408772 HTTP/1.1" 200 -
2026-01-13 14:25:02 - Frederica - INFO - logger:99 - POST请求处理完成，响应长度: 582
2026-01-13 14:25:02 - Frederica - DEBUG - logger:95 - 响应内容前500字符: <xml>
<Encrypt><![CDATA[HslVkb9WjYjzr2+BV14IH/xz3ZO0+Ja1Z3Wo8wIu9WZMNjA52TcVVRz8RtabVVO8yQVU3hDYmzjJ/lKD6LyGHPfZfC/eviFffh7ZphU83B9148cD8Iwep8qlRnq9yjrMiw3LUrY8A5Hngnl85dqH2UboCle/Ccqzqql7/pppT753Em8YTVaCZHcLOsbw5tJAhO01qk/hL6Y4O/sG/13f38Nnvb+3llR4cQmIBeRGoUJkbgoyRvHoHSEz4Z6rKl9UF8J3l50LGk39gijMb8/zvxT2BUPsB1fbanpqgz6tsjE//nqP0GKK9zkHnU3sduZqIspPeMeGhmcW0V3EGJOy7KiCa5x1Ck6RZ3xIygaB5mzfNTZ5SYntvXhbdcVCDYY7]]></Encrypt>
<MsgSignature><![CDATA[292dee8c0c4b2ce53b8a575c4c8507423b3e2d96]]></MsgSignatu
2026-01-13 14:25:02 - Frederica - DEBUG - logger:95 - 响应是否包含XML: False
2026-01-13 14:25:02 - Frederica - DEBUG - logger:95 - 响应状态: 200 OK
2026-01-13 14:25:02 - Frederica - DEBUG - logger:95 - 响应Content-Type: text/xml; charset=utf-8
2026-01-13 14:25:02 - Frederica - INFO - logger:99 - 拉取到 0 条客服消息
2026-01-13 14:25:03 - Frederica - INFO - logger:99 - 准备发送微信客服消息: 用户=wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ, 客服账号=wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ, 内容长度=47
2026-01-13 14:25:03 - Frederica - DEBUG - logger:95 - 微信客服API请求数据: {'touser': 'wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ', 'open_kfid': 'wkmcu5KQAAoORdqekB05_vAiQS0PXnYQ', 'msgtype': 'text', 'text': {'content': '当然记得啦！Ivy Bridge～已经悄悄记在小本本上了📝✨ 需要我以后都用这个名字称呼你吗？'}}
2026-01-13 14:25:03 - Frederica - INFO - logger:99 - 为 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ 生成响应完成
2026-01-13 14:25:03 - Frederica - DEBUG - logger:95 - 第 36 条消息处理完成
2026-01-13 14:25:03 - Frederica - INFO - logger:99 - 已成功发送微信客服消息给 wmmcu5KQAA-jT4T54PtIoMFQf-skCfGQ: 当然记得啦！Ivy Bridge～已经悄悄记在小本本上了📝✨ 需要我以后都用这个名字称呼你吗？...
2026-01-13 14:25:03 - Frederica - DEBUG - logger:95 - API响应: {'errcode': 0, 'errmsg': 'ok', 'msgid': '8afa00f89b559be71e4467f12c9e33cd'}
