2026-02-10 23:43:04 - INFO - WeChatLLMServer - 日志系统初始化完成，级别: INFO
2026-02-10 23:43:04 - INFO - WeChatLLMServer - 初始化用户会话管理器...
2026-02-10 23:43:04 - INFO - WeChatLLMServer - 用户会话管理器初始化完成，最大用户数: 10
2026-02-10 23:43:04 - INFO - WeChatLLMServer - 初始化消息处理器...
2026-02-10 23:43:04 - INFO - WeChatLLMServer - 企业微信客户端初始化完成，应用ID: 1000002
2026-02-10 23:43:04 - WARNING - WeChatLLMServer - soul.md内容加载失败或为空
2026-02-10 23:43:04 - WARNING - WeChatLLMServer - 工具调用未启用，将只支持纯聊天
2026-02-10 23:43:04 - INFO - WeChatLLMServer - 消息处理器初始化完成
2026-02-10 23:43:04 - INFO - WeChatLLMServer - 初始化企业微信服务器...
2026-02-10 23:43:04 - INFO - WeChatLLMServer - 企业微信服务器初始化完成，监听地址: :::8080
2026-02-10 23:43:04 - INFO - WeChatLLMServer - 所有组件初始化完成
2026-02-10 23:43:04 - INFO - WeChatLLMServer - 启动企业微信LLM交互服务端...
2026-02-10 23:43:04 - INFO - WeChatLLMServer - 启动消息处理器...
2026-02-10 23:43:04 - INFO - WeChatLLMServer - 开始消息处理循环
2026-02-10 23:43:04 - INFO - WeChatLLMServer - 消息处理器已启动
2026-02-10 23:43:04 - INFO - WeChatLLMServer - 启动企业微信服务器...
2026-02-10 23:43:04 - INFO - WeChatLLMServer - 
        ========================================
            企业微信LLM交互服务端启动成功
        ========================================
        
        服务配置：
        服务器地址: :::8080
        最大用户数: 10
        消息批量超时: 10秒
        对话超时: 360秒
        
        LLM配置：
        API提供商: DeepSeek
        基础URL: https://api.deepseek.com
        
        企业微信配置：
        企业ID: ww1b7c2409...
        应用ID: 1000002
        
        日志配置：
        日志级别: INFO
        日志目录: ./logs
        
        ========================================
        服务已启动，按 Ctrl+C 停止服务
        ========================================
        
2026-02-10 23:43:04 - INFO - WeChatLLMServer - 进入主循环...
2026-02-10 23:43:04 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 已停止
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:43:04 - INFO - WeChatLLMServer - 
        ========================================
            企业微信回调服务器启动
        ========================================
        
        服务器配置：
        服务器类型: 双栈服务器 (IPv4 + IPv6)
        监听地址: :: (所有IPv6地址，同时支持IPv4)
        监听端口: 8080
        
        回调URL配置：
        企业微信回调URL: http://你的域名或IP:8080/callback
        Token: FREDERICAT...
        EncodingAESKey: norTzT7trW...
        
        按 Ctrl+C 停止服务器
        
2026-02-10 23:43:04 - INFO - WeChatLLMServer - 服务器正在启动，监听 :::8080...
2026-02-10 23:43:14 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:43:24 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:43:34 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:43:44 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:43:54 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:44:04 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:44:14 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:44:24 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:44:34 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:44:44 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:44:54 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:45:04 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:45:14 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:45:24 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:45:34 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:45:44 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:45:54 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:46:04 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:46:14 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:46:24 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:46:34 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:46:44 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:46:54 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:47:04 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:47:14 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:47:24 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:47:34 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:47:44 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:47:54 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:48:04 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:48:14 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:48:24 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:48:34 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:48:44 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:48:54 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:49:04 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:49:05 - INFO - WeChatLLMServer - 收到GET验证请求: msg_signature=..., timestamp=, nonce=
2026-02-10 23:49:05 - ERROR - WeChatLLMServer - GET请求缺少必要参数
2026-02-10 23:49:05 - INFO - WeChatLLMServer - ::1 - code 400, message Missing required parameters
2026-02-10 23:49:05 - INFO - WeChatLLMServer - ::1 - "GET /callback HTTP/1.1" 400 -
2026-02-10 23:49:05 - INFO - WeChatLLMServer - 收到GET验证请求: msg_signature=..., timestamp=, nonce=
2026-02-10 23:49:05 - ERROR - WeChatLLMServer - GET请求缺少必要参数
2026-02-10 23:49:05 - INFO - WeChatLLMServer - ::1 - code 400, message Missing required parameters
2026-02-10 23:49:05 - INFO - WeChatLLMServer - ::1 - "GET /favicon.ico HTTP/1.1" 400 -
2026-02-10 23:49:14 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:49:24 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:49:34 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:49:44 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:49:54 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:50:04 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:50:14 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:50:24 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:50:31 - INFO - WeChatLLMServer - 收到GET验证请求: msg_signature=..., timestamp=, nonce=
2026-02-10 23:50:31 - ERROR - WeChatLLMServer - GET请求缺少必要参数
2026-02-10 23:50:31 - INFO - WeChatLLMServer - ::1 - code 400, message Missing required parameters
2026-02-10 23:50:31 - INFO - WeChatLLMServer - ::1 - "GET /callback HTTP/1.1" 400 -
2026-02-10 23:50:31 - INFO - WeChatLLMServer - 收到GET验证请求: msg_signature=..., timestamp=, nonce=
2026-02-10 23:50:31 - ERROR - WeChatLLMServer - GET请求缺少必要参数
2026-02-10 23:50:31 - INFO - WeChatLLMServer - ::1 - code 400, message Missing required parameters
2026-02-10 23:50:31 - INFO - WeChatLLMServer - ::1 - "GET /favicon.ico HTTP/1.1" 400 -
2026-02-10 23:50:34 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:50:44 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:50:54 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:51:04 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:51:14 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:51:24 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:51:29 - INFO - WeChatLLMServer - 收到GET验证请求: msg_signature=..., timestamp=, nonce=
2026-02-10 23:51:29 - ERROR - WeChatLLMServer - GET请求缺少必要参数
2026-02-10 23:51:29 - INFO - WeChatLLMServer - 2409:895a:d292:2020:ed0d:71fc:eb8b:40cd - code 400, message Missing required parameters
2026-02-10 23:51:29 - INFO - WeChatLLMServer - 2409:895a:d292:2020:ed0d:71fc:eb8b:40cd - "GET /callback HTTP/1.1" 400 -
2026-02-10 23:51:29 - INFO - WeChatLLMServer - 收到GET验证请求: msg_signature=..., timestamp=, nonce=
2026-02-10 23:51:29 - ERROR - WeChatLLMServer - GET请求缺少必要参数
2026-02-10 23:51:29 - INFO - WeChatLLMServer - 2409:895a:d292:2020:ed0d:71fc:eb8b:40cd - code 400, message Missing required parameters
2026-02-10 23:51:29 - INFO - WeChatLLMServer - 2409:895a:d292:2020:ed0d:71fc:eb8b:40cd - "GET /favicon.ico HTTP/1.1" 400 -
2026-02-10 23:51:34 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:51:44 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:51:54 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:52:04 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:52:14 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:52:24 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:52:34 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:52:44 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:52:54 - INFO - WeChatLLMServer - 收到GET验证请求: msg_signature=..., timestamp=, nonce=
2026-02-10 23:52:54 - ERROR - WeChatLLMServer - GET请求缺少必要参数
2026-02-10 23:52:54 - INFO - WeChatLLMServer - 2409:895a:d292:2020:ed0d:71fc:eb8b:40cd - code 400, message Missing required parameters
2026-02-10 23:52:54 - INFO - WeChatLLMServer - 2409:895a:d292:2020:ed0d:71fc:eb8b:40cd - "GET /callback HTTP/1.1" 400 -
2026-02-10 23:52:54 - INFO - WeChatLLMServer - 收到GET验证请求: msg_signature=..., timestamp=, nonce=
2026-02-10 23:52:54 - ERROR - WeChatLLMServer - GET请求缺少必要参数
2026-02-10 23:52:54 - INFO - WeChatLLMServer - 2409:895a:d292:2020:ed0d:71fc:eb8b:40cd - code 400, message Missing required parameters
2026-02-10 23:52:54 - INFO - WeChatLLMServer - 2409:895a:d292:2020:ed0d:71fc:eb8b:40cd - "GET /favicon.ico HTTP/1.1" 400 -
2026-02-10 23:52:54 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:53:03 - INFO - WeChatLLMServer - 收到GET验证请求: msg_signature=..., timestamp=, nonce=
2026-02-10 23:53:03 - ERROR - WeChatLLMServer - GET请求缺少必要参数
2026-02-10 23:53:03 - INFO - WeChatLLMServer - 2409:895a:d292:2020:ed0d:71fc:eb8b:40cd - code 400, message Missing required parameters
2026-02-10 23:53:03 - INFO - WeChatLLMServer - 2409:895a:d292:2020:ed0d:71fc:eb8b:40cd - "GET /callback HTTP/1.1" 400 -
2026-02-10 23:53:03 - INFO - WeChatLLMServer - 收到GET验证请求: msg_signature=..., timestamp=, nonce=
2026-02-10 23:53:03 - ERROR - WeChatLLMServer - GET请求缺少必要参数
2026-02-10 23:53:03 - INFO - WeChatLLMServer - 2409:895a:d292:2020:ed0d:71fc:eb8b:40cd - code 400, message Missing required parameters
2026-02-10 23:53:03 - INFO - WeChatLLMServer - 2409:895a:d292:2020:ed0d:71fc:eb8b:40cd - "GET /favicon.ico HTTP/1.1" 400 -
2026-02-10 23:53:04 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:53:14 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:53:24 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:53:34 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:53:44 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:53:54 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:54:04 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:54:14 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:54:24 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:54:34 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:54:44 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:54:54 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:55:04 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:55:14 - INFO - WeChatLLMServer - 收到GET验证请求: msg_signature=..., timestamp=, nonce=
2026-02-10 23:55:14 - ERROR - WeChatLLMServer - GET请求缺少必要参数
2026-02-10 23:55:14 - INFO - WeChatLLMServer - 2400:cb00:28:1000:4885:236:6:1f0f - code 400, message Missing required parameters
2026-02-10 23:55:14 - INFO - WeChatLLMServer - 2400:cb00:28:1000:4885:236:6:1f0f - "GET /callback HTTP/1.1" 400 -
2026-02-10 23:55:14 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:55:17 - INFO - WeChatLLMServer - 收到GET验证请求: msg_signature=..., timestamp=, nonce=
2026-02-10 23:55:17 - ERROR - WeChatLLMServer - GET请求缺少必要参数
2026-02-10 23:55:17 - INFO - WeChatLLMServer - 2400:cb00:28:1000:8f5a:5bf4:b71:afb9 - code 400, message Missing required parameters
2026-02-10 23:55:17 - INFO - WeChatLLMServer - 2400:cb00:28:1000:8f5a:5bf4:b71:afb9 - "GET /favicon.ico HTTP/1.1" 400 -
2026-02-10 23:55:23 - INFO - WeChatLLMServer - 收到GET验证请求: msg_signature=b164c8a4c0..., timestamp=1770738922, nonce=1770635298
2026-02-10 23:55:23 - INFO - WeChatLLMServer - GET验证成功
2026-02-10 23:55:23 - INFO - WeChatLLMServer - 2400:cb00:996:1000:dff1:f892:f566:270e - "GET /callback?msg_signature=b164c8a4c0b3a6cb036c9048205f2033cd07e8bd&timestamp=1770738922&nonce=1770635298&echostr=fbNyp4MoBGGh8E3Z%2Bsf%2FpDUNZuuPoo9oPYmpxBLQIffx0RjDvNBtJsi9cTBjrLthD1%2BY6arPe%2FZ26l8Zt85OOg%3D%3D HTTP/1.1" 200 -
2026-02-10 23:55:24 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:55:34 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-10 23:55:36 - INFO - WeChatLLMServer - 收到信号 2，正在关闭服务...
2026-02-10 23:55:36 - INFO - WeChatLLMServer - 正在停止企业微信LLM交互服务端...
2026-02-10 23:55:36 - INFO - WeChatLLMServer - 停止企业微信服务器...
2026-02-10 23:55:36 - ERROR - WeChatLLMServer - 服务器运行出错: [WinError 10038] 在一个非套接字上尝试了一个操作。
2026-02-10 23:55:36 - INFO - WeChatLLMServer - 服务器已关闭
2026-02-10 23:55:36 - INFO - WeChatLLMServer - 服务器已关闭
2026-02-10 23:55:36 - INFO - WeChatLLMServer - 停止消息处理器...
2026-02-10 23:55:37 - INFO - WeChatLLMServer - 消息处理器已停止
2026-02-10 23:55:37 - INFO - WeChatLLMServer - 关闭用户会话管理器...
2026-02-10 23:55:37 - INFO - WeChatLLMServer - 正在关闭用户会话管理器...
2026-02-10 23:55:37 - INFO - WeChatLLMServer - 用户会话管理器已关闭，保存了 0 个会话
2026-02-10 23:55:37 - INFO - WeChatLLMServer - 企业微信LLM交互服务端已停止
2026-02-11 16:05:33 - INFO - WeChatLLMServer - 日志系统初始化完成，级别: INFO
2026-02-11 16:05:33 - INFO - WeChatLLMServer - 初始化用户会话管理器...
2026-02-11 16:05:33 - INFO - WeChatLLMServer - 用户会话管理器初始化完成，最大用户数: 10
2026-02-11 16:05:33 - INFO - WeChatLLMServer - 初始化消息处理器...
2026-02-11 16:05:34 - INFO - WeChatLLMServer - 企业微信客户端初始化完成，应用ID: 1000002
2026-02-11 16:05:34 - WARNING - WeChatLLMServer - soul.md内容加载失败或为空
2026-02-11 16:05:34 - WARNING - WeChatLLMServer - 工具调用未启用，将只支持纯聊天
2026-02-11 16:05:34 - INFO - WeChatLLMServer - 消息处理器初始化完成
2026-02-11 16:05:34 - INFO - WeChatLLMServer - 初始化企业微信服务器...
2026-02-11 16:05:34 - INFO - WeChatLLMServer - 企业微信服务器初始化完成，监听地址: :::8080
2026-02-11 16:05:34 - INFO - WeChatLLMServer - 所有组件初始化完成
2026-02-11 16:05:34 - INFO - WeChatLLMServer - 启动企业微信LLM交互服务端...
2026-02-11 16:05:34 - INFO - WeChatLLMServer - 启动消息处理器...
2026-02-11 16:05:34 - INFO - WeChatLLMServer - 开始消息处理循环
2026-02-11 16:05:34 - INFO - WeChatLLMServer - 消息处理器已启动
2026-02-11 16:05:34 - INFO - WeChatLLMServer - 启动企业微信服务器...
2026-02-11 16:05:34 - INFO - WeChatLLMServer - 
        ========================================
            企业微信LLM交互服务端启动成功
        ========================================
        
        服务配置：
        服务器地址: :::8080
        最大用户数: 10
        消息批量超时: 10秒
        对话超时: 360秒
        
        LLM配置：
        API提供商: DeepSeek
        基础URL: https://api.deepseek.
        
        企业微信配置：
        企业ID: ww1b7c2409...
        应用ID: 1000002
        
        日志配置：
        日志级别: INFO
        日志目录: ./logs
        
        ========================================
        服务已启动，按 Ctrl+C 停止服务
        ========================================
        
2026-02-11 16:05:34 - INFO - WeChatLLMServer - 进入主循环...
2026-02-11 16:05:34 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 已停止
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:05:34 - INFO - WeChatLLMServer - 
        ========================================
            企业微信回调服务器启动
        ========================================
        
        服务器配置：
        服务器类型: 双栈服务器 (IPv4 + IPv6)
        监听地址: :: (所有IPv6地址，同时支持IPv4)
        监听端口: 8080
        
        回调URL配置：
        企业微信回调URL: http://你的域名或IP:8080/callback
        Token: FREDERICAT...
        EncodingAESKey: norTzT7trW...
        
        按 Ctrl+C 停止服务器
        
2026-02-11 16:05:34 - INFO - WeChatLLMServer - 服务器正在启动，监听 :::8080...
2026-02-11 16:05:44 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:05:53 - INFO - WeChatLLMServer - 收到信号 2，正在关闭服务...
2026-02-11 16:05:53 - INFO - WeChatLLMServer - 正在停止企业微信LLM交互服务端...
2026-02-11 16:05:53 - INFO - WeChatLLMServer - 停止企业微信服务器...
2026-02-11 16:05:53 - INFO - WeChatLLMServer - 服务器已关闭
2026-02-11 16:05:53 - ERROR - WeChatLLMServer - 服务器运行出错: [WinError 10038] 在一个非套接字上尝试了一个操作。
2026-02-11 16:05:53 - INFO - WeChatLLMServer - 停止消息处理器...
2026-02-11 16:05:53 - INFO - WeChatLLMServer - 服务器已关闭
2026-02-11 16:05:53 - INFO - WeChatLLMServer - 消息处理器已停止
2026-02-11 16:05:53 - INFO - WeChatLLMServer - 关闭用户会话管理器...
2026-02-11 16:05:53 - INFO - WeChatLLMServer - 正在关闭用户会话管理器...
2026-02-11 16:05:53 - INFO - WeChatLLMServer - 用户会话管理器已关闭，保存了 0 个会话
2026-02-11 16:05:53 - INFO - WeChatLLMServer - 企业微信LLM交互服务端已停止
2026-02-11 16:05:56 - INFO - WeChatLLMServer - 日志系统初始化完成，级别: INFO
2026-02-11 16:05:56 - INFO - WeChatLLMServer - 初始化用户会话管理器...
2026-02-11 16:05:56 - INFO - WeChatLLMServer - 用户会话管理器初始化完成，最大用户数: 10
2026-02-11 16:05:56 - INFO - WeChatLLMServer - 初始化消息处理器...
2026-02-11 16:05:56 - INFO - WeChatLLMServer - 企业微信客户端初始化完成，应用ID: 1000002
2026-02-11 16:05:56 - WARNING - WeChatLLMServer - soul.md内容加载失败或为空
2026-02-11 16:05:56 - WARNING - WeChatLLMServer - 工具调用未启用，将只支持纯聊天
2026-02-11 16:05:56 - INFO - WeChatLLMServer - 消息处理器初始化完成
2026-02-11 16:05:56 - INFO - WeChatLLMServer - 初始化企业微信服务器...
2026-02-11 16:05:56 - INFO - WeChatLLMServer - 企业微信服务器初始化完成，监听地址: :::8080
2026-02-11 16:05:56 - INFO - WeChatLLMServer - 所有组件初始化完成
2026-02-11 16:05:56 - INFO - WeChatLLMServer - 启动企业微信LLM交互服务端...
2026-02-11 16:05:56 - INFO - WeChatLLMServer - 启动消息处理器...
2026-02-11 16:05:56 - INFO - WeChatLLMServer - 开始消息处理循环
2026-02-11 16:05:56 - INFO - WeChatLLMServer - 消息处理器已启动
2026-02-11 16:05:56 - INFO - WeChatLLMServer - 启动企业微信服务器...
2026-02-11 16:05:56 - INFO - WeChatLLMServer - 
        ========================================
            企业微信LLM交互服务端启动成功
        ========================================
        
        服务配置：
        服务器地址: :::8080
        最大用户数: 10
        消息批量超时: 10秒
        对话超时: 360秒
        
        LLM配置：
        API提供商: DeepSeek
        基础URL: https://api.deepseek.
        
        企业微信配置：
        企业ID: ww1b7c2409...
        应用ID: 1000002
        
        日志配置：
        日志级别: INFO
        日志目录: ./logs
        
        ========================================
        服务已启动，按 Ctrl+C 停止服务
        ========================================
        
2026-02-11 16:05:56 - INFO - WeChatLLMServer - 进入主循环...
2026-02-11 16:05:56 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 已停止
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:05:56 - INFO - WeChatLLMServer - 
        ========================================
            企业微信回调服务器启动
        ========================================
        
        服务器配置：
        服务器类型: 双栈服务器 (IPv4 + IPv6)
        监听地址: :: (所有IPv6地址，同时支持IPv4)
        监听端口: 8080
        
        回调URL配置：
        企业微信回调URL: http://你的域名或IP:8080/callback
        Token: FREDERICAT...
        EncodingAESKey: norTzT7trW...
        
        按 Ctrl+C 停止服务器
        
2026-02-11 16:05:56 - INFO - WeChatLLMServer - 服务器正在启动，监听 :::8080...
2026-02-11 16:06:06 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:06:15 - INFO - WeChatLLMServer - 收到信号 2，正在关闭服务...
2026-02-11 16:06:15 - INFO - WeChatLLMServer - 正在停止企业微信LLM交互服务端...
2026-02-11 16:06:15 - INFO - WeChatLLMServer - 停止企业微信服务器...
2026-02-11 16:06:15 - ERROR - WeChatLLMServer - 服务器运行出错: [WinError 10038] 在一个非套接字上尝试了一个操作。
2026-02-11 16:06:15 - INFO - WeChatLLMServer - 服务器已关闭
2026-02-11 16:06:15 - INFO - WeChatLLMServer - 服务器已关闭
2026-02-11 16:06:15 - INFO - WeChatLLMServer - 停止消息处理器...
2026-02-11 16:06:15 - INFO - WeChatLLMServer - 消息处理器已停止
2026-02-11 16:06:15 - INFO - WeChatLLMServer - 关闭用户会话管理器...
2026-02-11 16:06:15 - INFO - WeChatLLMServer - 正在关闭用户会话管理器...
2026-02-11 16:06:15 - INFO - WeChatLLMServer - 用户会话管理器已关闭，保存了 0 个会话
2026-02-11 16:06:15 - INFO - WeChatLLMServer - 企业微信LLM交互服务端已停止
2026-02-11 16:12:36 - INFO - WeChatLLMServer - 日志系统初始化完成，级别: INFO
2026-02-11 16:12:36 - INFO - WeChatLLMServer - 初始化用户会话管理器...
2026-02-11 16:12:36 - INFO - WeChatLLMServer - 用户会话管理器初始化完成，最大用户数: 10
2026-02-11 16:12:36 - INFO - WeChatLLMServer - 初始化消息处理器...
2026-02-11 16:12:36 - INFO - WeChatLLMServer - 企业微信客户端初始化完成，应用ID: 1000002
2026-02-11 16:12:36 - WARNING - WeChatLLMServer - soul.md内容加载失败或为空
2026-02-11 16:12:36 - WARNING - WeChatLLMServer - 工具调用未启用，将只支持纯聊天
2026-02-11 16:12:36 - INFO - WeChatLLMServer - 消息处理器初始化完成
2026-02-11 16:12:36 - INFO - WeChatLLMServer - 初始化企业微信服务器...
2026-02-11 16:12:36 - INFO - WeChatLLMServer - 企业微信服务器初始化完成，监听地址: :::8080
2026-02-11 16:12:36 - INFO - WeChatLLMServer - 所有组件初始化完成
2026-02-11 16:12:36 - INFO - WeChatLLMServer - 启动企业微信LLM交互服务端...
2026-02-11 16:12:36 - INFO - WeChatLLMServer - 启动消息处理器...
2026-02-11 16:12:36 - INFO - WeChatLLMServer - 开始消息处理循环
2026-02-11 16:12:36 - INFO - WeChatLLMServer - 消息处理器已启动
2026-02-11 16:12:36 - INFO - WeChatLLMServer - 启动企业微信服务器...
2026-02-11 16:12:36 - INFO - WeChatLLMServer - 
        ========================================
            企业微信LLM交互服务端启动成功
        ========================================
        
        服务配置：
        服务器地址: :::8080
        最大用户数: 10
        消息批量超时: 10秒
        对话超时: 360秒
        
        LLM配置：
        API提供商: DeepSeek
        基础URL: https://api.deepseek.
        
        企业微信配置：
        企业ID: ww1b7c2409...
        应用ID: 1000002
        
        日志配置：
        日志级别: INFO
        日志目录: ./logs
        
        ========================================
        服务已启动，按 Ctrl+C 停止服务
        ========================================
        
2026-02-11 16:12:36 - INFO - WeChatLLMServer - 进入主循环...
2026-02-11 16:12:36 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 已停止
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:12:36 - INFO - WeChatLLMServer - 
        ========================================
            企业微信回调服务器启动
        ========================================
        
        服务器配置：
        服务器类型: 双栈服务器 (IPv4 + IPv6)
        监听地址: :: (所有IPv6地址，同时支持IPv4)
        监听端口: 8080
        
        回调URL配置：
        企业微信回调URL: http://你的域名或IP:8080/callback
        Token: FREDERICAT...
        EncodingAESKey: norTzT7trW...
        
        按 Ctrl+C 停止服务器
        
2026-02-11 16:12:36 - INFO - WeChatLLMServer - 服务器正在启动，监听 :::8080...
2026-02-11 16:12:46 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:12:56 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:13:06 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:13:16 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:13:26 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:13:36 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:13:46 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:13:56 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:14:06 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:14:16 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:14:26 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:14:36 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:14:46 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:14:56 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:15:06 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:15:16 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:15:26 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:15:36 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:15:46 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:15:56 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:16:06 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:16:16 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:16:26 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:16:36 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:16:46 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:16:56 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:17:06 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:17:16 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:17:26 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:17:36 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:17:46 - INFO - WeChatLLMServer - 收到信号 2，正在关闭服务...
2026-02-11 16:17:46 - INFO - WeChatLLMServer - 正在停止企业微信LLM交互服务端...
2026-02-11 16:17:46 - INFO - WeChatLLMServer - 停止企业微信服务器...
2026-02-11 16:17:46 - ERROR - WeChatLLMServer - 服务器运行出错: [WinError 10038] 在一个非套接字上尝试了一个操作。
2026-02-11 16:17:46 - INFO - WeChatLLMServer - 服务器已关闭
2026-02-11 16:17:46 - INFO - WeChatLLMServer - 服务器已关闭
2026-02-11 16:17:46 - INFO - WeChatLLMServer - 停止消息处理器...
2026-02-11 16:17:46 - INFO - WeChatLLMServer - 消息处理器已停止
2026-02-11 16:17:46 - INFO - WeChatLLMServer - 关闭用户会话管理器...
2026-02-11 16:17:46 - INFO - WeChatLLMServer - 正在关闭用户会话管理器...
2026-02-11 16:17:46 - INFO - WeChatLLMServer - 用户会话管理器已关闭，保存了 0 个会话
2026-02-11 16:17:46 - INFO - WeChatLLMServer - 企业微信LLM交互服务端已停止
2026-02-11 16:17:49 - INFO - WeChatLLMServer - 日志系统初始化完成，级别: INFO
2026-02-11 16:17:49 - INFO - WeChatLLMServer - 初始化用户会话管理器...
2026-02-11 16:17:49 - INFO - WeChatLLMServer - 用户会话管理器初始化完成，最大用户数: 10
2026-02-11 16:17:49 - INFO - WeChatLLMServer - 初始化消息处理器...
2026-02-11 16:17:49 - INFO - WeChatLLMServer - 企业微信客户端初始化完成，应用ID: 1000002
2026-02-11 16:17:49 - WARNING - WeChatLLMServer - soul.md内容加载失败或为空
2026-02-11 16:17:49 - WARNING - WeChatLLMServer - 工具调用未启用，将只支持纯聊天
2026-02-11 16:17:49 - INFO - WeChatLLMServer - 消息处理器初始化完成
2026-02-11 16:17:49 - INFO - WeChatLLMServer - 初始化企业微信服务器...
2026-02-11 16:17:49 - INFO - WeChatLLMServer - 企业微信服务器初始化完成，监听地址: :::8080
2026-02-11 16:17:49 - INFO - WeChatLLMServer - 所有组件初始化完成
2026-02-11 16:17:49 - INFO - WeChatLLMServer - 启动企业微信LLM交互服务端...
2026-02-11 16:17:49 - INFO - WeChatLLMServer - 启动消息处理器...
2026-02-11 16:17:49 - INFO - WeChatLLMServer - 开始消息处理循环
2026-02-11 16:17:49 - INFO - WeChatLLMServer - 消息处理器已启动
2026-02-11 16:17:49 - INFO - WeChatLLMServer - 启动企业微信服务器...
2026-02-11 16:17:49 - INFO - WeChatLLMServer - 
        ========================================
            企业微信LLM交互服务端启动成功
        ========================================
        
        服务配置：
        服务器地址: :::8080
        最大用户数: 10
        消息批量超时: 10秒
        对话超时: 360秒
        
        LLM配置：
        API提供商: DeepSeek
        基础URL: https://api.deepseek.
        
        企业微信配置：
        企业ID: ww1b7c2409...
        应用ID: 1000002
        
        日志配置：
        日志级别: INFO
        日志目录: ./logs
        
        ========================================
        服务已启动，按 Ctrl+C 停止服务
        ========================================
        
2026-02-11 16:17:49 - INFO - WeChatLLMServer - 进入主循环...
2026-02-11 16:17:49 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 已停止
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:17:49 - INFO - WeChatLLMServer - 
        ========================================
            企业微信回调服务器启动
        ========================================
        
        服务器配置：
        服务器类型: 双栈服务器 (IPv4 + IPv6)
        监听地址: :: (所有IPv6地址，同时支持IPv4)
        监听端口: 8080
        
        回调URL配置：
        企业微信回调URL: http://你的域名或IP:8080/callback
        Token: FREDERICAT...
        EncodingAESKey: norTzT7trW...
        
        按 Ctrl+C 停止服务器
        
2026-02-11 16:17:49 - INFO - WeChatLLMServer - 服务器正在启动，监听 :::8080...
2026-02-11 16:17:59 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:18:09 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 未启用
            soul.md加载: 失败
            
2026-02-11 16:18:17 - INFO - WeChatLLMServer - 收到信号 2，正在关闭服务...
2026-02-11 16:18:17 - INFO - WeChatLLMServer - 正在停止企业微信LLM交互服务端...
2026-02-11 16:18:17 - INFO - WeChatLLMServer - 停止企业微信服务器...
2026-02-11 16:18:17 - ERROR - WeChatLLMServer - 服务器运行出错: [WinError 10038] 在一个非套接字上尝试了一个操作。
2026-02-11 16:18:17 - INFO - WeChatLLMServer - 服务器已关闭
2026-02-11 16:18:17 - INFO - WeChatLLMServer - 服务器已关闭
2026-02-11 16:18:17 - INFO - WeChatLLMServer - 停止消息处理器...
2026-02-11 16:18:17 - INFO - WeChatLLMServer - 消息处理器已停止
2026-02-11 16:18:17 - INFO - WeChatLLMServer - 关闭用户会话管理器...
2026-02-11 16:18:17 - INFO - WeChatLLMServer - 正在关闭用户会话管理器...
2026-02-11 16:18:17 - INFO - WeChatLLMServer - 用户会话管理器已关闭，保存了 0 个会话
2026-02-11 16:18:17 - INFO - WeChatLLMServer - 企业微信LLM交互服务端已停止
2026-02-11 16:18:35 - INFO - WeChatLLMServer - 日志系统初始化完成，级别: INFO
2026-02-11 16:18:35 - INFO - WeChatLLMServer - 初始化用户会话管理器...
2026-02-11 16:18:35 - INFO - WeChatLLMServer - 用户会话管理器初始化完成，最大用户数: 10
2026-02-11 16:18:35 - INFO - WeChatLLMServer - 初始化消息处理器...
2026-02-11 16:18:36 - INFO - WeChatLLMServer - 企业微信客户端初始化完成，应用ID: 1000002
2026-02-11 16:18:36 - INFO - WeChatLLMServer - 已加载soul.md内容作为system prompt（689字符）
2026-02-11 16:18:36 - INFO - WeChatLLMServer - 工具调用已启用，可用工具: 6 个
2026-02-11 16:18:36 - INFO - WeChatLLMServer - 消息处理器初始化完成
2026-02-11 16:18:36 - INFO - WeChatLLMServer - 初始化企业微信服务器...
2026-02-11 16:18:36 - INFO - WeChatLLMServer - 企业微信服务器初始化完成，监听地址: :::8080
2026-02-11 16:18:36 - INFO - WeChatLLMServer - 所有组件初始化完成
2026-02-11 16:18:36 - INFO - WeChatLLMServer - 启动企业微信LLM交互服务端...
2026-02-11 16:18:36 - INFO - WeChatLLMServer - 启动消息处理器...
2026-02-11 16:18:36 - INFO - WeChatLLMServer - 开始消息处理循环
2026-02-11 16:18:36 - INFO - WeChatLLMServer - 消息处理器已启动
2026-02-11 16:18:36 - INFO - WeChatLLMServer - 启动企业微信服务器...
2026-02-11 16:18:36 - INFO - WeChatLLMServer - 
        ========================================
            企业微信LLM交互服务端启动成功
        ========================================
        
        服务配置：
        服务器地址: :::8080
        最大用户数: 10
        消息批量超时: 10秒
        对话超时: 360秒
        
        LLM配置：
        API提供商: DeepSeek
        基础URL: https://api.deepseek.
        
        企业微信配置：
        企业ID: ww1b7c2409...
        应用ID: 1000002
        
        日志配置：
        日志级别: INFO
        日志目录: ./logs
        
        ========================================
        服务已启动，按 Ctrl+C 停止服务
        ========================================
        
2026-02-11 16:18:36 - INFO - WeChatLLMServer - 进入主循环...
2026-02-11 16:18:36 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 已停止
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:18:36 - INFO - WeChatLLMServer - 
        ========================================
            企业微信回调服务器启动
        ========================================
        
        服务器配置：
        服务器类型: 双栈服务器 (IPv4 + IPv6)
        监听地址: :: (所有IPv6地址，同时支持IPv4)
        监听端口: 8080
        
        回调URL配置：
        企业微信回调URL: http://你的域名或IP:8080/callback
        Token: FREDERICAT...
        EncodingAESKey: norTzT7trW...
        
        按 Ctrl+C 停止服务器
        
2026-02-11 16:18:36 - INFO - WeChatLLMServer - 服务器正在启动，监听 :::8080...
2026-02-11 16:18:46 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:18:56 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:19:06 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:19:16 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:19:17 - INFO - WeChatLLMServer - 收到POST消息请求: msg_signature=5a32e6f1d7..., timestamp=1770797956, nonce=1770023905
2026-02-11 16:19:17 - INFO - WeChatLLMServer - 解析消息: 类型=text, 发送者=ChenMingHao
2026-02-11 16:19:17 - INFO - WeChatLLMServer - 收到文本消息来自 ChenMingHao: 你在吗...
2026-02-11 16:19:17 - INFO - WeChatLLMServer - 为新用户 ChenMingHao 创建会话
2026-02-11 16:19:17 - INFO - WeChatLLMServer - 用户 ChenMingHao 的对话已过期，创建新对话
2026-02-11 16:19:17 - INFO - WeChatLLMServer - 用户消息 - 用户ID: ChenMingHao, 类型: text, 内容: 你在吗
2026-02-11 16:19:17 - INFO - WeChatLLMServer - 2400:cb00:522:1000:de93:d02:e548:a23e - "POST /callback?msg_signature=5a32e6f1d7274e22d58f747adc82362690595285&timestamp=1770797956&nonce=1770023905 HTTP/1.1" 200 -
2026-02-11 16:19:17 - INFO - WeChatLLMServer - POST请求处理完成
2026-02-11 16:19:26 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 1
            活跃用户: 1
            待处理消息用户: 1
            队列中总消息数: 1
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:19:28 - INFO - WeChatLLMServer - 开始处理用户 ChenMingHao 的 1 条消息
2026-02-11 16:19:36 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 1
            活跃用户: 1
            待处理消息用户: 1
            队列中总消息数: 1
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:19:45 - ERROR - WeChatLLMServer - 调用LLM API失败: Request timed out.
2026-02-11 16:19:45 - WARNING - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败，队列保留
2026-02-11 16:19:45 - ERROR - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败
2026-02-11 16:19:46 - INFO - WeChatLLMServer - 开始处理用户 ChenMingHao 的 1 条消息
2026-02-11 16:19:46 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 1
            活跃用户: 1
            待处理消息用户: 1
            队列中总消息数: 1
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:19:52 - INFO - WeChatLLMServer - 收到信号 2，正在关闭服务...
2026-02-11 16:19:52 - INFO - WeChatLLMServer - 正在停止企业微信LLM交互服务端...
2026-02-11 16:19:52 - INFO - WeChatLLMServer - 停止企业微信服务器...
2026-02-11 16:19:52 - ERROR - WeChatLLMServer - 服务器运行出错: [WinError 10038] 在一个非套接字上尝试了一个操作。
2026-02-11 16:19:52 - INFO - WeChatLLMServer - 服务器已关闭
2026-02-11 16:19:52 - INFO - WeChatLLMServer - 服务器已关闭
2026-02-11 16:19:52 - INFO - WeChatLLMServer - 停止消息处理器...
2026-02-11 16:19:57 - INFO - WeChatLLMServer - 消息处理器已停止
2026-02-11 16:19:57 - INFO - WeChatLLMServer - 关闭用户会话管理器...
2026-02-11 16:19:57 - INFO - WeChatLLMServer - 正在关闭用户会话管理器...
2026-02-11 16:19:57 - INFO - WeChatLLMServer - 用户会话管理器已关闭，保存了 1 个会话
2026-02-11 16:19:57 - INFO - WeChatLLMServer - 企业微信LLM交互服务端已停止
2026-02-11 16:20:37 - INFO - WeChatLLMServer - 日志系统初始化完成，级别: INFO
2026-02-11 16:20:37 - INFO - WeChatLLMServer - 初始化用户会话管理器...
2026-02-11 16:20:37 - INFO - WeChatLLMServer - 用户会话管理器初始化完成，最大用户数: 10
2026-02-11 16:20:37 - INFO - WeChatLLMServer - 初始化消息处理器...
2026-02-11 16:20:37 - INFO - WeChatLLMServer - 企业微信客户端初始化完成，应用ID: 1000002
2026-02-11 16:20:37 - INFO - WeChatLLMServer - 已加载soul.md内容作为system prompt（689字符）
2026-02-11 16:20:37 - INFO - WeChatLLMServer - 工具调用已启用，可用工具: 6 个
2026-02-11 16:20:37 - INFO - WeChatLLMServer - 消息处理器初始化完成
2026-02-11 16:20:37 - INFO - WeChatLLMServer - 初始化企业微信服务器...
2026-02-11 16:20:37 - INFO - WeChatLLMServer - 企业微信服务器初始化完成，监听地址: :::8080
2026-02-11 16:20:37 - INFO - WeChatLLMServer - 所有组件初始化完成
2026-02-11 16:20:37 - INFO - WeChatLLMServer - 启动企业微信LLM交互服务端...
2026-02-11 16:20:37 - INFO - WeChatLLMServer - 启动消息处理器...
2026-02-11 16:20:37 - INFO - WeChatLLMServer - 开始消息处理循环
2026-02-11 16:20:37 - INFO - WeChatLLMServer - 消息处理器已启动
2026-02-11 16:20:37 - INFO - WeChatLLMServer - 启动企业微信服务器...
2026-02-11 16:20:37 - INFO - WeChatLLMServer - 
        ========================================
            企业微信LLM交互服务端启动成功
        ========================================
        
        服务配置：
        服务器地址: :::8080
        最大用户数: 10
        消息批量超时: 10秒
        对话超时: 360秒
        
        LLM配置：
        API提供商: DeepSeek
        基础URL: https://api.deepseek.
        
        企业微信配置：
        企业ID: ww1b7c2409...
        应用ID: 1000002
        
        日志配置：
        日志级别: INFO
        日志目录: ./logs
        
        ========================================
        服务已启动，按 Ctrl+C 停止服务
        ========================================
        
2026-02-11 16:20:37 - INFO - WeChatLLMServer - 进入主循环...
2026-02-11 16:20:37 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 已停止
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:20:37 - INFO - WeChatLLMServer - 
        ========================================
            企业微信回调服务器启动
        ========================================
        
        服务器配置：
        服务器类型: 双栈服务器 (IPv4 + IPv6)
        监听地址: :: (所有IPv6地址，同时支持IPv4)
        监听端口: 8080
        
        回调URL配置：
        企业微信回调URL: http://你的域名或IP:8080/callback
        Token: FREDERICAT...
        EncodingAESKey: norTzT7trW...
        
        按 Ctrl+C 停止服务器
        
2026-02-11 16:20:37 - INFO - WeChatLLMServer - 服务器正在启动，监听 :::8080...
2026-02-11 16:20:47 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:20:49 - INFO - WeChatLLMServer - 收到POST消息请求: msg_signature=3c35d87758..., timestamp=1770798047, nonce=1770175618
2026-02-11 16:20:49 - INFO - WeChatLLMServer - 解析消息: 类型=text, 发送者=ChenMingHao
2026-02-11 16:20:49 - INFO - WeChatLLMServer - 收到文本消息来自 ChenMingHao: 你在吗...
2026-02-11 16:20:49 - INFO - WeChatLLMServer - 为新用户 ChenMingHao 创建会话
2026-02-11 16:20:49 - INFO - WeChatLLMServer - 用户 ChenMingHao 的对话已过期，创建新对话
2026-02-11 16:20:49 - INFO - WeChatLLMServer - 用户消息 - 用户ID: ChenMingHao, 类型: text, 内容: 你在吗
2026-02-11 16:20:49 - INFO - WeChatLLMServer - 2400:cb00:1179:1000:be82:2721:2fa2:d187 - "POST /callback?msg_signature=3c35d87758175fd0c84878b875883de91eb6994d&timestamp=1770798047&nonce=1770175618 HTTP/1.1" 200 -
2026-02-11 16:20:49 - INFO - WeChatLLMServer - POST请求处理完成
2026-02-11 16:20:57 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 1
            活跃用户: 1
            待处理消息用户: 1
            队列中总消息数: 1
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:20:59 - INFO - WeChatLLMServer - 开始处理用户 ChenMingHao 的 1 条消息
2026-02-11 16:21:00 - ERROR - WeChatLLMServer - 调用LLM API失败: Connection error.
2026-02-11 16:21:00 - WARNING - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败，队列保留
2026-02-11 16:21:00 - ERROR - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败
2026-02-11 16:21:01 - INFO - WeChatLLMServer - 开始处理用户 ChenMingHao 的 1 条消息
2026-02-11 16:21:03 - ERROR - WeChatLLMServer - 调用LLM API失败: Connection error.
2026-02-11 16:21:03 - WARNING - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败，队列保留
2026-02-11 16:21:03 - ERROR - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败
2026-02-11 16:21:04 - INFO - WeChatLLMServer - 开始处理用户 ChenMingHao 的 1 条消息
2026-02-11 16:21:05 - ERROR - WeChatLLMServer - 调用LLM API失败: Connection error.
2026-02-11 16:21:05 - WARNING - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败，队列保留
2026-02-11 16:21:05 - ERROR - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败
2026-02-11 16:21:06 - INFO - WeChatLLMServer - 开始处理用户 ChenMingHao 的 1 条消息
2026-02-11 16:21:07 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 1
            活跃用户: 1
            待处理消息用户: 1
            队列中总消息数: 1
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:21:08 - ERROR - WeChatLLMServer - 调用LLM API失败: Connection error.
2026-02-11 16:21:08 - WARNING - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败，队列保留
2026-02-11 16:21:08 - ERROR - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败
2026-02-11 16:21:09 - INFO - WeChatLLMServer - 开始处理用户 ChenMingHao 的 1 条消息
2026-02-11 16:21:10 - ERROR - WeChatLLMServer - 调用LLM API失败: Connection error.
2026-02-11 16:21:10 - WARNING - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败，队列保留
2026-02-11 16:21:10 - ERROR - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败
2026-02-11 16:21:11 - INFO - WeChatLLMServer - 开始处理用户 ChenMingHao 的 1 条消息
2026-02-11 16:21:12 - ERROR - WeChatLLMServer - 调用LLM API失败: Connection error.
2026-02-11 16:21:12 - WARNING - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败，队列保留
2026-02-11 16:21:12 - ERROR - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败
2026-02-11 16:21:13 - INFO - WeChatLLMServer - 开始处理用户 ChenMingHao 的 1 条消息
2026-02-11 16:21:14 - INFO - WeChatLLMServer - 收到信号 2，正在关闭服务...
2026-02-11 16:21:14 - INFO - WeChatLLMServer - 正在停止企业微信LLM交互服务端...
2026-02-11 16:21:14 - INFO - WeChatLLMServer - 停止企业微信服务器...
2026-02-11 16:21:14 - ERROR - WeChatLLMServer - 服务器运行出错: [WinError 10038] 在一个非套接字上尝试了一个操作。
2026-02-11 16:21:14 - INFO - WeChatLLMServer - 服务器已关闭
2026-02-11 16:21:14 - INFO - WeChatLLMServer - 服务器已关闭
2026-02-11 16:21:14 - INFO - WeChatLLMServer - 停止消息处理器...
2026-02-11 16:21:15 - ERROR - WeChatLLMServer - 调用LLM API失败: Connection error.
2026-02-11 16:21:15 - WARNING - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败，队列保留
2026-02-11 16:21:15 - ERROR - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败
2026-02-11 16:21:16 - INFO - WeChatLLMServer - 消息处理器已停止
2026-02-11 16:21:16 - INFO - WeChatLLMServer - 关闭用户会话管理器...
2026-02-11 16:21:16 - INFO - WeChatLLMServer - 正在关闭用户会话管理器...
2026-02-11 16:21:16 - INFO - WeChatLLMServer - 用户会话管理器已关闭，保存了 1 个会话
2026-02-11 16:21:16 - INFO - WeChatLLMServer - 企业微信LLM交互服务端已停止
2026-02-11 16:25:08 - INFO - WeChatLLMServer - 日志系统初始化完成，级别: INFO
2026-02-11 16:25:08 - INFO - WeChatLLMServer - 初始化用户会话管理器...
2026-02-11 16:25:08 - INFO - WeChatLLMServer - 用户会话管理器初始化完成，最大用户数: 10
2026-02-11 16:25:08 - INFO - WeChatLLMServer - 初始化消息处理器...
2026-02-11 16:25:09 - INFO - WeChatLLMServer - 企业微信客户端初始化完成，应用ID: 1000002
2026-02-11 16:25:09 - INFO - WeChatLLMServer - 已加载soul.md内容作为system prompt（689字符）
2026-02-11 16:25:09 - INFO - WeChatLLMServer - 工具调用已启用，可用工具: 6 个
2026-02-11 16:25:09 - INFO - WeChatLLMServer - 消息处理器初始化完成
2026-02-11 16:25:09 - INFO - WeChatLLMServer - 初始化企业微信服务器...
2026-02-11 16:25:09 - INFO - WeChatLLMServer - 企业微信服务器初始化完成，监听地址: :::8080
2026-02-11 16:25:09 - INFO - WeChatLLMServer - 所有组件初始化完成
2026-02-11 16:25:09 - INFO - WeChatLLMServer - 启动企业微信LLM交互服务端...
2026-02-11 16:25:09 - INFO - WeChatLLMServer - 启动消息处理器...
2026-02-11 16:25:09 - INFO - WeChatLLMServer - 开始消息处理循环
2026-02-11 16:25:09 - INFO - WeChatLLMServer - 消息处理器已启动
2026-02-11 16:25:09 - INFO - WeChatLLMServer - 启动企业微信服务器...
2026-02-11 16:25:09 - INFO - WeChatLLMServer - 
        ========================================
            企业微信LLM交互服务端启动成功
        ========================================
        
        服务配置：
        服务器地址: :::8080
        最大用户数: 10
        消息批量超时: 10秒
        对话超时: 360秒
        
        LLM配置：
        API提供商: DeepSeek
        基础URL: https://api.deepseek.
        
        企业微信配置：
        企业ID: ww1b7c2409...
        应用ID: 1000002
        
        日志配置：
        日志级别: INFO
        日志目录: ./logs
        
        ========================================
        服务已启动，按 Ctrl+C 停止服务
        ========================================
        
2026-02-11 16:25:09 - INFO - WeChatLLMServer - 进入主循环...
2026-02-11 16:25:09 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 已停止
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:25:09 - INFO - WeChatLLMServer - 
        ========================================
            企业微信回调服务器启动
        ========================================
        
        服务器配置：
        服务器类型: 双栈服务器 (IPv4 + IPv6)
        监听地址: :: (所有IPv6地址，同时支持IPv4)
        监听端口: 8080
        
        回调URL配置：
        企业微信回调URL: http://你的域名或IP:8080/callback
        Token: FREDERICAT...
        EncodingAESKey: norTzT7trW...
        
        按 Ctrl+C 停止服务器
        
2026-02-11 16:25:09 - INFO - WeChatLLMServer - 服务器正在启动，监听 :::8080...
2026-02-11 16:25:15 - INFO - WeChatLLMServer - 收到POST消息请求: msg_signature=0d6797445a..., timestamp=1770798314, nonce=1770968450
2026-02-11 16:25:15 - INFO - WeChatLLMServer - 解析消息: 类型=text, 发送者=ChenMingHao
2026-02-11 16:25:15 - INFO - WeChatLLMServer - 收到文本消息来自 ChenMingHao: 你在吗...
2026-02-11 16:25:15 - INFO - WeChatLLMServer - 为新用户 ChenMingHao 创建会话
2026-02-11 16:25:15 - INFO - WeChatLLMServer - 用户 ChenMingHao 的对话已过期，创建新对话
2026-02-11 16:25:15 - INFO - WeChatLLMServer - 用户消息 - 用户ID: ChenMingHao, 类型: text, 内容: 你在吗
2026-02-11 16:25:15 - INFO - WeChatLLMServer - 2400:cb00:997:1000:cfa6:7bf5:c9e6:8f13 - "POST /callback?msg_signature=0d6797445a8408f7780f5f180cd53c275460e5e1&timestamp=1770798314&nonce=1770968450 HTTP/1.1" 200 -
2026-02-11 16:25:15 - INFO - WeChatLLMServer - POST请求处理完成
2026-02-11 16:25:19 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 1
            活跃用户: 1
            待处理消息用户: 1
            队列中总消息数: 1
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:25:26 - INFO - WeChatLLMServer - 开始处理用户 ChenMingHao 的 1 条消息
2026-02-11 16:25:27 - ERROR - WeChatLLMServer - 调用LLM API失败: Connection error.
2026-02-11 16:25:27 - WARNING - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败，队列保留
2026-02-11 16:25:27 - ERROR - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败
2026-02-11 16:25:28 - INFO - WeChatLLMServer - 开始处理用户 ChenMingHao 的 1 条消息
2026-02-11 16:25:29 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 1
            活跃用户: 1
            待处理消息用户: 1
            队列中总消息数: 1
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:25:29 - ERROR - WeChatLLMServer - 调用LLM API失败: Connection error.
2026-02-11 16:25:29 - WARNING - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败，队列保留
2026-02-11 16:25:29 - ERROR - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败
2026-02-11 16:25:30 - INFO - WeChatLLMServer - 开始处理用户 ChenMingHao 的 1 条消息
2026-02-11 16:25:32 - ERROR - WeChatLLMServer - 调用LLM API失败: Connection error.
2026-02-11 16:25:32 - WARNING - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败，队列保留
2026-02-11 16:25:32 - ERROR - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败
2026-02-11 16:25:33 - INFO - WeChatLLMServer - 开始处理用户 ChenMingHao 的 1 条消息
2026-02-11 16:25:34 - INFO - WeChatLLMServer - 收到信号 2，正在关闭服务...
2026-02-11 16:25:34 - INFO - WeChatLLMServer - 正在停止企业微信LLM交互服务端...
2026-02-11 16:25:34 - INFO - WeChatLLMServer - 停止企业微信服务器...
2026-02-11 16:25:34 - ERROR - WeChatLLMServer - 服务器运行出错: [WinError 10038] 在一个非套接字上尝试了一个操作。
2026-02-11 16:25:34 - INFO - WeChatLLMServer - 服务器已关闭
2026-02-11 16:25:34 - INFO - WeChatLLMServer - 服务器已关闭
2026-02-11 16:25:34 - INFO - WeChatLLMServer - 停止消息处理器...
2026-02-11 16:25:34 - ERROR - WeChatLLMServer - 调用LLM API失败: Connection error.
2026-02-11 16:25:34 - WARNING - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败，队列保留
2026-02-11 16:25:34 - ERROR - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败
2026-02-11 16:25:35 - INFO - WeChatLLMServer - 消息处理器已停止
2026-02-11 16:25:35 - INFO - WeChatLLMServer - 关闭用户会话管理器...
2026-02-11 16:25:35 - INFO - WeChatLLMServer - 正在关闭用户会话管理器...
2026-02-11 16:25:35 - INFO - WeChatLLMServer - 用户会话管理器已关闭，保存了 1 个会话
2026-02-11 16:25:35 - INFO - WeChatLLMServer - 企业微信LLM交互服务端已停止
2026-02-11 16:27:49 - INFO - WeChatLLMServer - 日志系统初始化完成，级别: INFO
2026-02-11 16:27:49 - INFO - WeChatLLMServer - 初始化用户会话管理器...
2026-02-11 16:27:49 - INFO - WeChatLLMServer - 用户会话管理器初始化完成，最大用户数: 10
2026-02-11 16:27:49 - INFO - WeChatLLMServer - 初始化消息处理器...
2026-02-11 16:27:49 - INFO - WeChatLLMServer - 企业微信客户端初始化完成，应用ID: 1000002
2026-02-11 16:27:49 - INFO - WeChatLLMServer - 已加载soul.md内容作为system prompt（689字符）
2026-02-11 16:27:49 - INFO - WeChatLLMServer - 工具调用已启用，可用工具: 6 个
2026-02-11 16:27:49 - INFO - WeChatLLMServer - 消息处理器初始化完成
2026-02-11 16:27:49 - INFO - WeChatLLMServer - 初始化企业微信服务器...
2026-02-11 16:27:49 - INFO - WeChatLLMServer - 企业微信服务器初始化完成，监听地址: :::8080
2026-02-11 16:27:49 - INFO - WeChatLLMServer - 所有组件初始化完成
2026-02-11 16:27:49 - INFO - WeChatLLMServer - 启动企业微信LLM交互服务端...
2026-02-11 16:27:49 - INFO - WeChatLLMServer - 启动消息处理器...
2026-02-11 16:27:49 - INFO - WeChatLLMServer - 开始消息处理循环
2026-02-11 16:27:49 - INFO - WeChatLLMServer - 消息处理器已启动
2026-02-11 16:27:49 - INFO - WeChatLLMServer - 启动企业微信服务器...
2026-02-11 16:27:49 - INFO - WeChatLLMServer - 
        ========================================
            企业微信LLM交互服务端启动成功
        ========================================
        
        服务配置：
        服务器地址: :::8080
        最大用户数: 10
        消息批量超时: 10秒
        对话超时: 360秒
        
        LLM配置：
        API提供商: DeepSeek
        基础URL: https://api.deepseek.
        
        企业微信配置：
        企业ID: ww1b7c2409...
        应用ID: 1000002
        
        日志配置：
        日志级别: INFO
        日志目录: ./logs
        
        ========================================
        服务已启动，按 Ctrl+C 停止服务
        ========================================
        
2026-02-11 16:27:49 - INFO - WeChatLLMServer - 进入主循环...
2026-02-11 16:27:49 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 已停止
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:27:49 - INFO - WeChatLLMServer - 
        ========================================
            企业微信回调服务器启动
        ========================================
        
        服务器配置：
        服务器类型: 双栈服务器 (IPv4 + IPv6)
        监听地址: :: (所有IPv6地址，同时支持IPv4)
        监听端口: 8080
        
        回调URL配置：
        企业微信回调URL: http://你的域名或IP:8080/callback
        Token: FREDERICAT...
        EncodingAESKey: norTzT7trW...
        
        按 Ctrl+C 停止服务器
        
2026-02-11 16:27:49 - INFO - WeChatLLMServer - 服务器正在启动，监听 :::8080...
2026-02-11 16:27:57 - INFO - WeChatLLMServer - 收到POST消息请求: msg_signature=a364c4dcb3..., timestamp=1770798476, nonce=1770518227
2026-02-11 16:27:57 - INFO - WeChatLLMServer - 解析消息: 类型=text, 发送者=ChenMingHao
2026-02-11 16:27:57 - INFO - WeChatLLMServer - 收到文本消息来自 ChenMingHao: 你好...
2026-02-11 16:27:57 - INFO - WeChatLLMServer - 为新用户 ChenMingHao 创建会话
2026-02-11 16:27:57 - INFO - WeChatLLMServer - 用户 ChenMingHao 的对话已过期，创建新对话
2026-02-11 16:27:57 - INFO - WeChatLLMServer - 用户消息 - 用户ID: ChenMingHao, 类型: text, 内容: 你好
2026-02-11 16:27:57 - INFO - WeChatLLMServer - 2400:cb00:522:1000:de93:d02:e548:a23e - "POST /callback?msg_signature=a364c4dcb315acd6c3c635666e370b5690b4e82d&timestamp=1770798476&nonce=1770518227 HTTP/1.1" 200 -
2026-02-11 16:27:57 - INFO - WeChatLLMServer - POST请求处理完成
2026-02-11 16:27:59 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 1
            活跃用户: 1
            待处理消息用户: 1
            队列中总消息数: 1
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:28:08 - INFO - WeChatLLMServer - 开始处理用户 ChenMingHao 的 1 条消息
2026-02-11 16:28:09 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 1
            活跃用户: 1
            待处理消息用户: 1
            队列中总消息数: 1
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:28:09 - ERROR - WeChatLLMServer - 调用LLM API失败: Connection error.
2026-02-11 16:28:09 - WARNING - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败，队列保留
2026-02-11 16:28:09 - ERROR - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败
2026-02-11 16:28:10 - INFO - WeChatLLMServer - 开始处理用户 ChenMingHao 的 1 条消息
2026-02-11 16:28:12 - ERROR - WeChatLLMServer - 调用LLM API失败: Connection error.
2026-02-11 16:28:12 - WARNING - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败，队列保留
2026-02-11 16:28:12 - ERROR - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败
2026-02-11 16:28:13 - INFO - WeChatLLMServer - 开始处理用户 ChenMingHao 的 1 条消息
2026-02-11 16:28:14 - ERROR - WeChatLLMServer - 调用LLM API失败: Connection error.
2026-02-11 16:28:14 - WARNING - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败，队列保留
2026-02-11 16:28:14 - ERROR - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败
2026-02-11 16:28:15 - INFO - WeChatLLMServer - 开始处理用户 ChenMingHao 的 1 条消息
2026-02-11 16:28:16 - ERROR - WeChatLLMServer - 调用LLM API失败: Connection error.
2026-02-11 16:28:16 - WARNING - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败，队列保留
2026-02-11 16:28:16 - ERROR - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败
2026-02-11 16:28:17 - INFO - WeChatLLMServer - 收到信号 2，正在关闭服务...
2026-02-11 16:28:17 - INFO - WeChatLLMServer - 正在停止企业微信LLM交互服务端...
2026-02-11 16:28:17 - INFO - WeChatLLMServer - 停止企业微信服务器...
2026-02-11 16:28:17 - ERROR - WeChatLLMServer - 服务器运行出错: [WinError 10038] 在一个非套接字上尝试了一个操作。
2026-02-11 16:28:17 - INFO - WeChatLLMServer - 服务器已关闭
2026-02-11 16:28:17 - INFO - WeChatLLMServer - 服务器已关闭
2026-02-11 16:28:17 - INFO - WeChatLLMServer - 停止消息处理器...
2026-02-11 16:28:17 - INFO - WeChatLLMServer - 消息处理器已停止
2026-02-11 16:28:17 - INFO - WeChatLLMServer - 关闭用户会话管理器...
2026-02-11 16:28:17 - INFO - WeChatLLMServer - 正在关闭用户会话管理器...
2026-02-11 16:28:17 - INFO - WeChatLLMServer - 用户会话管理器已关闭，保存了 1 个会话
2026-02-11 16:28:17 - INFO - WeChatLLMServer - 企业微信LLM交互服务端已停止
2026-02-11 16:36:11 - INFO - WeChatLLMServer - 日志系统初始化完成，级别: INFO
2026-02-11 16:36:11 - INFO - WeChatLLMServer - 初始化用户会话管理器...
2026-02-11 16:36:11 - INFO - WeChatLLMServer - 用户会话管理器初始化完成，最大用户数: 10
2026-02-11 16:36:11 - INFO - WeChatLLMServer - 初始化消息处理器...
2026-02-11 16:36:11 - INFO - WeChatLLMServer - 企业微信客户端初始化完成，应用ID: 1000002
2026-02-11 16:36:11 - INFO - WeChatLLMServer - 已加载soul.md内容作为system prompt（689字符）
2026-02-11 16:36:11 - INFO - WeChatLLMServer - 工具调用已启用，可用工具: 6 个
2026-02-11 16:36:11 - INFO - WeChatLLMServer - 消息处理器初始化完成
2026-02-11 16:36:11 - INFO - WeChatLLMServer - 初始化企业微信服务器...
2026-02-11 16:36:11 - INFO - WeChatLLMServer - 企业微信服务器初始化完成，监听地址: :::8080
2026-02-11 16:36:11 - INFO - WeChatLLMServer - 所有组件初始化完成
2026-02-11 16:36:11 - INFO - WeChatLLMServer - 启动企业微信LLM交互服务端...
2026-02-11 16:36:11 - INFO - WeChatLLMServer - 启动消息处理器...
2026-02-11 16:36:11 - INFO - WeChatLLMServer - 开始消息处理循环
2026-02-11 16:36:11 - INFO - WeChatLLMServer - 消息处理器已启动
2026-02-11 16:36:11 - INFO - WeChatLLMServer - 启动企业微信服务器...
2026-02-11 16:36:11 - INFO - WeChatLLMServer - 
        ========================================
            企业微信LLM交互服务端启动成功
        ========================================
        
        服务配置：
        服务器地址: :::8080
        最大用户数: 10
        消息批量超时: 10秒
        对话超时: 360秒
        
        LLM配置：
        API提供商: DeepSeek
        基础URL: https://api.deepseek.com
        
        企业微信配置：
        企业ID: ww1b7c2409...
        应用ID: 1000002
        
        日志配置：
        日志级别: INFO
        日志目录: ./logs
        
        ========================================
        服务已启动，按 Ctrl+C 停止服务
        ========================================
        
2026-02-11 16:36:11 - INFO - WeChatLLMServer - 进入主循环...
2026-02-11 16:36:11 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 已停止
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:36:11 - INFO - WeChatLLMServer - 
        ========================================
            企业微信回调服务器启动
        ========================================
        
        服务器配置：
        服务器类型: 双栈服务器 (IPv4 + IPv6)
        监听地址: :: (所有IPv6地址，同时支持IPv4)
        监听端口: 8080
        
        回调URL配置：
        企业微信回调URL: http://你的域名或IP:8080/callback
        Token: FREDERICAT...
        EncodingAESKey: norTzT7trW...
        
        按 Ctrl+C 停止服务器
        
2026-02-11 16:36:11 - INFO - WeChatLLMServer - 服务器正在启动，监听 :::8080...
2026-02-11 16:36:19 - INFO - WeChatLLMServer - 收到POST消息请求: msg_signature=83e8060dbe..., timestamp=1770798977, nonce=1770506762
2026-02-11 16:36:19 - INFO - WeChatLLMServer - 解析消息: 类型=text, 发送者=ChenMingHao
2026-02-11 16:36:19 - INFO - WeChatLLMServer - 收到文本消息来自 ChenMingHao: 你在吗...
2026-02-11 16:36:20 - INFO - WeChatLLMServer - 为新用户 ChenMingHao 创建会话
2026-02-11 16:36:20 - INFO - WeChatLLMServer - 用户 ChenMingHao 的对话已过期，创建新对话
2026-02-11 16:36:20 - INFO - WeChatLLMServer - 用户消息 - 用户ID: ChenMingHao, 类型: text, 内容: 你在吗
2026-02-11 16:36:20 - INFO - WeChatLLMServer - 2400:cb00:1179:1000:1bcc:cd06:ab56:2b94 - "POST /callback?msg_signature=83e8060dbe98df53fcb4efedc4473f699ec68b79&timestamp=1770798977&nonce=1770506762 HTTP/1.1" 200 -
2026-02-11 16:36:20 - INFO - WeChatLLMServer - POST请求处理完成
2026-02-11 16:36:21 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 1
            活跃用户: 1
            待处理消息用户: 1
            队列中总消息数: 1
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:36:30 - INFO - WeChatLLMServer - 开始处理用户 ChenMingHao 的 1 条消息
2026-02-11 16:36:31 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 1
            活跃用户: 1
            待处理消息用户: 1
            队列中总消息数: 1
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:36:34 - INFO - WeChatLLMServer - 用户 ChenMingHao 的LLM响应包含工具调用
2026-02-11 16:36:34 - ERROR - WeChatLLMServer - 调用LLM API失败: Error code: 400 - {'error': {'message': "Messages with role 'tool' must be a response to a preceding message with 'tool_calls'", 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_request_error'}}
2026-02-11 16:36:34 - WARNING - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败，队列保留
2026-02-11 16:36:34 - ERROR - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败
2026-02-11 16:36:35 - INFO - WeChatLLMServer - 开始处理用户 ChenMingHao 的 1 条消息
2026-02-11 16:36:38 - INFO - WeChatLLMServer - 用户 ChenMingHao 的LLM响应包含工具调用
2026-02-11 16:36:38 - ERROR - WeChatLLMServer - 调用LLM API失败: Error code: 400 - {'error': {'message': "Messages with role 'tool' must be a response to a preceding message with 'tool_calls'", 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_request_error'}}
2026-02-11 16:36:38 - WARNING - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败，队列保留
2026-02-11 16:36:38 - ERROR - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败
2026-02-11 16:36:39 - INFO - WeChatLLMServer - 开始处理用户 ChenMingHao 的 1 条消息
2026-02-11 16:36:41 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 1
            活跃用户: 1
            待处理消息用户: 1
            队列中总消息数: 1
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:36:42 - INFO - WeChatLLMServer - 用户 ChenMingHao 的LLM响应被分为 2 段
2026-02-11 16:36:42 - INFO - WeChatLLMServer - 开始发送 2 段消息给用户 ChenMingHao
2026-02-11 16:36:42 - INFO - WeChatLLMServer - 开始发送 2 段消息给用户 ChenMingHao
2026-02-11 16:36:42 - INFO - WeChatLLMServer - 获取新的access_token...
2026-02-11 16:36:42 - INFO - WeChatLLMServer - 成功获取access_token
2026-02-11 16:36:42 - INFO - WeChatLLMServer - 准备发送消息给用户 ChenMingHao，内容长度: 24
2026-02-11 16:36:43 - ERROR - WeChatLLMServer - 发送消息失败: {'errcode': 60020, 'errmsg': 'not allow to access from your ip, hint: [1770799002442853216204684], from ip: 120.229.143.86, more info at https://open.work.weixin.qq.com/devtool/query?e=60020'}
2026-02-11 16:36:43 - ERROR - WeChatLLMServer - 第 1 段消息发送失败
2026-02-11 16:36:43 - INFO - WeChatLLMServer - 准备发送消息给用户 ChenMingHao，内容长度: 33
2026-02-11 16:36:43 - INFO - WeChatLLMServer - 收到信号 2，正在关闭服务...
2026-02-11 16:36:43 - INFO - WeChatLLMServer - 正在停止企业微信LLM交互服务端...
2026-02-11 16:36:43 - INFO - WeChatLLMServer - 停止企业微信服务器...
2026-02-11 16:36:43 - ERROR - WeChatLLMServer - 服务器运行出错: [WinError 10038] 在一个非套接字上尝试了一个操作。
2026-02-11 16:36:43 - INFO - WeChatLLMServer - 服务器已关闭
2026-02-11 16:36:43 - INFO - WeChatLLMServer - 服务器已关闭
2026-02-11 16:36:43 - INFO - WeChatLLMServer - 停止消息处理器...
2026-02-11 16:36:43 - ERROR - WeChatLLMServer - 发送消息失败: {'errcode': 60020, 'errmsg': 'not allow to access from your ip, hint: [1770799002038292817872706], from ip: 120.229.143.86, more info at https://open.work.weixin.qq.com/devtool/query?e=60020'}
2026-02-11 16:36:43 - ERROR - WeChatLLMServer - 第 2 段消息发送失败
2026-02-11 16:36:43 - ERROR - WeChatLLMServer - 消息发送完成，成功: 0, 失败: 2
2026-02-11 16:36:43 - ERROR - WeChatLLMServer - 发送消息给用户 ChenMingHao 失败
2026-02-11 16:36:43 - INFO - WeChatLLMServer - 用户 ChenMingHao 的消息处理完成，队列已清空
2026-02-11 16:36:43 - INFO - WeChatLLMServer - 用户 ChenMingHao 的消息处理成功
2026-02-11 16:36:44 - INFO - WeChatLLMServer - 消息处理器已停止
2026-02-11 16:36:44 - INFO - WeChatLLMServer - 关闭用户会话管理器...
2026-02-11 16:36:44 - INFO - WeChatLLMServer - 正在关闭用户会话管理器...
2026-02-11 16:36:44 - INFO - WeChatLLMServer - 用户会话管理器已关闭，保存了 1 个会话
2026-02-11 16:36:44 - INFO - WeChatLLMServer - 企业微信LLM交互服务端已停止
2026-02-11 16:49:20 - INFO - WeChatLLMServer - 日志系统初始化完成，级别: INFO
2026-02-11 16:49:20 - INFO - WeChatLLMServer - 初始化用户会话管理器...
2026-02-11 16:49:20 - INFO - WeChatLLMServer - 用户会话管理器初始化完成，最大用户数: 10
2026-02-11 16:49:20 - INFO - WeChatLLMServer - 初始化消息处理器...
2026-02-11 16:49:20 - INFO - WeChatLLMServer - 企业微信客户端初始化完成，应用ID: 1000002
2026-02-11 16:49:20 - INFO - WeChatLLMServer - 已加载soul.md内容作为system prompt（689字符）
2026-02-11 16:49:20 - INFO - WeChatLLMServer - 工具调用已启用，可用工具: 6 个
2026-02-11 16:49:20 - INFO - WeChatLLMServer - 消息处理器初始化完成
2026-02-11 16:49:20 - INFO - WeChatLLMServer - 初始化企业微信服务器...
2026-02-11 16:49:20 - INFO - WeChatLLMServer - 企业微信服务器初始化完成，监听地址: :::8080
2026-02-11 16:49:20 - INFO - WeChatLLMServer - 所有组件初始化完成
2026-02-11 16:49:20 - INFO - WeChatLLMServer - 启动企业微信LLM交互服务端...
2026-02-11 16:49:20 - INFO - WeChatLLMServer - 启动消息处理器...
2026-02-11 16:49:20 - INFO - WeChatLLMServer - 开始消息处理循环
2026-02-11 16:49:20 - INFO - WeChatLLMServer - 消息处理器已启动
2026-02-11 16:49:20 - INFO - WeChatLLMServer - 启动企业微信服务器...
2026-02-11 16:49:20 - INFO - WeChatLLMServer - 
        ========================================
            企业微信LLM交互服务端启动成功
        ========================================
        
        服务配置：
        服务器地址: :::8080
        最大用户数: 10
        消息批量超时: 10秒
        对话超时: 360秒
        
        LLM配置：
        API提供商: DeepSeek
        基础URL: https://api.deepseek.com
        
        企业微信配置：
        企业ID: ww1b7c2409...
        应用ID: 1000002
        
        日志配置：
        日志级别: INFO
        日志目录: ./logs
        
        ========================================
        服务已启动，按 Ctrl+C 停止服务
        ========================================
        
2026-02-11 16:49:20 - INFO - WeChatLLMServer - 进入主循环...
2026-02-11 16:49:20 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 已停止
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:49:20 - INFO - WeChatLLMServer - 
        ========================================
            企业微信回调服务器启动
        ========================================
        
        服务器配置：
        服务器类型: 双栈服务器 (IPv4 + IPv6)
        监听地址: :: (所有IPv6地址，同时支持IPv4)
        监听端口: 8080
        
        回调URL配置：
        企业微信回调URL: http://你的域名或IP:8080/callback
        Token: FREDERICAT...
        EncodingAESKey: norTzT7trW...
        
        按 Ctrl+C 停止服务器
        
2026-02-11 16:49:20 - INFO - WeChatLLMServer - 服务器正在启动，监听 :::8080...
2026-02-11 16:49:30 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:49:30 - INFO - WeChatLLMServer - 收到POST消息请求: msg_signature=5f1f0b2fc2..., timestamp=1770799769, nonce=1770063375
2026-02-11 16:49:30 - INFO - WeChatLLMServer - 解析消息: 类型=text, 发送者=ChenMingHao
2026-02-11 16:49:30 - INFO - WeChatLLMServer - 收到文本消息来自 ChenMingHao: 试试你的工具调用...
2026-02-11 16:49:30 - INFO - WeChatLLMServer - 为新用户 ChenMingHao 创建会话
2026-02-11 16:49:30 - INFO - WeChatLLMServer - 用户 ChenMingHao 的对话已过期，创建新对话
2026-02-11 16:49:30 - INFO - WeChatLLMServer - 用户消息 - 用户ID: ChenMingHao, 类型: text, 内容: 试试你的工具调用
2026-02-11 16:49:30 - INFO - WeChatLLMServer - 2400:cb00:996:1000:ed8:fd80:3fc4:6a4b - "POST /callback?msg_signature=5f1f0b2fc2687228c583b6d2d4369a117d9f9bdf&timestamp=1770799769&nonce=1770063375 HTTP/1.1" 200 -
2026-02-11 16:49:30 - INFO - WeChatLLMServer - POST请求处理完成
2026-02-11 16:49:40 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 1
            活跃用户: 1
            待处理消息用户: 1
            队列中总消息数: 1
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:49:41 - INFO - WeChatLLMServer - 开始处理用户 ChenMingHao 的 1 条消息
2026-02-11 16:49:44 - INFO - WeChatLLMServer - 用户 ChenMingHao 的LLM响应包含工具调用
2026-02-11 16:49:45 - ERROR - WeChatLLMServer - 调用LLM API失败: Error code: 400 - {'error': {'message': "Messages with role 'tool' must be a response to a preceding message with 'tool_calls'", 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_request_error'}}
2026-02-11 16:49:45 - WARNING - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败，队列保留
2026-02-11 16:49:45 - ERROR - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败
2026-02-11 16:49:46 - INFO - WeChatLLMServer - 开始处理用户 ChenMingHao 的 1 条消息
2026-02-11 16:49:48 - INFO - WeChatLLMServer - 收到信号 2，正在关闭服务...
2026-02-11 16:49:48 - INFO - WeChatLLMServer - 正在停止企业微信LLM交互服务端...
2026-02-11 16:49:48 - INFO - WeChatLLMServer - 停止企业微信服务器...
2026-02-11 16:49:48 - ERROR - WeChatLLMServer - 服务器运行出错: [WinError 10038] 在一个非套接字上尝试了一个操作。
2026-02-11 16:49:48 - INFO - WeChatLLMServer - 服务器已关闭
2026-02-11 16:49:48 - INFO - WeChatLLMServer - 服务器已关闭
2026-02-11 16:49:48 - INFO - WeChatLLMServer - 停止消息处理器...
2026-02-11 16:49:49 - INFO - WeChatLLMServer - 用户 ChenMingHao 的LLM响应包含工具调用
2026-02-11 16:49:49 - ERROR - WeChatLLMServer - 调用LLM API失败: Error code: 400 - {'error': {'message': "Messages with role 'tool' must be a response to a preceding message with 'tool_calls'", 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_request_error'}}
2026-02-11 16:49:49 - WARNING - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败，队列保留
2026-02-11 16:49:49 - ERROR - WeChatLLMServer - 用户 ChenMingHao 的消息处理失败
2026-02-11 16:49:50 - INFO - WeChatLLMServer - 消息处理器已停止
2026-02-11 16:49:50 - INFO - WeChatLLMServer - 关闭用户会话管理器...
2026-02-11 16:49:50 - INFO - WeChatLLMServer - 正在关闭用户会话管理器...
2026-02-11 16:49:50 - INFO - WeChatLLMServer - 用户会话管理器已关闭，保存了 1 个会话
2026-02-11 16:49:50 - INFO - WeChatLLMServer - 企业微信LLM交互服务端已停止
2026-02-11 16:55:14 - INFO - WeChatLLMServer - 日志系统初始化完成，级别: INFO
2026-02-11 16:55:14 - INFO - WeChatLLMServer - 初始化用户会话管理器...
2026-02-11 16:55:14 - INFO - WeChatLLMServer - 用户会话管理器初始化完成，最大用户数: 10
2026-02-11 16:55:14 - INFO - WeChatLLMServer - 初始化消息处理器...
2026-02-11 16:55:14 - INFO - WeChatLLMServer - 企业微信客户端初始化完成，应用ID: 1000002
2026-02-11 16:55:14 - INFO - WeChatLLMServer - 已加载soul.md内容作为system prompt（689字符）
2026-02-11 16:55:14 - INFO - WeChatLLMServer - 工具调用已启用，可用工具: 6 个
2026-02-11 16:55:14 - INFO - WeChatLLMServer - 消息处理器初始化完成
2026-02-11 16:55:14 - INFO - WeChatLLMServer - 初始化企业微信服务器...
2026-02-11 16:55:14 - INFO - WeChatLLMServer - 企业微信服务器初始化完成，监听地址: :::8080
2026-02-11 16:55:14 - INFO - WeChatLLMServer - 所有组件初始化完成
2026-02-11 16:55:14 - INFO - WeChatLLMServer - 启动企业微信LLM交互服务端...
2026-02-11 16:55:14 - INFO - WeChatLLMServer - 启动消息处理器...
2026-02-11 16:55:14 - INFO - WeChatLLMServer - 开始消息处理循环
2026-02-11 16:55:14 - INFO - WeChatLLMServer - 消息处理器已启动
2026-02-11 16:55:14 - INFO - WeChatLLMServer - 启动企业微信服务器...
2026-02-11 16:55:14 - INFO - WeChatLLMServer - 
        ========================================
            企业微信LLM交互服务端启动成功
        ========================================
        
        服务配置：
        服务器地址: :::8080
        最大用户数: 10
        消息批量超时: 10秒
        对话超时: 360秒
        
        LLM配置：
        API提供商: DeepSeek
        基础URL: https://api.deepseek.com
        
        企业微信配置：
        企业ID: ww1b7c2409...
        应用ID: 1000002
        
        日志配置：
        日志级别: INFO
        日志目录: ./logs
        
        ========================================
        服务已启动，按 Ctrl+C 停止服务
        ========================================
        
2026-02-11 16:55:14 - INFO - WeChatLLMServer - 进入主循环...
2026-02-11 16:55:14 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 已停止
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:55:14 - INFO - WeChatLLMServer - 
        ========================================
            企业微信回调服务器启动
        ========================================
        
        服务器配置：
        服务器类型: 双栈服务器 (IPv4 + IPv6)
        监听地址: :: (所有IPv6地址，同时支持IPv4)
        监听端口: 8080
        
        回调URL配置：
        企业微信回调URL: http://你的域名或IP:8080/callback
        Token: FREDERICAT...
        EncodingAESKey: norTzT7trW...
        
        按 Ctrl+C 停止服务器
        
2026-02-11 16:55:14 - INFO - WeChatLLMServer - 服务器正在启动，监听 :::8080...
2026-02-11 16:55:24 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 0
            活跃用户: 0
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:55:26 - INFO - WeChatLLMServer - 收到POST消息请求: msg_signature=22f51fd2c0..., timestamp=1770800125, nonce=1770994661
2026-02-11 16:55:26 - INFO - WeChatLLMServer - 解析消息: 类型=text, 发送者=ChenMingHao
2026-02-11 16:55:26 - INFO - WeChatLLMServer - 收到文本消息来自 ChenMingHao: 试试你的工具调用...
2026-02-11 16:55:26 - INFO - WeChatLLMServer - 为新用户 ChenMingHao 创建会话
2026-02-11 16:55:26 - INFO - WeChatLLMServer - 用户 ChenMingHao 的对话已过期，创建新对话
2026-02-11 16:55:26 - INFO - WeChatLLMServer - 用户消息 - 用户ID: ChenMingHao, 类型: text, 内容: 试试你的工具调用
2026-02-11 16:55:26 - INFO - WeChatLLMServer - 2400:cb00:1179:1000:1bcc:cd06:ab56:2b94 - "POST /callback?msg_signature=22f51fd2c07456541be81cc17fab66e5f4e3e552&timestamp=1770800125&nonce=1770994661 HTTP/1.1" 200 -
2026-02-11 16:55:26 - INFO - WeChatLLMServer - POST请求处理完成
2026-02-11 16:55:34 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 1
            活跃用户: 1
            待处理消息用户: 1
            队列中总消息数: 1
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:55:36 - INFO - WeChatLLMServer - 开始处理用户 ChenMingHao 的 1 条消息
2026-02-11 16:55:40 - INFO - WeChatLLMServer - 用户 ChenMingHao 的LLM响应包含工具调用
2026-02-11 16:55:44 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 1
            活跃用户: 1
            待处理消息用户: 1
            队列中总消息数: 1
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:55:54 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 1
            活跃用户: 1
            待处理消息用户: 1
            队列中总消息数: 1
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:56:04 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 1
            活跃用户: 1
            待处理消息用户: 1
            队列中总消息数: 1
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:56:14 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 1
            活跃用户: 1
            待处理消息用户: 1
            队列中总消息数: 1
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:56:24 - INFO - WeChatLLMServer - 工具调用 - 用户ID: ChenMingHao, 工具: list_files, 状态: 成功
2026-02-11 16:56:24 - INFO - WeChatLLMServer - 用户 ChenMingHao 的LLM响应被分为 1 段
2026-02-11 16:56:24 - INFO - WeChatLLMServer - 开始发送 1 段消息给用户 ChenMingHao
2026-02-11 16:56:24 - INFO - WeChatLLMServer - 开始发送 1 段消息给用户 ChenMingHao
2026-02-11 16:56:24 - INFO - WeChatLLMServer - 获取新的access_token...
2026-02-11 16:56:24 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 1
            活跃用户: 1
            待处理消息用户: 1
            队列中总消息数: 1
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:56:24 - INFO - WeChatLLMServer - 成功获取access_token
2026-02-11 16:56:24 - INFO - WeChatLLMServer - 准备发送消息给用户 ChenMingHao，内容长度: 172
2026-02-11 16:56:25 - INFO - WeChatLLMServer - 成功发送消息给用户 ChenMingHao
2026-02-11 16:56:25 - INFO - WeChatLLMServer - 所有 1 段消息发送成功
2026-02-11 16:56:25 - INFO - WeChatLLMServer - 成功发送所有消息给用户 ChenMingHao
2026-02-11 16:56:25 - INFO - WeChatLLMServer - 用户 ChenMingHao 的消息处理完成，队列已清空
2026-02-11 16:56:25 - INFO - WeChatLLMServer - 用户 ChenMingHao 的消息处理成功
2026-02-11 16:56:34 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 1
            活跃用户: 1
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:56:44 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 1
            活跃用户: 1
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:56:54 - INFO - WeChatLLMServer - 
            服务状态：
            运行状态: 运行中
            服务器状态: 运行中
            消息处理器: 运行中
            
            用户统计：
            总用户数: 1
            活跃用户: 1
            待处理消息用户: 0
            队列中总消息数: 0
            
            功能状态：
            工具调用: 已启用
            soul.md加载: 成功
            
2026-02-11 16:57:03 - INFO - WeChatLLMServer - 收到信号 2，正在关闭服务...
2026-02-11 16:57:03 - INFO - WeChatLLMServer - 正在停止企业微信LLM交互服务端...
2026-02-11 16:57:03 - INFO - WeChatLLMServer - 停止企业微信服务器...
2026-02-11 16:57:03 - INFO - WeChatLLMServer - 服务器已关闭
2026-02-11 16:57:03 - ERROR - WeChatLLMServer - 服务器运行出错: [WinError 10038] 在一个非套接字上尝试了一个操作。
2026-02-11 16:57:03 - INFO - WeChatLLMServer - 停止消息处理器...
2026-02-11 16:57:03 - INFO - WeChatLLMServer - 服务器已关闭
2026-02-11 16:57:04 - INFO - WeChatLLMServer - 消息处理器已停止
2026-02-11 16:57:04 - INFO - WeChatLLMServer - 关闭用户会话管理器...
2026-02-11 16:57:04 - INFO - WeChatLLMServer - 正在关闭用户会话管理器...
2026-02-11 16:57:04 - INFO - WeChatLLMServer - 用户会话管理器已关闭，保存了 1 个会话
2026-02-11 16:57:04 - INFO - WeChatLLMServer - 企业微信LLM交互服务端已停止
